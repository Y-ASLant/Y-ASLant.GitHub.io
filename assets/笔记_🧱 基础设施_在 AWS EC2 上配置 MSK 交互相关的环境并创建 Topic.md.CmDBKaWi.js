import{_ as p,c as e,I as s,j as a,w as r,a as h,au as d,D as i,o as g}from"./chunks/framework.RMxno62p.js";const f=JSON.parse('{"title":"在 AWS EC2 上配置 MSK 交互相关的环境并创建 Topic","description":"","frontmatter":{"tags":["基础设施/云服务商/亚马逊云/AWS","基础设施/消息中间件/Kafka/亚马逊云/AWS/MSK","基础设施/消息中间件/Kafka","开发/后端/消息队列/Kafka","操作系统/CentOS","操作系统/CentOS/CentOS-8","命令行/wget","开发/语言/Java","开发/语言/Java/JDK"]},"headers":[],"relativePath":"笔记/🧱 基础设施/在 AWS EC2 上配置 MSK 交互相关的环境并创建 Topic.md","filePath":"笔记/🧱 基础设施/在 AWS EC2 上配置 MSK 交互相关的环境并创建 Topic.md"}'),o={name:"笔记/🧱 基础设施/在 AWS EC2 上配置 MSK 交互相关的环境并创建 Topic.md"},F=a("h1",{id:"在-aws-ec2-上配置-msk-交互相关的环境并创建-topic",tabindex:"-1"},[h("在 AWS EC2 上配置 MSK 交互相关的环境并创建 Topic "),a("a",{class:"header-anchor",href:"#在-aws-ec2-上配置-msk-交互相关的环境并创建-topic","aria-label":'Permalink to "在 AWS EC2 上配置 MSK 交互相关的环境并创建 Topic"'},"​")],-1),c=d(`<h2 id="安装-java" tabindex="-1">安装 Java <a class="header-anchor" href="#安装-java" aria-label="Permalink to &quot;安装 Java&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> yum</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> java-11</span></span></code></pre></div><h2 id="下载-kafka" tabindex="-1">下载 Kafka <a class="header-anchor" href="#下载-kafka" aria-label="Permalink to &quot;下载 Kafka&quot;">​</a></h2><p>用下面的命令下载 Kafka，Kafka 的版本号应该要与 AWS Console 中的版本号一一对应</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://archive.apache.org/dist/kafka/</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Kafka</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 版本</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">号</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/kafka_2.13-</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Kafka</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 版本</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">号</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.tgz</span></span></code></pre></div><p>以集群为 3.5.1 版本的 Kafka 为例：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://archive.apache.org/dist/kafka/3.5.1/kafka_2.13-3.5.1.tgz</span></span></code></pre></div><p>这样下载就好了</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wget</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://archive.apache.org/dist/kafka/3.5.1/kafka_2.13-3.5.1.tgz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--2024-01-28</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10:03:13--</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  https://archive.apache.org/dist/kafka/3.5.1/kafka_2.13-3.5.1.tgz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Resolving</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> archive.apache.org</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (archive.apache.org)... 65.108.204.189, 2a01:4f9:1a:a084::2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Connecting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> archive.apache.org</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (archive.apache.org)</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">65.108.204.189</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">:443...</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> connected.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">HTTP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> request</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sent,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> awaiting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> response...</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> OK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Length:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 106748875</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (102M) [application/x-gzip]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Saving</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ‘kafka_2.13-3.5.1.tgz’</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">100%[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">=====================================================================================================</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 106,748,875</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 11.2MB/s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 13s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">2024-01-28</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10:03:27</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (7.86 </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">MB/s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) - ‘kafka_2.13-3.5.1.tgz’ saved [106748875/106748875]</span></span></code></pre></div><p>然后解压缩</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -xzf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kafka_2.13-3.5.1.tgz</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[ec2-user@ip-10-100-105-95 </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]$ ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">app</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  etoplus-mds</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  home</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  kafka_2.13-3.5.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  kafka_2.13-3.5.1.tgz</span></span></code></pre></div><h2 id="为环境进行额外配置" tabindex="-1">为环境进行额外配置 <a class="header-anchor" href="#为环境进行额外配置" aria-label="Permalink to &quot;为环境进行额外配置&quot;">​</a></h2><h3 id="下载-aws-msk-拓展库" tabindex="-1">下载 AWS MSK 拓展库 <a class="header-anchor" href="#下载-aws-msk-拓展库" aria-label="Permalink to &quot;下载 AWS MSK 拓展库&quot;">​</a></h3><p>在 EC2 上与 MSK 交互，需要使用到 AWS IAM 在 EC2 上的认证和鉴权机制，而这样的机制是要求我们安装额外的鉴权拓展类的，可以通过下面的命令下载</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://github.com/aws/aws-msk-iam-auth/releases/download/v1.1.1/aws-msk-iam-auth-1.1.1-all.jar</span></span></code></pre></div><p>下载好之后应该是这样的</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://github.com/aws/aws-msk-iam-auth/releases/download/v1.1.1/aws-msk-iam-auth-1.1.1-all.jar</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--2024-01-28</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10:03:56--</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  http://wget/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Resolving</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wget</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (wget)... failed: Name or service not known.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wget:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> unable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> resolve</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> address</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ‘wget’</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--2024-01-28</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10:03:57--</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  https://github.com/aws/aws-msk-iam-auth/releases/download/v1.1.1/aws-msk-iam-auth-1.1.1-all.jar</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Resolving</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> github.com</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (github.com)... 20.205.243.166</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Connecting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> github.com</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (github.com)</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">20.205.243.166</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">:443...</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> connected.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">HTTP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> request</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sent,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> awaiting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> response...</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 302</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Found</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Location:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://objects.githubusercontent.com/github-production-release-asset-2e65be/292053394/b0314dc8-42a6-4855-8114-7de9dc35c48b?X-Amz-Algorithm=AWS4-HMAC-SHA256</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-Credential</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">AKIAVCODYLSA53PQK4ZA%2F20240128%2Fus-east-1%2Fs3%2Faws4_request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-Date</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">20240128T100357Z</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-Expires</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-Signature</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">47a72642671b2a24eca100c163ab3030a02fa51b7ca2e7c9bf321b14f33199e7</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-SignedHeaders</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">host</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">actor_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">key_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">repo_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">292053394</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">response-content-disposition</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">attachment%3B%20filename%3Daws-msk-iam-auth-1.1.1-all.jar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">response-content-type</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">application%2Foctet-stream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> [following]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--2024-01-28</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10:03:57--</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  https://objects.githubusercontent.com/github-production-release-asset-2e65be/292053394/b0314dc8-42a6-4855-8114-7de9dc35c48b?X-Amz-Algorithm=AWS4-HMAC-SHA256</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-Credential</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">AKIAVCODYLSA53PQK4ZA%2F20240128%2Fus-east-1%2Fs3%2Faws4_request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-Date</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">20240128T100357Z</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-Expires</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-Signature</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">47a72642671b2a24eca100c163ab3030a02fa51b7ca2e7c9bf321b14f33199e7</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">X-Amz-SignedHeaders</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">host</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">actor_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">key_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">repo_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">292053394</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">response-content-disposition</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">attachment%3B%20filename%3Daws-msk-iam-auth-1.1.1-all.jar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">response-content-type</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">application%2Foctet-stream</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Resolving</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> objects.githubusercontent.com</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (objects.githubusercontent.com)... 185.199.111.133, 185.199.108.133, 185.199.109.133, ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Connecting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> objects.githubusercontent.com</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (objects.githubusercontent.com)</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">185.199.111.133</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">:443...</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> connected.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">HTTP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> request</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sent,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> awaiting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> response...</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> OK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Length:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 12417891</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (12M) [application/octet-stream]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Saving</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ‘aws-msk-iam-auth-1.1.1-all.jar’</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">100%[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">=====================================================================================================</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12,417,891</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2.82MB/s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 4.8s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">2024-01-28</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10:04:04</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (2.47 </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">MB/s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) - ‘aws-msk-iam-auth-1.1.1-all.jar’ saved [12417891/12417891]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">FINISHED</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --2024-01-28</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10:04:04--</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Total</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wall</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clock</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 7.5s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Downloaded:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> files,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12M</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 4.8s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (2.47 </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">MB/s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>移动到下载的 Kafka 的目录下的 <code>libs</code> 目录下面</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> aws-msk-iam-auth-1.1.1-all.jar</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./kafka_2.13-3.5.1/libs/</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./kafka_2.13-3.5.1/bin/client.properties</span></span></code></pre></div><h3 id="配置客户端连接配置" tabindex="-1">配置客户端连接配置 <a class="header-anchor" href="#配置客户端连接配置" aria-label="Permalink to &quot;配置客户端连接配置&quot;">​</a></h3><p>内容如下</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>security.protocol=SASL_SSL</span></span>
<span class="line"><span>sasl.mechanism=AWS_MSK_IAM</span></span>
<span class="line"><span>sasl.jaas.config=software.amazon.msk.auth.iam.IAMLoginModule required; sasl.client.callback.handler.class=software.amazon.msk.auth.iam.IAMClientCallbackHandler</span></span></code></pre></div><p>而这其中的</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>sasl.client.callback.handler.class=software.amazon.msk.auth.iam.IAMClientCallbackHandler</span></span></code></pre></div><p>一行就是用于自动通过 EC2 机器上的 IAM 认证机制完成认证的拓展库的关联配置。</p><h3 id="授予执行权限" tabindex="-1">授予执行权限 <a class="header-anchor" href="#授予执行权限" aria-label="Permalink to &quot;授予执行权限&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./kafka_2.13-3.5.1/bin/kafka-topics.sh</span></span></code></pre></div><h3 id="创建-topic" tabindex="-1">创建 Topic <a class="header-anchor" href="#创建-topic" aria-label="Permalink to &quot;创建 Topic&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">./kafka_2.13-</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;Kafka </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">版本</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">号</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/bin/kafka-topics.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --create</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --bootstrap-server</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">连接字符</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">串</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --command-config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./kafka_2.13-</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Kafka</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 按版本</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">号</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/bin/client.properties</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --replication-factor</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">集群</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Replica</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 大</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">小</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --partitions</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">分区</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">号</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --topic</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Topic</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 的名</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">字</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><p>比如这样</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">./kafka_2.13-3.5.1/bin/kafka-topics.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --create</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --bootstrap-server</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">连接字符</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">串</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --command-config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./kafka_2.13-3.5.1/bin/client.properties</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --replication-factor</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --topic</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> test.consumer</span></span></code></pre></div><h2 id="问题排查" tabindex="-1">问题排查 <a class="header-anchor" href="#问题排查" aria-label="Permalink to &quot;问题排查&quot;">​</a></h2><h3 id="创建时遭遇-replication-factor-3-larger-than-available-brokers-2" tabindex="-1">创建时遭遇 <code>Replication factor: 3 larger than available brokers: 2</code> <a class="header-anchor" href="#创建时遭遇-replication-factor-3-larger-than-available-brokers-2" aria-label="Permalink to &quot;创建时遭遇 \`Replication factor: 3 larger than available brokers: 2\`&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">./kafka_2.13-3.5.1/bin/kafka-topics.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --create</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --bootstrap-server</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">连接字符</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">串</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --command-config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./kafka_2.13-3.5.1/bin/client.properties</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --replication-factor</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --topic</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> test.consumer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">WARNING:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Due</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> limitations</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> metric</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> names,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> topics</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> period</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) or underscore (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">&#39;_&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) could collide. To avoid issues it is best to use either, but not both.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Error</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> while</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> executing</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> topic</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Replication</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> factor:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> larger</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> than</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> available</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> brokers:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[2024-01-28 10:07:56,910] ERROR org.apache.kafka.common.errors.InvalidReplicationFactorException: Replication factor: 3 larger than available brokers: 2.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kafka.admin.TopicCommand$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>这是因为连接到的集群的 Replica（副本）数量和命令要求的不一致导致的，不可以在创建 Topic 的时候指定超过 Replica（副本）数量的「副本倍率」，需要至少是 Replica（副本）数量的整数倍或者能被整除才行。</p><h3 id="创建时遭遇-class-software-amazon-msk-auth-iam-iamclientcallbackhandler-could-not-be-found" tabindex="-1">创建时遭遇 <code>Class software.amazon.msk.auth.iam.IAMClientCallbackHandler could not be found.</code> <a class="header-anchor" href="#创建时遭遇-class-software-amazon-msk-auth-iam-iamclientcallbackhandler-could-not-be-found" aria-label="Permalink to &quot;创建时遭遇 \`Class software.amazon.msk.auth.iam.IAMClientCallbackHandler could not be found.\`&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./kafka_2.13-3.5.1/bin/kafka-topics.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --create</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --bootstrap-server</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">连接字符</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">串</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --command-config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./kafka_2.13-3.5.1/bin/client.properties</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --replication-factor</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --topic</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> test.consumer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Exception</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> thread</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;main&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> org.apache.kafka.common.config.ConfigException:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Invalid</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> value</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> software.amazon.msk.auth.iam.IAMClientCallbackHandler</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sasl.client.callback.handler.class:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Class</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> software.amazon.msk.auth.iam.IAMClientCallbackHandler</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> could</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> found.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> org.apache.kafka.common.config.ConfigDef.parseType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ConfigDef.java:744</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> org.apache.kafka.common.config.ConfigDef.parseValue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ConfigDef.java:490</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> org.apache.kafka.common.config.ConfigDef.parse</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ConfigDef.java:483</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> org.apache.kafka.common.config.AbstractConfig.</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ini</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">AbstractConfig.java:112</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> org.apache.kafka.common.config.AbstractConfig.</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ini</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">AbstractConfig.java:145</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> org.apache.kafka.clients.admin.AdminClientConfig.</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ini</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">AdminClientConfig.java:245</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> org.apache.kafka.clients.admin.Admin.create</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Admin.java:134</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kafka.admin.TopicCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$TopicService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.createAdminClient</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">TopicCommand.scala:203</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kafka.admin.TopicCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$TopicService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.apply</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">TopicCommand.scala:207</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kafka.admin.TopicCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">TopicCommand.scala:51</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kafka.admin.TopicCommand.main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">TopicCommand.scala</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>之前下载好的 AWS Auth 拓展类需要移动到 Kafka 安装目录的 <code>libs</code> 目录下面：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> aws-msk-iam-auth-1.1.1-all.jar</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./kafka_2.13-3.5.1/libs/</span></span></code></pre></div><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2>`,41);function y(C,B,A,m,E,b){const n=i("NolebasePageProperties"),k=i("VPNolebaseInlineLinkPreview"),t=i("NolebaseGitContributors"),l=i("NolebaseGitChangelog");return g(),e("div",null,[F,s(n),c,a("p",null,[s(k,{href:"https://docs.aws.amazon.com/msk/latest/developerguide/create-topic.html",target:"_blank",rel:"noreferrer"},{default:r(()=>[h("Step 4: Create a topic - Amazon Managed Streaming for Apache Kafka")]),_:1})]),s(t),s(l)])}const v=p(o,[["render",y]]);export{f as __pageData,v as default};
