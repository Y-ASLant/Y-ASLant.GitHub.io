import{_ as k,c as d,I as a,j as s,w as e,a as i,au as r,D as n,o}from"./chunks/framework.RMxno62p.js";const w=JSON.parse('{"title":"å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº","description":"","frontmatter":{"tags":["å¼€å‘/äº‘åŸç”Ÿ","è®¡ç®—æœº/è®¡ç®—æœºç§‘å­¦/CS/è™šæ‹ŸåŒ–","å¼€å‘/äº‘åŸç”Ÿ/Kubernetes","å¼€å‘/å®¹å™¨åŒ–","å¼€å‘/è™šæ‹ŸåŒ–","å¼€å‘/å®¹å™¨åŒ–/Docker","å¼€å‘/äº‘åŸç”Ÿ/Docker","å‘½ä»¤è¡Œ/kubectl","å‘½ä»¤è¡Œ/kubeadm","å‘½ä»¤è¡Œ/containerd","å‘½ä»¤è¡Œ/docker","è½¯ä»¶/äº‘åŸç”Ÿ/kubeadm","è½¯ä»¶/äº‘åŸç”Ÿ/kubelet","è½¯ä»¶/äº‘åŸç”Ÿ/kubectl","è½¯ä»¶/äº‘åŸç”Ÿ/containerd","è½¯ä»¶/äº‘åŸç”Ÿ/docker","å¼€å‘/è™šæ‹ŸåŒ–/cgroup","å‘½ä»¤è¡Œ/systemd","å‘½ä»¤è¡Œ/journalctl","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux","æ“ä½œç³»ç»Ÿ/Linux","æ“ä½œç³»ç»Ÿ/Debian","æ“ä½œç³»ç»Ÿ/Debian/Debian-11","å‘½ä»¤è¡Œ/sysctl","è®¡ç®—æœºç§‘å­¦/å†…æ ¸/å†…æ ¸å‚æ•°","è¿ç»´/å†…æ ¸","å‘½ä»¤è¡Œ/apt"]},"headers":[],"relativePath":"ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº.md","filePath":"ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº.md"}'),g={name:"ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº.md"},c=s("h1",{id:"å‡†å¤‡-kubernetes-èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº",tabindex:"-1"},[i("å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº "),s("a",{class:"header-anchor",href:"#å‡†å¤‡-kubernetes-èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº","aria-label":'Permalink to "å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº"'},"â€‹")],-1),y=s("h3",{id:"æ–‡æ¡£å…¼å®¹æ€§",tabindex:"-1"},[i("æ–‡æ¡£å…¼å®¹æ€§ "),s("a",{class:"header-anchor",href:"#æ–‡æ¡£å…¼å®¹æ€§","aria-label":'Permalink to "æ–‡æ¡£å…¼å®¹æ€§"'},"â€‹")],-1),F={tabindex:"0"},C=s("thead",null,[s("tr",null,[s("th",null,"ä¸»ä½“"),s("th",null,"ç‰ˆæœ¬å·"),s("th",null,"æ–‡æ¡£åœ°å€ï¼ˆå¦‚æœæœ‰ï¼‰")])],-1),u=s("tr",null,[s("td",null,"Debian"),s("td",null,"11"),s("td")],-1),b=s("td",null,"Kubernetes",-1),m=s("td",null,"1.28",-1),v=s("td",null,"Docker",-1),A=s("td",null,"24.0.2",-1),B=s("tr",null,[s("td",null,"containerd"),s("td",null,"1.7.6"),s("td")],-1),_=s("tr",null,[s("td",null,"Linux kernel"),s("td",null,"5.10.0"),s("td")],-1),E=r(`<h2 id="é…ç½®å†…æ ¸å‚æ•°" tabindex="-1">é…ç½®å†…æ ¸å‚æ•° <a class="header-anchor" href="#é…ç½®å†…æ ¸å‚æ•°" aria-label="Permalink to &quot;é…ç½®å†…æ ¸å‚æ•°&quot;">â€‹</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/modules-load.d/k8s.conf</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">br_netfilter</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/sysctl.d/k8s.conf</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">net.bridge.bridge-nf-call-ip6tables = 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">net.bridge.bridge-nf-call-iptables = 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">net.ipv4.ip_forward = 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --system</span></span></code></pre></div><h2 id="é…ç½®ç”¨äºä¸‹è½½-kubectl-kubeadm-å’Œ-kubelet-çš„-apt-æº" tabindex="-1">é…ç½®ç”¨äºä¸‹è½½ <code>kubectl</code>ï¼Œ<code>kubeadm</code> å’Œ <code>kubelet</code> çš„ <code>apt</code> æº <a class="header-anchor" href="#é…ç½®ç”¨äºä¸‹è½½-kubectl-kubeadm-å’Œ-kubelet-çš„-apt-æº" aria-label="Permalink to &quot;é…ç½®ç”¨äºä¸‹è½½ \`kubectl\`ï¼Œ\`kubeadm\` å’Œ \`kubelet\` çš„ \`apt\` æº&quot;">â€‹</a></h2><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-Hgnim" id="tab-E4ZJevb" checked><label for="tab-E4ZJevb">å¤šè¡Œ</label><input type="radio" name="group-Hgnim" id="tab-3Si9J1w"><label for="tab-3Si9J1w">å•è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-transport-https</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca-certificates</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> curl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/keyrings/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://pkgs.k8s.io/core:/stable:/v1.28/deb/Release.key</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --dearmor</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/keyrings/kubernetes-apt-keyring.gpg</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.28/deb/ /&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/sources.list.d/kubernetes.list</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-transport-https</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca-certificates</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> curl</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/keyrings/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://pkgs.k8s.io/core:/stable:/v1.28/deb/Release.key</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --dearmor</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/keyrings/kubernetes-apt-keyring.gpg</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.28/deb/ /&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/sources.list.d/kubernetes.list</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span></span></code></pre></div></div></div><p>å®‰è£…å¹¶ä¿æŒå…¶ç‰ˆæœ¬å·ï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-ljNxe" id="tab-Bpy605u" checked><label for="tab-Bpy605u">å¤šè¡Œ</label><input type="radio" name="group-ljNxe" id="tab-Ou5Znx_"><label for="tab-Ou5Znx_">å•è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> hold</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> hold</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span></span></code></pre></div></div></div><h2 id="åˆå§‹åŒ–-containerd-çš„é…ç½®" tabindex="-1">åˆå§‹åŒ– <code>containerd</code> çš„é…ç½® <a class="header-anchor" href="#åˆå§‹åŒ–-containerd-çš„é…ç½®" aria-label="Permalink to &quot;åˆå§‹åŒ– \`containerd\` çš„é…ç½®&quot;">â€‹</a></h2><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-0ViSZ" id="tab-dc6qxFH" checked><label for="tab-dc6qxFH">å¤šè¡Œ</label><input type="radio" name="group-0ViSZ" id="tab-pV8sWoD"><label for="tab-pV8sWoD">å•è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span></span></code></pre></div></div></div><h2 id="é…ç½®-cgroup" tabindex="-1">é…ç½® CGroup <a class="header-anchor" href="#é…ç½®-cgroup" aria-label="Permalink to &quot;é…ç½® CGroup&quot;">â€‹</a></h2><p>æŸ¥çœ‹ Docker ç”¨çš„ CGroupï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> info</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cgroup</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> info</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cgroup</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Cgroup</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Driver:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Cgroup</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Version:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  cgroupns</span></span></code></pre></div><p>å¦‚æœæ˜¯ <code>systemd</code> çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦åŒæ­¥é…ç½® <code>containerd</code> ä¹Ÿæ˜¯ <code>systemd</code> ä½œä¸º CGroup Driver<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> ï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-hQy_1" id="tab-yoq0PkM" checked><label for="tab-yoq0PkM">å¤šè¡Œ</label><input type="radio" name="group-hQy_1" id="tab-75fRUBM"><label for="tab-75fRUBM">å•è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;s/SystemdCgroup = false/SystemdCgroup = true/g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> PAUSE_IMAGE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config images list </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pause)&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;s,sandbox_image = .*,sandbox_image = &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$PAUSE_IMAGE</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;s/SystemdCgroup = false/SystemdCgroup = true/g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> PAUSE_IMAGE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config images list </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pause)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;s,sandbox_image = .*,sandbox_image = &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$PAUSE_IMAGE</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span></span></code></pre></div></div></div><p>ç„¶åé‡å¯ <code>docker</code> å’Œ <code>containerd</code> çš„ <code>systemd</code> æœåŠ¡ï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-IuW9l" id="tab-e493Day" checked><label for="tab-e493Day">å¤šè¡Œ</label><input type="radio" name="group-IuW9l" id="tab-QD9V_iB"><label for="tab-QD9V_iB">å•è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span></span></code></pre></div></div></div>`,18),f=s("hr",{class:"footnotes-sep"},null,-1),D={class:"footnotes"},x={class:"footnotes-list"},P={id:"fn1",class:"footnote-item"},q=s("a",{href:"#fnref1",class:"footnote-backref"},"â†©ï¸",-1);function S(N,V,K,G,I,$){const l=n("NolebasePageProperties"),t=n("VPNolebaseInlineLinkPreview"),h=n("NolebaseGitContributors"),p=n("NolebaseGitChangelog");return o(),d("div",null,[c,a(l),y,s("table",F,[C,s("tbody",null,[u,s("tr",null,[b,m,s("td",null,[a(t,{href:"https://v1-28.docs.kubernetes.io/",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("https://v1-28.docs.kubernetes.io/")]),_:1})])]),s("tr",null,[v,A,s("td",null,[a(t,{href:"https://docs.docker.com/",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("https://docs.docker.com/")]),_:1})])]),B,_])]),E,a(h),a(p),f,s("section",D,[s("ol",x,[s("li",P,[s("p",null,[i("å¯¹äºï¼ŒCGroup Driverï¼Œåœ¨ "),a(t,{href:"https://kubernetes.io/zh-cn/docs/setup/production-environment/container-runtimes/",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("å®¹å™¨è¿è¡Œæ—¶ | Kubernetes")]),_:1}),i(" å’Œ "),a(t,{href:"https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/kubeadm/configure-cgroup-driver/",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("é…ç½® cgroup é©±åŠ¨ | Kubernetes")]),_:1}),i(" æ–‡æ¡£ä¸­æœ‰è®²è§£åˆ°ï¼Œæ˜¯ CRI çš„ä¸€éƒ¨åˆ†ã€‚ "),q])])])])])}const L=k(g,[["render",S]]);export{w as __pageData,L as default};
