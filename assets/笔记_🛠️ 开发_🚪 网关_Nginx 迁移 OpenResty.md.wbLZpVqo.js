import{_ as o,c as d,I as i,j as s,w as t,a as e,au as l,D as a,o as r}from"./chunks/framework.RMxno62p.js";const O=JSON.parse('{"title":"Nginx è¿ç§» OpenResty","description":"","frontmatter":{"tags":["è®¡ç®—æœº/ç½‘ç»œ/ç½‘å…³/Nginx","è®¡ç®—æœº/ç½‘ç»œ/ç½‘å…³/OpenResty","æ“ä½œç³»ç»Ÿ/Debian","å¼€å‘/è¿ç§»"]},"headers":[],"relativePath":"ç¬”è®°/ğŸ› ï¸ å¼€å‘/ğŸšª ç½‘å…³/Nginx è¿ç§» OpenResty.md","filePath":"ç¬”è®°/ğŸ› ï¸ å¼€å‘/ğŸšª ç½‘å…³/Nginx è¿ç§» OpenResty.md"}'),c={name:"ç¬”è®°/ğŸ› ï¸ å¼€å‘/ğŸšª ç½‘å…³/Nginx è¿ç§» OpenResty.md"},g=s("h1",{id:"nginx-è¿ç§»-openresty",tabindex:"-1"},[e("Nginx è¿ç§» OpenResty "),s("a",{class:"header-anchor",href:"#nginx-è¿ç§»-openresty","aria-label":'Permalink to "Nginx è¿ç§» OpenResty"'},"â€‹")],-1),y=l('<h5 id="æ–‡æ¡£ç‰ˆæœ¬" tabindex="-1">æ–‡æ¡£ç‰ˆæœ¬ <a class="header-anchor" href="#æ–‡æ¡£ç‰ˆæœ¬" aria-label="Permalink to &quot;æ–‡æ¡£ç‰ˆæœ¬&quot;">â€‹</a></h5><table tabindex="0"><thead><tr><th>ç¼–è¾‘è€…</th><th>ç‰ˆæœ¬</th><th>å˜æ›´æ—¥æœŸ</th><th>å˜æ›´è¯´æ˜</th></tr></thead><tbody><tr><td>Neko</td><td>v1.0.0</td><td>2022-08-17</td><td>åˆ›å»º</td></tr></tbody></table><h3 id="æ–‡æ¡£å…¼å®¹æ€§" tabindex="-1">æ–‡æ¡£å…¼å®¹æ€§ <a class="header-anchor" href="#æ–‡æ¡£å…¼å®¹æ€§" aria-label="Permalink to &quot;æ–‡æ¡£å…¼å®¹æ€§&quot;">â€‹</a></h3>',3),u={tabindex:"0"},C=s("thead",null,[s("tr",null,[s("th",null,"ä¸»ä½“"),s("th",null,"ç‰ˆæœ¬å·"),s("th",null,"æ–‡æ¡£åœ°å€ï¼ˆå¦‚æœæœ‰ï¼‰")])],-1),F=s("tr",null,[s("td",null,"Debian"),s("td",null,"11/5.10.127-1/amd64"),s("td")],-1),b=s("td",null,"Nginx",-1),m=s("td",null,"nginx/1.21.1",-1),v=s("td",null,"OpenResty",-1),_=s("td",null,"openresty/1.21.4.1",-1),x=l(`<h2 id="debian-11" tabindex="-1">Debian 11 <a class="header-anchor" href="#debian-11" aria-label="Permalink to &quot;Debian 11&quot;">â€‹</a></h2><h3 id="å®‰è£…å‰ç½®è½¯ä»¶åŒ…" tabindex="-1">å®‰è£…å‰ç½®è½¯ä»¶åŒ… <a class="header-anchor" href="#å®‰è£…å‰ç½®è½¯ä»¶åŒ…" aria-label="Permalink to &quot;å®‰è£…å‰ç½®è½¯ä»¶åŒ…&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> libpcre3-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> libssl-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> perl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> build-essential</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> curl</span></span></code></pre></div><h3 id="å®‰è£…å¯¼å…¥-gpg-å…¬é’¥æ—¶æ‰€éœ€çš„å‡ ä¸ªä¾èµ–åŒ…-æ•´ä¸ªå®‰è£…è¿‡ç¨‹å®Œæˆåå¯ä»¥éšæ—¶åˆ é™¤å®ƒä»¬" tabindex="-1">å®‰è£…å¯¼å…¥ GPG å…¬é’¥æ—¶æ‰€éœ€çš„å‡ ä¸ªä¾èµ–åŒ…ï¼ˆæ•´ä¸ªå®‰è£…è¿‡ç¨‹å®Œæˆåå¯ä»¥éšæ—¶åˆ é™¤å®ƒä»¬ï¼‰ <a class="header-anchor" href="#å®‰è£…å¯¼å…¥-gpg-å…¬é’¥æ—¶æ‰€éœ€çš„å‡ ä¸ªä¾èµ–åŒ…-æ•´ä¸ªå®‰è£…è¿‡ç¨‹å®Œæˆåå¯ä»¥éšæ—¶åˆ é™¤å®ƒä»¬" aria-label="Permalink to &quot;å®‰è£…å¯¼å…¥ GPG å…¬é’¥æ—¶æ‰€éœ€çš„å‡ ä¸ªä¾èµ–åŒ…ï¼ˆæ•´ä¸ªå®‰è£…è¿‡ç¨‹å®Œæˆåå¯ä»¥éšæ—¶åˆ é™¤å®ƒä»¬ï¼‰&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --no-install-recommends</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wget</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gnupg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca-certificates</span></span></code></pre></div><h3 id="å¯¼å…¥æˆ‘ä»¬çš„-gpg-å¯†é’¥" tabindex="-1">å¯¼å…¥æˆ‘ä»¬çš„ GPG å¯†é’¥ <a class="header-anchor" href="#å¯¼å…¥æˆ‘ä»¬çš„-gpg-å¯†é’¥" aria-label="Permalink to &quot;å¯¼å…¥æˆ‘ä»¬çš„ GPG å¯†é’¥&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://openresty.org/package/pubkey.gpg</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-key</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span></span></code></pre></div><h3 id="æ·»åŠ -openresty-å®˜æ–¹-apt-ä»“åº“" tabindex="-1">æ·»åŠ  OpenResty å®˜æ–¹ APT ä»“åº“ <a class="header-anchor" href="#æ·»åŠ -openresty-å®˜æ–¹-apt-ä»“åº“" aria-label="Permalink to &quot;æ·»åŠ  OpenResty å®˜æ–¹ APT ä»“åº“&quot;">â€‹</a></h3><p>å¯¹äºÂ <code>x86_64</code>Â æˆ–Â <code>amd64</code>Â ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> codename</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -Po</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;VERSION=&quot;[0-9]+ \\(\\K[^)]+&#39; /etc/os-release\`</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;deb http://openresty.org/package/debian </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$codename</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresty&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/sources.list.d/openresty.list</span></span></code></pre></div><p>è€Œå¯¹äºÂ <code>arm64</code>Â æˆ–Â <code>aarch64</code>Â ç³»ç»Ÿï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> codename</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -Po</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;VERSION=&quot;[0-9]+ \\(\\K[^)]+&#39; /etc/os-release\`</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;deb http://openresty.org/package/arm64/debian </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$codename</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresty&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/sources.list.d/openresty.list</span></span></code></pre></div><h3 id="æ›´æ–°-apt-ç´¢å¼•" tabindex="-1">æ›´æ–° APT ç´¢å¼• <a class="header-anchor" href="#æ›´æ–°-apt-ç´¢å¼•" aria-label="Permalink to &quot;æ›´æ–° APT ç´¢å¼•&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span></span></code></pre></div><h3 id="å…ˆåœæ­¢-nginx" tabindex="-1">å…ˆåœæ­¢ Nginx <a class="header-anchor" href="#å…ˆåœæ­¢-nginx" aria-label="Permalink to &quot;å…ˆåœæ­¢ Nginx&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nginx</span></span></code></pre></div><h3 id="å®‰è£…-openresty-è½¯ä»¶åŒ…" tabindex="-1">å®‰è£… OpenResty è½¯ä»¶åŒ… <a class="header-anchor" href="#å®‰è£…-openresty-è½¯ä»¶åŒ…" aria-label="Permalink to &quot;å®‰è£… OpenResty è½¯ä»¶åŒ…&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresty</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresty-opm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresty-restydoc</span></span></code></pre></div><p>è¿™ä¸ªåŒ…åŒæ—¶ä¹Ÿæ¨èå®‰è£…Â <code>openresty-opm</code>Â å’ŒÂ <code>openresty-restydoc</code>Â åŒ…ï¼Œæ‰€ä»¥åé¢ä¸¤ä¸ªåŒ…ä¼šç¼ºçœå®‰è£…ä¸Šã€‚ å¦‚æœä½ ä¸æƒ³è‡ªåŠ¨å…³è”å®‰è£…ï¼Œå¯ä»¥ç”¨ä¸‹é¢æ–¹æ³•å…³é—­è‡ªåŠ¨å…³è”å®‰è£…ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --no-install-recommends</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresty</span></span></code></pre></div><h3 id="åœæ­¢å®‰è£…å¥½çš„-openresty" tabindex="-1">åœæ­¢å®‰è£…å¥½çš„ OpenResty <a class="header-anchor" href="#åœæ­¢å®‰è£…å¥½çš„-openresty" aria-label="Permalink to &quot;åœæ­¢å®‰è£…å¥½çš„ OpenResty&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresty</span></span></code></pre></div><h3 id="æ›´æ–°-openresty-çš„é…ç½®æ–‡ä»¶" tabindex="-1">æ›´æ–° OpenResty çš„é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#æ›´æ–°-openresty-çš„é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;æ›´æ–° OpenResty çš„é…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/openresty/nginx.conf</span></span></code></pre></div><p>å¯ä»¥å‚è€ƒæˆ‘çš„é…ç½®ï¼š</p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">user </span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nginx;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">worker_processes </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">error_log </span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> /var/log/nginx/error.log </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">notice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">pid </span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">       /usr/local/openresty/nginx/logs/nginx.pid;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">events</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    worker_connections </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    include </span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      mime.types;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    default_type </span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> application/octet-stream;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    log_format </span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">json </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;{&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;@timestamp&quot;:&quot;$</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">time_iso8601</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;client_ip&quot;: &quot;$</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">remote_addr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;request_uri&quot;: &quot;$</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">uri</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;host&quot;:&quot;$</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">host</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;method&quot;: &quot;$</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">request_method</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;request&quot;: &quot;$</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">request</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;status&quot;: &quot;$</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">status</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;body_bytes_sent&quot;: $</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">body_bytes_sent</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;referer&quot;: &quot;$</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">http_referer</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;ua&quot;: &quot;$</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">http_user_agent</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;request_time&quot;: $</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">request_time</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;upstream_connect_time&quot;: $</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">upstream_connect_time</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;upstream_header_time&quot;: $</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">upstream_header_time</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &#39;&quot;upstream_response_time&quot;: $</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">upstream_response_time</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &#39;}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    access_log </span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> /var/log/nginx/access.log json;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    sendfile </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    #tcp_nopush     on;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    keepalive_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 65</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    #gzip  on;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    include </span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">/etc/openresty/conf.d/*.conf;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    include </span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">/etc/openresty/sites-enabled/*;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="å¼€å§‹è¿ç§»å‰©ä½™çš„ç½‘ç«™é…ç½®æ–‡ä»¶" tabindex="-1">å¼€å§‹è¿ç§»å‰©ä½™çš„ç½‘ç«™é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#å¼€å§‹è¿ç§»å‰©ä½™çš„ç½‘ç«™é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;å¼€å§‹è¿ç§»å‰©ä½™çš„ç½‘ç«™é…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><p>åˆ›å»ºå¿…è¦çš„ç›®å½•</p><ul><li><p><code>/etc/openresty/conf.d</code></p></li><li><p><code>/etc/openresty/sites-available</code></p></li><li><p><code>/etc/openresty/sites-enabled</code></p></li><li><p>å¤åˆ¶ <code>/etc/nginx/conf.d/</code> ä¸‹é¢çš„æ–‡ä»¶åˆ° <code>/etc/openresty/conf.d</code></p></li><li><p>å¤åˆ¶ <code>/etc/nginx/sites-available/</code> ä¸‹é¢çš„æ–‡ä»¶åˆ° <code>/etc/openresty/sites-available</code></p></li><li><p>æ‰‹åŠ¨ä¸ºæ¯ä¸€ä¸ª <code>/etc/openresty/sites-available</code> ä¸‹çš„é…ç½®æ–‡ä»¶åˆ›å»ºè½¯é“¾æ¥</p></li></ul><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ£€æŸ¥é…ç½®æ–‡ä»¶æœ‰æ•ˆæ€§ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/local/openresty/nginx/sbin/nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -t</span></span></code></pre></div><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤é‡è½½é…ç½®æ–‡ä»¶ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/local/openresty/nginx/sbin/nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reload</span></span></code></pre></div><h3 id="æœåŠ¡åˆ‡æ¢" tabindex="-1">æœåŠ¡åˆ‡æ¢ <a class="header-anchor" href="#æœåŠ¡åˆ‡æ¢" aria-label="Permalink to &quot;æœåŠ¡åˆ‡æ¢&quot;">â€‹</a></h3><p>å‡†å¤‡å¥½ä¹‹åï¼Œåœæ­¢ Nginxï¼Œå¼€å¯ OpenRestyï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresty</span></span></code></pre></div><h3 id="æ›´æ–°å¼€æœºè‡ªå¯ç­–ç•¥" tabindex="-1">æ›´æ–°å¼€æœºè‡ªå¯ç­–ç•¥ <a class="header-anchor" href="#æ›´æ–°å¼€æœºè‡ªå¯ç­–ç•¥" aria-label="Permalink to &quot;æ›´æ–°å¼€æœºè‡ªå¯ç­–ç•¥&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresty</span></span></code></pre></div><h3 id="å¸è½½-nginx" tabindex="-1">å¸è½½ Nginx <a class="header-anchor" href="#å¸è½½-nginx" aria-label="Permalink to &quot;å¸è½½ Nginx&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nginx</span></span></code></pre></div><h3 id="åˆ›å»ºæ–°çš„-nginx-äºŒè¿›åˆ¶æ–‡ä»¶è½¯é“¾æ¥" tabindex="-1">åˆ›å»ºæ–°çš„ Nginx äºŒè¿›åˆ¶æ–‡ä»¶è½¯é“¾æ¥ <a class="header-anchor" href="#åˆ›å»ºæ–°çš„-nginx-äºŒè¿›åˆ¶æ–‡ä»¶è½¯é“¾æ¥" aria-label="Permalink to &quot;åˆ›å»ºæ–°çš„ Nginx äºŒè¿›åˆ¶æ–‡ä»¶è½¯é“¾æ¥&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/local/openresty/nginx/sbin/nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/local/bin/nginx</span></span></code></pre></div><h3 id="å…¶ä»–çš„å…³è”é…ç½®" tabindex="-1">å…¶ä»–çš„å…³è”é…ç½® <a class="header-anchor" href="#å…¶ä»–çš„å…³è”é…ç½®" aria-label="Permalink to &quot;å…¶ä»–çš„å…³è”é…ç½®&quot;">â€‹</a></h3><h4 id="logrotate" tabindex="-1">Logrotate <a class="header-anchor" href="#logrotate" aria-label="Permalink to &quot;Logrotate&quot;">â€‹</a></h4><p>å¦‚æœæ˜¯ä½¿ç”¨è½¯ä»¶ç®¡ç†å™¨å®‰è£…çš„ Nginxï¼Œå…¶å®‰è£…è„šæœ¬å¯èƒ½ä¼šè‡ªåŠ¨ä¸º Nginx é…ç½® Logrotate ç­–ç•¥ï¼Œä¸”å¦‚æœä½ åœ¨ä¸Šè¿°çš„ OpenResty é…ç½®æ–‡ä»¶ï¼ˆ<code>/etc/openresty/nginx.conf</code>ï¼‰ä¸­ä¿®æ”¹äº† <code>pid</code> ï¼ˆOpenResty çš„è¿›ç¨‹ ID æ–‡ä»¶ï¼‰å­—æ®µå¯¹åº”çš„å€¼ï¼Œæˆ–è€…è¯´ä½ çš„ OpenResty é…ç½®æ–‡ä»¶ä¸­ <code>pid</code> å­—æ®µçš„å€¼å’ŒåŸå…ˆ Nginx é…ç½®æ–‡ä»¶ï¼ˆ<code>/etc/nginx/nginx.conf</code>ï¼‰ä¸­é…ç½®çš„ <code>pid</code> å­—æ®µçš„å€¼ä¸ä¸€æ ·çš„è¯ï¼Œè¯·ä¸€å®šæ£€æŸ¥å¹¶åœ¨å¿…è¦æƒ…å†µä¸‹ä¿®æ”¹ Logrotate ç­–ç•¥é…ç½®è„šæœ¬ã€‚</p>`,47);function q(A,D,E,B,f,P){const h=a("NolebasePageProperties"),n=a("VPNolebaseInlineLinkPreview"),p=a("NolebaseGitContributors"),k=a("NolebaseGitChangelog");return r(),d("div",null,[g,i(h),y,s("table",u,[C,s("tbody",null,[F,s("tr",null,[b,m,s("td",null,[i(n,{href:"https://docs.nginx.com/",target:"_blank",rel:"noreferrer"},{default:t(()=>[e("NGINX Documentation")]),_:1})])]),s("tr",null,[v,_,s("td",null,[i(n,{href:"https://openresty.org/en/",target:"_blank",rel:"noreferrer"},{default:t(()=>[e("OpenRestyÂ® - Official Site")]),_:1})])])])]),x,i(p),i(k)])}const R=o(c,[["render",q]]);export{O as __pageData,R as default};
