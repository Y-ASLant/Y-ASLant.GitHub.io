import{_ as d,c as r,I as a,j as s,a as i,w as e,au as l,D as t,o}from"./chunks/framework.RMxno62p.js";const w=JSON.parse('{"title":"åœ¨æœ¬åœ°ç”¨ OpenSSL ç”¨é…ç½®æ–‡ä»¶å’Œç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼åˆ›å»ºã€é…ç½®å’Œä½¿ç”¨ Intermediate CAï¼ˆä¸­é—´ CAï¼‰","description":"","frontmatter":{"tags":["å‘½ä»¤è¡Œ/openssl","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/TLS","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/TLS/mTLS","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/TLS/HTTPS","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/TLS/SSL","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/PKI","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/è¯ä¹¦æœºæ„/CA","å¼€å‘/Git","å‘½ä»¤è¡Œ/git","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/è¯ä¹¦æœºæ„/ä¸­é—´CA","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/è¯ä¹¦æœºæ„/IntermediateCA","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/è¯ä¹¦æœºæ„/RootCA","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/TLS/åŸŸåè¯ä¹¦","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/è¯ä¹¦åŠé”€åˆ—è¡¨","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/è¯ä¹¦åŠé”€åˆ—è¡¨/CRL"]},"headers":[],"relativePath":"ç¬”è®°/ğŸ”’ PKI å…¬é’¥åŸºç¡€è®¾æ–½/åœ¨æœ¬åœ°ç”¨ OpenSSL ç”¨é…ç½®æ–‡ä»¶å’Œç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼åˆ›å»ºã€é…ç½®å’Œä½¿ç”¨ Intermediate CAï¼ˆä¸­é—´ CAï¼‰.md","filePath":"ç¬”è®°/ğŸ”’ PKI å…¬é’¥åŸºç¡€è®¾æ–½/åœ¨æœ¬åœ°ç”¨ OpenSSL ç”¨é…ç½®æ–‡ä»¶å’Œç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼åˆ›å»ºã€é…ç½®å’Œä½¿ç”¨ Intermediate CAï¼ˆä¸­é—´ CAï¼‰.md"}'),c={name:"ç¬”è®°/ğŸ”’ PKI å…¬é’¥åŸºç¡€è®¾æ–½/åœ¨æœ¬åœ°ç”¨ OpenSSL ç”¨é…ç½®æ–‡ä»¶å’Œç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼åˆ›å»ºã€é…ç½®å’Œä½¿ç”¨ Intermediate CAï¼ˆä¸­é—´ CAï¼‰.md"},g=s("h1",{id:"åœ¨æœ¬åœ°ç”¨-openssl-ç”¨é…ç½®æ–‡ä»¶å’Œç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼åˆ›å»ºã€é…ç½®å’Œä½¿ç”¨-intermediate-ca-ä¸­é—´-ca",tabindex:"-1"},[i("åœ¨æœ¬åœ°ç”¨ OpenSSL ç”¨é…ç½®æ–‡ä»¶å’Œç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼åˆ›å»ºã€é…ç½®å’Œä½¿ç”¨ Intermediate CAï¼ˆä¸­é—´ CAï¼‰ "),s("a",{class:"header-anchor",href:"#åœ¨æœ¬åœ°ç”¨-openssl-ç”¨é…ç½®æ–‡ä»¶å’Œç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼åˆ›å»ºã€é…ç½®å’Œä½¿ç”¨-intermediate-ca-ä¸­é—´-ca","aria-label":'Permalink to "åœ¨æœ¬åœ°ç”¨ OpenSSL ç”¨é…ç½®æ–‡ä»¶å’Œç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼åˆ›å»ºã€é…ç½®å’Œä½¿ç”¨ Intermediate CAï¼ˆä¸­é—´ CAï¼‰"'},"â€‹")],-1),y={class:"warning custom-block"},C=s("p",{class:"custom-block-title"},"âš ï¸ å¼€å§‹å‰è¯·é˜…è¯»",-1),m=l("<blockquote><p>The ca command is quirky and at times downright unfriendly. ca å‘½ä»¤å¾ˆå¤æ€ªï¼Œæœ‰æ—¶ç”šè‡³å®Œå…¨ä¸å‹å¥½ã€‚</p></blockquote><p>ä»¥åŠ</p><blockquote><p>The ca utility was originally meant as an example of how to do things in a CA. It was not supposed to be used as a full blown CA itself: nevertheless some people are using it for this purpose.</p></blockquote><blockquote><p>ca å®ç”¨ç¨‹åºæœ€åˆæ˜¯ä½œä¸ºå¦‚ä½•åœ¨ CA ä¸­æ‰§è¡Œæ“ä½œçš„ç¤ºä¾‹ã€‚å®ƒæœ¬èº«ä¸åº”è¯¥è¢«ç”¨ä½œä¸€ä¸ªå®Œæ•´çš„ CAï¼šå°½ç®¡å¦‚æ­¤ï¼Œè¿˜æ˜¯æœ‰äººå°†å®ƒç”¨äºæ­¤ç›®çš„ã€‚</p></blockquote><blockquote><p>The ca command is effectively a single user command: no locking is done on the various files and attempts to run more than one ca command on the same database can have unpredictable results.</p></blockquote><blockquote><p>ca å‘½ä»¤å®é™…ä¸Šæ˜¯ä¸€ä¸ªå•ç”¨æˆ·å‘½ä»¤ï¼šä¸ä¼šå¯¹å„ä¸ªæ–‡ä»¶è¿›è¡Œé”å®šï¼Œå¹¶ä¸”å°è¯•åœ¨åŒä¸€æ•°æ®åº“ä¸Šè¿è¡Œå¤šä¸ª ca å‘½ä»¤å¯èƒ½ä¼šäº§ç”Ÿä¸å¯é¢„æµ‹çš„ç»“æœã€‚</p></blockquote><p>æ‰€ä»¥è¿™ç¯‡æ–‡æ¡£å¹¶ä¸æ˜¯æ¨èå¤§å®¶ç”¨ <code>openssl ca</code> è¿™æ ·çš„å‘½ä»¤å»ç®¡ç†å’Œç»´æŠ¤è‡ªå·±çš„ CA å’Œä¸‹é¢çš„è¯ä¹¦ï¼Œè€Œæ˜¯å¸Œæœ›æä¾›ä¸€ä¸ªæ–¹å‘å’ŒæŒ‡å—æ¥è¯´æ˜ <code>openssl ca</code> æ˜¯å¦‚ä½•è¿è¡Œå’Œä½¿ç”¨çš„ï¼Œæˆ‘ä¹Ÿä»…ä»…åªæœ‰åœ¨è‡ªå·±çš„ Homelab ä¸Šçš„å°éƒ¨åˆ†é¢†åŸŸä½¿ç”¨äº†è¿™æ ·çš„æ–¹å¼æ¥ç®¡ç†è‡ªå·±çš„ CA å’Œè¯ä¹¦ã€‚</p>",7),F=l(`<div class="warning custom-block"><p class="custom-block-title">âš ï¸ å…³äºç‰ˆæœ¬æ§åˆ¶</p><p>åœ¨ 2023 å¹´è¿™æ ·çš„äº‘åŸç”Ÿæ—¶ä»£ä¸‹ï¼Œæˆ‘ä¾ç„¶æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªé€‚åˆç»ˆç«¯ç®¡ç†ç”¨æˆ·å»ä½¿ç”¨çš„æ¯”è¾ƒå‹å¥½çš„ CA ç®¡ç†å·¥å…·ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œä½¿ç”¨äº† Git ä½œä¸ºç‰ˆæœ¬æ§åˆ¶å·¥å…·æ¥ç®¡ç†æˆ‘çš„ CA å’Œè¯ä¹¦ã€‚ è¿™ä¸ä»£è¡¨æˆ‘æ¨èä½ ä¹Ÿè¿™ä¹ˆåšï¼Œç”Ÿäº§ç¯å¢ƒä¸Šä¹Ÿä¸å»ºè®®è¿™ä¹ˆåšï¼Œä½ åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­ä¹Ÿåº”è¯¥æ—¶æ—¶åˆ»åˆ»å…³æ³¨ä½ çš„ç§é’¥æ˜¯å¦è¢«æ·»åŠ åˆ°äº†æš‚å­˜ï¼ŒStashï¼Œæ¨é€åˆ°äº†ç›®æ ‡è¿œç¨‹æœåŠ¡å™¨ï¼Œä¸€æ—¦ä½ åœ¨ Git å†å²ä¸­ç•™ä¸‹äº†ä»»ä½•çš„ç§é’¥çš„è„šå°ï¼Œè¿™å°†ä¼šå¼•å…¥éå¸¸å¤§çš„å®‰å…¨éšæ‚£ï¼Œå…è®¸é»‘å®¢åœ¨å…¥ä¾µç”µè„‘åç›´æ¥é€šè¿‡ Git Reflog ç›¸å…³çš„å‘½ä»¤ç›´æ¥æŠŠå«æœ‰ç§é’¥çš„å†å²è®°å½•è§£æå’Œæå–å‡ºæ¥ã€‚</p><p><strong>æˆ‘è¿™ä¹ˆåšåªæ˜¯å› ä¸ºæ²¡æœ‰æ›´å¥½ç”¨ç›´è§‚çš„ç®¡ç†å·¥å…·ï¼Œä¸”æˆ‘è‡ªå·±ä½¿ç”¨ç±»ä¼¼äº 1Password è¿™æ ·çš„å·¥å…·å»ç»†è‡´åœ°ç®¡ç†æˆ‘çš„æ‰€æœ‰ç§é’¥ï¼Œå¦‚æœä½ ä¹Ÿæƒ³è¿™æ ·å®è·µå’Œå°è¯• CA å’Œ PKIï¼Œè¯·åŠ¡å¿…æ³¨æ„ä½ çš„ç§é’¥çš„å®‰å…¨ã€‚</strong></p></div><h2 id="åˆ›å»º" tabindex="-1">åˆ›å»º <a class="header-anchor" href="#åˆ›å»º" aria-label="Permalink to &quot;åˆ›å»º&quot;">â€‹</a></h2><h3 id="åˆ›å»ºå­˜å‚¨ä¸­é—´-ca-ç›¸å…³æ‰€æœ‰æ–‡ä»¶çš„ç›®å½•" tabindex="-1">åˆ›å»ºå­˜å‚¨ä¸­é—´ CA ç›¸å…³æ‰€æœ‰æ–‡ä»¶çš„ç›®å½• <a class="header-anchor" href="#åˆ›å»ºå­˜å‚¨ä¸­é—´-ca-ç›¸å…³æ‰€æœ‰æ–‡ä»¶çš„ç›®å½•" aria-label="Permalink to &quot;åˆ›å»ºå­˜å‚¨ä¸­é—´ CA ç›¸å…³æ‰€æœ‰æ–‡ä»¶çš„ç›®å½•&quot;">â€‹</a></h3><p>æˆ‘ä»¬å¯ä»¥åœ¨ Root CA æ‰€åœ¨çš„ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªç”¨äºå­˜å‚¨ä¸­é—´ CA æœ¬èº«çš„å„ç§é…ç½®æ–‡ä»¶ï¼Œå†å²æ–‡ä»¶çš„ç›®å½•ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains</span></span></code></pre></div><h3 id="åˆ›å»º-openssl-é…ç½®æ–‡ä»¶" tabindex="-1">åˆ›å»º OpenSSL é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#åˆ›å»º-openssl-é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;åˆ›å»º OpenSSL é…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><p>åœ¨è¿™ä¸ªæ–°åˆ›å»ºçš„ <code>intermediates/domains</code> ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„ OpenSSL é…ç½®æ–‡ä»¶ <code>intermediates/domains/self_openssl.cnf</code> æ¥é…ç½®ä¸­é—´ CA æœ¬èº«çš„å…ƒæ•°æ®ä¿¡æ¯ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/self_openssl.cnf</span></span></code></pre></div><p>ç„¶åå¡«å……ä¸‹é¢çš„å†…å®¹</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[req]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">distinguished_name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> req_distinguished_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[req_distinguished_name]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># é…ç½®åŸºç¡€ä¿¡æ¯çš„æç¤ºï¼Œè¿™ä¸ªä¸è¦åˆ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">countryName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> å›½å®¶ä»£å·ï¼ˆä¸¤ä½å­—æ¯ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">stateOrProvinceName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> å·/çœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">localityName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">           =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> å¸‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">0.organizationName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">     =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> ç»„ç»‡åç§°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">organizationalUnitName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> éƒ¨é—¨åç§°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">commonName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">             =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> ä¸­é—´ CA åç§°</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># é…ç½®é»˜è®¤å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">countryName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> CN</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">stateOrProvinceName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> Shanghai</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">localityName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">           =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> Shanghai</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">0.organizationName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">     =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> Ayaka Home Domains</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">organizationalUnitName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> Ayaka Home Domains</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">commonName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">             =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> Ayaka Home Domains Intermediate CA v1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># åˆ›å»ºè¯ä¹¦çš„æ—¶å€™éœ€è¦æ¿€æ´»çš„æ‰©å±•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[v3_intermediate_ca]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">subjectKeyIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> hash</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">authorityKeyIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> keyid:always,issuer</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œ pathlen å†™äº† 0 æ˜¯å› ä¸ºè¿™ä¸ªä¸­é—´è¯ä¹¦ä¸“é—¨ä¸ºäº†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">basicConstraints</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> critical, CA:true, pathlen:0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">keyUsage</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> critical, digitalSignature, cRLSign, keyCertSign</span></span></code></pre></div><h3 id="åˆ›å»ºåˆ›å»ºè¯ä¹¦éœ€è¦çš„ç›®å½•" tabindex="-1">åˆ›å»ºåˆ›å»ºè¯ä¹¦éœ€è¦çš„ç›®å½• <a class="header-anchor" href="#åˆ›å»ºåˆ›å»ºè¯ä¹¦éœ€è¦çš„ç›®å½•" aria-label="Permalink to &quot;åˆ›å»ºåˆ›å»ºè¯ä¹¦éœ€è¦çš„ç›®å½•&quot;">â€‹</a></h3><p>æˆ‘ä»¬åœ¨ <code>intermediates/domains/self_openssl.cnf</code> çš„è¿™ä¸ª OpenSSL é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„ç›®å½•æ˜¯éœ€è¦é¢„å…ˆåˆ›å»ºå’Œå‡†å¤‡å¥½çš„ï¼š</p><ol><li><code>private</code>ï¼šç”¨äºå­˜å‚¨ Intermediate CAï¼ˆä¸­é—´è¯ä¹¦ï¼‰çš„ç§é’¥çš„ç›®å½•</li><li><code>certs</code>ï¼šç”¨äºå­˜å‚¨ Intermediate CAï¼ˆä¸­é—´è¯ä¹¦ï¼‰çš„ç›®å½•</li><li><code>csr</code>ï¼šç”¨äºå­˜å‚¨æˆ‘ä»¬åˆ›å»ºçš„ CSRï¼ˆè¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶ï¼‰</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/private</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/certs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/csr</span></span></code></pre></div><h3 id="åˆ›å»ºå’Œç”³è¯·ä¸­é—´-ca" tabindex="-1">åˆ›å»ºå’Œç”³è¯·ä¸­é—´ CA <a class="header-anchor" href="#åˆ›å»ºå’Œç”³è¯·ä¸­é—´-ca" aria-label="Permalink to &quot;åˆ›å»ºå’Œç”³è¯·ä¸­é—´ CA&quot;">â€‹</a></h3><h4 id="åˆ›å»ºç§é’¥" tabindex="-1">åˆ›å»ºç§é’¥ <a class="header-anchor" href="#åˆ›å»ºç§é’¥" aria-label="Permalink to &quot;åˆ›å»ºç§é’¥&quot;">â€‹</a></h4><div class="warning custom-block github-alert"><p class="custom-block-title">å…³äºä¸ºä»€ä¹ˆæ–‡ä»¶å‘½ååç¼€å¸¦æœ‰æ—¥æœŸï¼Œä»¥åŠ PKI å’Œç‰ˆæœ¬æ§åˆ¶</p><p>ç”±äºä¸€èˆ¬ç§é’¥æ˜¯ä¸çº³å…¥ç‰ˆæœ¬æ§åˆ¶çš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æœ¬åœ°åŒæ—¶æ‹¥æœ‰å’Œéœ€è¦ç®¡ç†å¤šä¸ªç§é’¥ï¼Œç”šè‡³æ˜¯åœ¨ä¸´æ—¶çš„éƒ¨ç½²ä¸­éœ€è¦æ“ä½œè¿™äº›ç§é’¥çš„æ—¶å€™ï¼Œå¦‚æœåªä½¿ç”¨ä¸€ä¸ª <code>intermediate.key.pem</code> ä½œä¸ºå‘½åçš„è¯å¯èƒ½ä¹‹åéœ€è¦æ¶‰åŠåˆ°æ¥å›é‡å‘½åæ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨ä¸‹é¢çš„å‘½ä»¤ä¸­ï¼Œæˆ‘ä¼šåå¥½äºåœ¨åç¼€ä¸­æˆ–è€…åœ¨æ–‡ä»¶å¤¹ä¸­åŠ å…¥ä¸€ä¸ªå¹´ä»½å’Œæœˆä»½æ¥æç¤ºå¼€å‘è€…å’Œç®¡ç†è€…æ“ä½œçš„ç›®æ ‡ key å’Œè¯ä¹¦æ˜¯ä»€ä¹ˆæ—¶å€™ç”Ÿæˆçš„ã€‚</p></div><p>ä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆä¸€ä¸ªæ–°çš„ç§é’¥ï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-zHEqV" id="tab-7wx-iLw" checked><label for="tab-7wx-iLw">ä½¿ç”¨ RSA ç®—æ³•</label><input type="radio" name="group-zHEqV" id="tab-i1DNI_O"><label for="tab-i1DNI_O">ä½¿ç”¨ Secp256k1 ç®—æ³•</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> genrsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4096</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/private/intermediate.202309.key.pem</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ecparam</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -genkey</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> secp256k1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/private/intermediate.202309.key.pem</span></span></code></pre></div></div></div><h4 id="åˆ›å»º-csr-è¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶" tabindex="-1">åˆ›å»º CSRï¼ˆè¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶ï¼‰ <a class="header-anchor" href="#åˆ›å»º-csr-è¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶" aria-label="Permalink to &quot;åˆ›å»º CSRï¼ˆè¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶ï¼‰&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> req</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -new</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/self_openssl.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -key</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/private/intermediate.202309.key.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/csr/intermediate.202309.csr</span></span></code></pre></div><h4 id="ä½¿ç”¨-root-ca-æ ¹æ®-csr-ç­¾å‘è¯ä¹¦" tabindex="-1">ä½¿ç”¨ Root CA æ ¹æ® CSR ç­¾å‘è¯ä¹¦ <a class="header-anchor" href="#ä½¿ç”¨-root-ca-æ ¹æ®-csr-ç­¾å‘è¯ä¹¦" aria-label="Permalink to &quot;ä½¿ç”¨ Root CA æ ¹æ® CSR ç­¾å‘è¯ä¹¦&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> home_ca.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extensions</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v3_intermediate_ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3650</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -notext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -md</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/csr/intermediate.202309.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/certs/intermediate.202309.crt</span></span></code></pre></div><p>ç»“æœï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> home_ca.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extensions</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v3_intermediate_ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3650</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -notext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -md</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/csr/intermediate.202309.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/certs/intermediate.202309.crt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Using</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> home_ca.cnf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Check</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> that</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> request</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> matches</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> signature</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Signature</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ok</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">The</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Subject</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Distinguished</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> follows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">countryName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">           :PRINTABLE:&#39;CN&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">stateOrProvinceName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   :ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;Shanghai&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">localityName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          :ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;Shanghai&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">organizationName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      :ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;Ayaka Home Domains&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">organizationalUnitName:ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;Ayaka Home Domains&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">commonName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            :ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;Ayaka Home Domains Intermediate CA v1&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">emailAddress</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          :IA5STRING:&#39;neko@ayaka.moe&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Certificate</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> certified</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> until</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Sep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 25</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 13:44:32</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2033</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> GMT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (3650 </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">days</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Sign</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> certificate?</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [y/n]:y</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> certificate</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> requests</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> certified,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> commit?</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [y/n]y</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Write</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> database</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> entries</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Data</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Base</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Updated</span></span></code></pre></div><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬çš„ä¸­é—´ CA è¯ä¹¦å°±è¢«åˆ›å»ºå¥½äº†ï¼Œå¦‚æœä½ å‰å¾€ Root CA çš„ <code>database</code> å­—æ®µä¸­æŒ‡å‘çš„æ–‡ä»¶ï¼ˆæˆ‘è¿™é‡Œæ˜¯ <code>/opt/certs/home/index.txt</code>ï¼‰ä¸­æŸ¥çœ‹ï¼Œä¼šå‘ç°æ–°å¢äº†ä¸€æ¡ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>V	330925162823Z		1010	unknown	/C=CN/ST=Shanghai/L=Shanghai/O=Ayaka Home Domains/OU=Ayaka Home Domains/CN=Ayaka Home Domains Intermediate CA v1/emailAddress=neko@ayaka.moe</span></span></code></pre></div><p>è¿™ä¸ª <code>1009</code> çš„æ•°å­—å°±æ˜¯æˆ‘ä»¬è¯ä¹¦çš„åºåˆ—å·äº†ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ Root CA çš„ <code>serial</code> å­—æ®µæ‰€æŒ‡å‘çš„æ–‡ä»¶ï¼ˆæˆ‘è¿™é‡Œæ˜¯ <code>/opt/certs/home/serial</code>ï¼‰æ–‡ä»¶ä¸­æŸ¥çœ‹ï¼Œå®ƒä¼šå˜æˆä¸‹ä¸€ä¸ªè¯ä¹¦åº”è¯¥ä½¿ç”¨çš„åºåˆ—å·ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>1010</span></span></code></pre></div><p>è¿™ä¸ªæ—¶å€™å¦‚æœä½ ä¸å¯ç”¨ç‰ˆæœ¬æ§åˆ¶çš„è¯ï¼Œå°±å¯ä»¥å¼€å§‹è¿›è¡Œåç»­çš„æ“ä½œäº†ã€‚å¦‚æœä½ å¯ç”¨äº†ç‰ˆæœ¬æ§åˆ¶ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æŠŠï¼š</p><ul><li><code>self_openssl.cnf</code></li><li>ç”Ÿæˆçš„è¯ä¹¦ç­¾åè¯·æ±‚</li><li>ç­¾å‘çš„æ–°è¯ä¹¦</li><li>Root CA é™„å±çš„ <code>database</code> å¯¹åº”çš„ <code>index.txt</code>ï¼Œ<code>index.txt.attr</code> å’Œ <code>index.txt.old</code></li><li><code>serial</code> å¯¹åº”çš„ <code>serial</code>ï¼Œ<code>serial.old</code></li></ul><p>ç­‰ä»¥ä¸Šæ–‡ä»¶éƒ½å®‰å…¨åœ°æ·»åŠ åˆ°æš‚å­˜ä¸­ï¼Œç„¶åæäº¤åˆ°è‡ªå·±å¯ä¿¡çš„ Repository å°†ä»–ä»¬å­˜æ”¾èµ·æ¥æ–¹ä¾¿ä¹‹åæˆ‘ä»¬å‚è€ƒå’Œè¿›è¡Œå®¡è®¡ã€‚</p><h2 id="é…ç½®" tabindex="-1">é…ç½® <a class="header-anchor" href="#é…ç½®" aria-label="Permalink to &quot;é…ç½®&quot;">â€‹</a></h2><h3 id="åˆ›å»ºé…ç½®æ–‡ä»¶" tabindex="-1">åˆ›å»ºé…ç½®æ–‡ä»¶ <a class="header-anchor" href="#åˆ›å»ºé…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;åˆ›å»ºé…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><p>æˆ‘ä»¬å¯ä»¥åœ¨å…ˆå‰æ–°åˆ›å»ºçš„ <code>intermediates/domains</code> ä¸‹åˆ›å»ºä¸€ä¸ªç”¨äºä¸­é—´ CA åˆ›å»ºè¯ä¹¦çš„æ—¶å€™ä½¿ç”¨çš„æ–°çš„ OpenSSL é…ç½®æ–‡ä»¶ <code>intermediates/domains/issuer_openssl.cnf</code></p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[ ca ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># \`man ca\`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">default_ca</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> CA_default</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[CA_default]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># dir è¿™ä¸ªå­—æ®µè¿™é‡Œæ”¹æˆä¸­é—´ CA æ‰€æ”¶å½•çš„ç›®å½•æ‰€åœ¨çš„ä½ç½®å“¦</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># æˆ‘è¿™é‡Œå› ä¸ºæ˜¯ä¸“é—¨ç»™åŸŸåç›¸å…³çš„æ“ä½œå•å¼€äº†ä¸€ä¸ªä¸­é—´ CA æ‰€ä»¥å¼€äº†ä¸€ä¸ª domains</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># çš„ç›®å½•æ”¾åœ¨ intermediates ä¸‹é¢æ–¹ä¾¿æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">dir</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">             =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> ./intermediates/domains</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">private_key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">     =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> $dir/private/intermediate.202309.key.pem </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># è¿™ä¸ªæ–‡ä»¶åæ³¨æ„è¦å’Œæˆ‘ä»¬åˆ›å»ºçš„å¿…é¡»ä¸€è‡´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">certificate</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">     =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> $dir/certs/intermediate.202309.crt </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ä¸­é—´çš„æ—¶é—´æ³¨æ„å’Œæˆ‘ä»¬åˆ›å»ºçš„å¿…é¡»ä¸€è‡´</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># å› ä¸ºè¿™ä¸ªæ–‡ä»¶æ˜¯éšç€æ—¶é—´ä¸æ–­æ–°å¢å’Œé…ç½®çš„ï¼Œç†è®ºä¸Šè¦ä¹ˆçº³å…¥åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œè¦ä¹ˆ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ä¸Šä¼ å’ŒåŒæ­¥åˆ° OSS æ˜¯æœ€å¥½çš„ï¼Œæ–¹ä¾¿åˆ†å‘åˆ°ç»ˆç«¯å¹¶æ–¹ä¾¿ç»ˆç«¯ç½‘å…³å’Œè®¾å¤‡è¿›è¡Œé‰´æƒæ§åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">crl</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">             =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> $dir/crl/intermediate.crl</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> $dir/index.txt</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new_certs_dir</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> $dir/domains/certs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">serial</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">          =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> $dir/serial</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">policy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">          =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> policy_intermediate</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># å› ä¸ºæˆ‘ä»¬æ¥ä¸‹æ¥éƒ½ä¼šåœ¨è¯ä¹¦çš„ CSR å½“ä¸­ç›´æ¥åŒ…å«æ‹“å±•ä¿¡æ¯ï¼Œæ¯”å¦‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># subjectAltNameï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦æŒ‡æ˜æˆ‘ä»¬éœ€è¦å°†æ‹“å±•å¤åˆ¶åˆ°ç­¾å‘</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># çš„è¯ä¹¦ä¸­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">copy_extensions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> copy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># é…ç½®ä¸€ä¸‹ä¸­é—´ CA ä¹‹ä¸‹çš„ç­–ç•¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[policy_intermediate]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">countryName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">             =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> optional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">stateOrProvinceName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">     =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> optional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">localityName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> optional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">organizationName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> optional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">organizationalUnitName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> optional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">commonName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">              =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> supplied</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">emailAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> optional</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># æœåŠ¡ç«¯è¯ä¹¦ï¼ˆHTTPS è¯ä¹¦ï¼ŒmTLS æœåŠ¡ç«¯ä¾§è¯ä¹¦ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[server_cert_ext]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">authorityKeyIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> keyid,issuer:always</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">basicConstraints</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">       =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> CA:FALSE</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">keyUsage</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">               =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> critical, digitalSignature, keyEncipherment</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">extendedKeyUsage</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">       =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> serverAuth </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># å¦‚æœä¸éœ€è¦ mTLS çš„è¯å¯ä»¥æ³¨é‡Šæ‰è¿™è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">nsCertType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">             =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> server </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># å¦‚æœä¸éœ€è¦ mTLS çš„è¯å¯ä»¥æ³¨é‡Šæ‰è¿™è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">subjectKeyIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> hash</span></span></code></pre></div><h3 id="åˆ›å»ºé…ç½®æ–‡ä»¶ä¸­å…³è”çš„å…¶ä»–ç›®å½•" tabindex="-1">åˆ›å»ºé…ç½®æ–‡ä»¶ä¸­å…³è”çš„å…¶ä»–ç›®å½• <a class="header-anchor" href="#åˆ›å»ºé…ç½®æ–‡ä»¶ä¸­å…³è”çš„å…¶ä»–ç›®å½•" aria-label="Permalink to &quot;åˆ›å»ºé…ç½®æ–‡ä»¶ä¸­å…³è”çš„å…¶ä»–ç›®å½•&quot;">â€‹</a></h3><p>æˆ‘ä»¬åœ¨ <code>intermediates/domains/issuer_openssl.cnf</code> çš„è¿™ä¸ª OpenSSL é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„ç›®å½•æ˜¯éœ€è¦é¢„å…ˆåˆ›å»ºå’Œå‡†å¤‡å¥½çš„ï¼š</p><ol><li><code>domains</code>ï¼šæ–°çš„åŸŸåè¯ä¹¦å°†ä¼šè¢«å­˜æ”¾çš„ç›®å½•ï¼ˆå› ä¸ºæˆ‘è¿™é‡Œæ˜¯ä»¥åŸŸåä¸šåŠ¡ä½œä¸ºä¾‹å­å˜›æ‰€ä»¥è¿™é‡Œä½ å¯ä»¥æ”¹æˆè‡ªå·±éœ€è¦çš„ç›®å½•åç§°ï¼Œä¿æŒå’Œ <code>intermediates/domains/self_openssl.cnf</code> ä¸­çš„ <code>newcerts</code> é…ç½®é¡¹ä¸€è‡´å°±å¥½äº†ï¼‰</li><li><code>crl</code>ï¼šç”¨äºå­˜å‚¨ CRLï¼ˆè¯ä¹¦åŠé”€åˆ—è¡¨ï¼‰æ–‡ä»¶çš„ç›®å½•</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/crl</span></span></code></pre></div><h3 id="åˆå§‹åŒ–ç›¸å…³æ–‡ä»¶" tabindex="-1">åˆå§‹åŒ–ç›¸å…³æ–‡ä»¶ <a class="header-anchor" href="#åˆå§‹åŒ–ç›¸å…³æ–‡ä»¶" aria-label="Permalink to &quot;åˆå§‹åŒ–ç›¸å…³æ–‡ä»¶&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/index.txt</span></span></code></pre></div><p>å› ä¸ºæˆ‘ä»¬ç­¾ç½²çš„æ˜¯ç›¸åŒ subject å†…å®¹çš„åŸŸåè¯ä¹¦ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨ç­¾ç½²ç”¨çš„ä¸­é—´ CA æ‰€åœ¨çš„ç›®å½•ä¸‹åˆ›å»º <code>index.txt.attr</code> æ–‡ä»¶å¹¶æ·»åŠ  <code>unique_subject = no</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;unique_subject = no&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/index.txt.attr</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/serial</span></span></code></pre></div><h2 id="ä½¿ç”¨" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨" aria-label="Permalink to &quot;ä½¿ç”¨&quot;">â€‹</a></h2><h3 id="ç­¾å‘åŸŸåå’Œæ³›åŸŸåè¯ä¹¦" tabindex="-1">ç­¾å‘åŸŸåå’Œæ³›åŸŸåè¯ä¹¦ <a class="header-anchor" href="#ç­¾å‘åŸŸåå’Œæ³›åŸŸåè¯ä¹¦" aria-label="Permalink to &quot;ç­¾å‘åŸŸåå’Œæ³›åŸŸåè¯ä¹¦&quot;">â€‹</a></h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»™ <code>ihome.cat</code> åˆ›å»ºåŸŸåè¯ä¹¦å§ã€‚</p><h4 id="å‡†å¤‡åŸŸåç›®å½•" tabindex="-1">å‡†å¤‡åŸŸåç›®å½• <a class="header-anchor" href="#å‡†å¤‡åŸŸåç›®å½•" aria-label="Permalink to &quot;å‡†å¤‡åŸŸåç›®å½•&quot;">â€‹</a></h4><p>åŸŸåéœ€è¦æ–¹ä¾¿æˆ‘ä»¬é’ˆå¯¹æ–‡ä»¶å¤¹è¿›è¡Œæ‰“åŒ…å’Œéƒ¨ç½²ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ 2023 ä½œä¸ºç›®å½•åç§°è€Œä¸æ˜¯åƒä¹‹å‰ä¸€æ ·ä½¿ç”¨æ—¶é—´åç¼€ä½œä¸ºæ–‡ä»¶åçš„ä¸€éƒ¨åˆ†ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023</span></span></code></pre></div><h4 id="åˆ›å»ºç›®æ ‡ç»ˆç«¯è¯ä¹¦çš„ç§é’¥" tabindex="-1">åˆ›å»ºç›®æ ‡ç»ˆç«¯è¯ä¹¦çš„ç§é’¥ <a class="header-anchor" href="#åˆ›å»ºç›®æ ‡ç»ˆç«¯è¯ä¹¦çš„ç§é’¥" aria-label="Permalink to &quot;åˆ›å»ºç›®æ ‡ç»ˆç«¯è¯ä¹¦çš„ç§é’¥&quot;">â€‹</a></h4><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-8IXDG" id="tab-rc39t3M" checked><label for="tab-rc39t3M">ä½¿ç”¨ RSA ç®—æ³•</label><input type="radio" name="group-8IXDG" id="tab-vJiFw0m"><label for="tab-vJiFw0m">ä½¿ç”¨ Secp256k1 ç®—æ³•</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> genrsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4096</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.key.pem</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ecparam</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -genkey</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> secp256k1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.key.pem</span></span></code></pre></div></div></div><h4 id="åˆ›å»ºåŸŸåè¯ä¹¦çš„-csr-è¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶" tabindex="-1">åˆ›å»ºåŸŸåè¯ä¹¦çš„ CSRï¼ˆè¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶ï¼‰ <a class="header-anchor" href="#åˆ›å»ºåŸŸåè¯ä¹¦çš„-csr-è¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶" aria-label="Permalink to &quot;åˆ›å»ºåŸŸåè¯ä¹¦çš„ CSRï¼ˆè¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶ï¼‰&quot;">â€‹</a></h4><p>åˆ›å»ºä¸€ä¸ªåŸŸåä¸“å±çš„é…ç½®æ–‡ä»¶ <code>intermediates/domains/domains/ihome.cat/ihome.cat.cnf</code>ï¼š</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[req]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">req_extensions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">     =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> v3_req</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">distinguished_name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> req_distinguished_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[req_distinguished_name]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># é…ç½®åŸºç¡€ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">countryName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> å›½å®¶ä»£å·ï¼ˆä¸¤ä½å­—æ¯ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">stateOrProvinceName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> å·/çœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">localityName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">           =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> å¸‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">0.organizationName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">     =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> ç»„ç»‡åç§°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">organizationalUnitName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> éƒ¨é—¨åç§°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">commonName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">             =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> åŸŸå</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">emailAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">           =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> è”ç³»é‚®ç®±</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># é…ç½®é»˜è®¤å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">countryName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> CN</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">stateOrProvinceName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> Shanghai</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">localityName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">           =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> Shanghai</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">0.organizationName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">     =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> Ayaka Home Domains</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">organizationalUnitName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> Ayaka Home Domains</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">commonName_default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">             =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> ihome.cat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[v3_req]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">subjectAltName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> @alt_names</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[alt_names]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DNS.1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> *.ihome.cat</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DNS.2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> ihome.cat</span></span></code></pre></div><p>ç„¶åæ­é… <code>-noout</code> å’Œ <code>-text</code> å‚æ•°é¢„è§ˆä¸€ä¸‹ CSR æ–‡ä»¶å§ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> req</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -new</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/ihome.cat.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -key</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.key.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extensions</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v3_req</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -noout</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -text</span></span></code></pre></div><p>å¦‚æœæ²¡é—®é¢˜äº†å°±å¯ä»¥ç»§ç»­åˆ›å»ºäº†ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> req</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -new</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/ihome.cat.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -key</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.key.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extensions</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v3_req</span></span></code></pre></div><h4 id="ç­¾å‘åŸŸåè¯ä¹¦" tabindex="-1">ç­¾å‘åŸŸåè¯ä¹¦ <a class="header-anchor" href="#ç­¾å‘åŸŸåè¯ä¹¦" aria-label="Permalink to &quot;ç­¾å‘åŸŸåè¯ä¹¦&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 365</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -notext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -md</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/issuer_openssl.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extensions</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> server_cert_ext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -verbose</span></span></code></pre></div><h4 id="æŸ¥çœ‹åŸŸåè¯ä¹¦" tabindex="-1">æŸ¥çœ‹åŸŸåè¯ä¹¦ <a class="header-anchor" href="#æŸ¥çœ‹åŸŸåè¯ä¹¦" aria-label="Permalink to &quot;æŸ¥çœ‹åŸŸåè¯ä¹¦&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -noout</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -text</span></span></code></pre></div><h4 id="æ‰“åŒ…ä¸º-p12" tabindex="-1">æ‰“åŒ…ä¸º P12 <a class="header-anchor" href="#æ‰“åŒ…ä¸º-p12" aria-label="Permalink to &quot;æ‰“åŒ…ä¸º P12&quot;">â€‹</a></h4><p>å¦‚æœä½ è¿˜éœ€è¦åœ¨ Windows ä¸Šéƒ¨ç½²çš„è¯ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ—¶å€™æ‰“åŒ…ä¸º p12 è¯ä¹¦ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pkcs12</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -export</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -inkey</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.key.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -certfile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/certs/intermediate.202309.bundle.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.p12</span></span></code></pre></div><h2 id="é—®é¢˜æ’æŸ¥" tabindex="-1">é—®é¢˜æ’æŸ¥ <a class="header-anchor" href="#é—®é¢˜æ’æŸ¥" aria-label="Permalink to &quot;é—®é¢˜æ’æŸ¥&quot;">â€‹</a></h2><h3 id="variable-lookup-failed-for-ca-default-ca" tabindex="-1"><code>variable lookup failed for ca::default_ca</code> <a class="header-anchor" href="#variable-lookup-failed-for-ca-default-ca" aria-label="Permalink to &quot;\`variable lookup failed for ca::default_ca\`&quot;">â€‹</a></h3><p>å®Œæ•´è¾“å‡ºï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 375</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -notext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -md</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/ihome.cat.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extensions</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> server_cert_ext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.crt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Using</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/ihome.cat.cnf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">variable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lookup</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca::default_ca</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">8493538816:error:0EFFF06C:configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> routines:CRYPTO_internal:no</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> value:/AppleInternal/Library/BuildRoots/c2cb9645-dafc-11ed-aa26-6ec1e3b3f7b3/Library/Caches/com.apple.xbs/Sources/libressl/libressl-3.3/crypto/conf/conf_lib.c:322:group=ca</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> name=default_ca</span></span></code></pre></div><p>æ˜¯ä¸æ˜¯é…ç½®é”™æ–‡ä»¶äº†ï¼Œç­¾å‘è¯ä¹¦çš„æ—¶å€™éœ€è¦çš„æ˜¯ä¸­é—´ CA æˆ–è€… Root CA çš„é…ç½®æ–‡ä»¶ï¼Œä¸æ˜¯åŸŸåçš„é…ç½®æ–‡ä»¶ã€‚</p><h3 id="wrong-number-of-fields-on-line-1" tabindex="-1"><code>wrong number of fields on line 1</code> <a class="header-anchor" href="#wrong-number-of-fields-on-line-1" aria-label="Permalink to &quot;\`wrong number of fields on line 1\`&quot;">â€‹</a></h3><p>å®Œæ•´è¾“å‡ºï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 375</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -notext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -md</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/issuer_openssl.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extensions</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> server_cert_ext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.crt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Using</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> home_ca.cnf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wrong</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> fields</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> line</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (looking </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> field</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 6,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> got</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> left</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>æ˜¯ä¸æ˜¯ä¿®æ”¹äº† <code>database.txt</code> ä¹‹åå‡ºç°å¤šè¡Œå°‘è¡Œæˆ–è€… Tabï¼Ÿ<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h3 id="txt-db-error-number-2" tabindex="-1"><code>TXT_DB error number 2</code> <a class="header-anchor" href="#txt-db-error-number-2" aria-label="Permalink to &quot;\`TXT_DB error number 2\`&quot;">â€‹</a></h3><p>å®Œæ•´è¾“å‡ºï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 365</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -notext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -md</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/issuer_openssl.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extensions</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> server_cert_ext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/domains/ihome.cat/2023/ihome.cat.crt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Using</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/domains/issuer_openssl.cnf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Check</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> that</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> request</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> matches</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> signature</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Signature</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ok</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">The</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Subject</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Distinguished</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> follows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">countryName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">           :PRINTABLE:&#39;CN&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">stateOrProvinceName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   :ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;Shanghai&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">localityName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          :ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;Shanghai&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">organizationName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      :ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;Ayaka Home Domains&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">organizationalUnitName:ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;Ayaka Home Domains&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">commonName</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            :ASN.1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12:&#39;ihome.cat&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">emailAddress</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          :IA5STRING:&#39;neko@ayaka.moe&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Certificate</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> certified</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> until</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Sep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 28</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 04:51:42</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> GMT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (365 </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">days</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Sign</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> certificate?</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [y/n]:y</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">failed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> database</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">TXT_DB</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> error</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> number</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span></span></code></pre></div><p>å› ä¸ºæˆ‘ä»¬ç­¾ç½²çš„æ˜¯ç›¸åŒ subject å†…å®¹çš„åŸŸåè¯ä¹¦ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨ç­¾ç½²ç”¨çš„ä¸­é—´ CA æ‰€åœ¨çš„ç›®å½•ä¸‹çš„ <code>index.txt.attr</code>ï¼ˆå¦‚æœæ²¡æœ‰çš„è¯ç›´æ¥åˆ›å»ºå°±å¥½äº†ï¼‰ä¸­æ·»åŠ </p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>unique_subject = no</span></span></code></pre></div><p>è¿™æ ·çš„é…ç½®ã€‚</p><h2 id="å»¶ä¼¸é˜…è¯»" tabindex="-1">å»¶ä¼¸é˜…è¯» <a class="header-anchor" href="#å»¶ä¼¸é˜…è¯»" aria-label="Permalink to &quot;å»¶ä¼¸é˜…è¯»&quot;">â€‹</a></h2>`,83),A=s("hr",{class:"footnotes-sep"},null,-1),u={class:"footnotes"},D={class:"footnotes-list"},b={id:"fn1",class:"footnote-item"},f=s("a",{href:"#fnref1",class:"footnote-backref"},"â†©ï¸",-1);function v(E,B,_,S,x,N){const h=t("NolebasePageProperties"),n=t("VPNolebaseInlineLinkPreview"),p=t("NolebaseGitContributors"),k=t("NolebaseGitChangelog");return o(),r("div",null,[g,a(h),s("div",y,[C,s("p",null,[i("æ­£å¦‚"),a(n,{href:"https://www.openssl.org/docs/man1.1.1/man1/ca.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("å®˜æ–¹æ–‡æ¡£")]),_:1}),i("æ‰€è¿°ï¼š")]),m,s("p",null,[i("å¦‚æœä½ å–œæ¬¢çš„è¯ï¼Œä½ å¤§å¯ä»¥ç†è§£ä¸ºè¿™æ˜¯ä¸€ç§ã€Œå¤æ³•æ‰‹æ“ CA å’Œè¯ä¹¦ã€çš„è¡Œä¸ºï¼Œè€Œéç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®çš„è¡Œä¸ºï¼Œè¿™å¾ˆ Geekï¼Œéœ€è¦ä½ äº†è§£ä½ åœ¨åšä»€ä¹ˆã€‚æˆ‘å»ºè®®ä½ åœ¨å­¦ä¹ å’Œå®æ“ä¹‹åå¤šé˜…è¯»é˜…è¯»"),a(n,{href:"https://www.openssl.org/docs/man1.1.1/man1/ca.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("å®˜æ–¹æ–‡æ¡£")]),_:1}),i("çš„è­¦å‘Šéƒ¨åˆ†ã€‚")])]),F,s("p",null,[a(n,{href:"https://two-oes.medium.com/implementing-mtls-with-apache-and-openssl-on-openshift-31719be13e7a",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("Implementing MTLS with Apache and OpenSSL on OpenShift | by Oren Oichman | Medium")]),_:1})]),s("p",null,[a(n,{href:"https://jamielinux.com/docs/openssl-certificate-authority/create-the-intermediate-pair.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("Create the intermediate pair â€” OpenSSL Certificate Authority â€” Jamie Nguyen")]),_:1})]),s("p",null,[a(n,{href:"https://jamielinux.com/docs/openssl-certificate-authority/appendix/intermediate-configuration-file.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("Intermediate CA configuration file â€” OpenSSL Certificate Authority â€” Jamie Nguyen")]),_:1})]),s("p",null,[a(n,{href:"https://www.openssl.org/docs/man1.1.1/man5/config.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("/docs/man1.1.1/man5/config.html OpenSSL")]),_:1})]),s("p",null,[a(n,{href:"https://www.digitalocean.com/community/tutorials/openssl-essentials-working-with-ssl-certificates-private-keys-and-csrs",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("OpenSSL Essentials: Working with SSL Certificates, Private Keys and CSRs | DigitalOcean")]),_:1})]),s("p",null,[a(n,{href:"https://runsisi.com/2019/12/11/cert/",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("SSL/TLS è‡ªç­¾åè¯ä¹¦")]),_:1})]),s("p",null,[a(n,{href:"https://www.phildev.net/ssl/opensslconf.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("Openssl.conf")]),_:1})]),s("p",null,[a(n,{href:"https://www.phildev.net/ssl/managing_ca.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("Managing a CA")]),_:1})]),a(p),a(k),A,s("section",u,[s("ol",D,[s("li",b,[s("p",null,[a(n,{href:"https://stackoverflow.com/questions/33503190/wrong-number-of-fields-with-openssl",target:"_blank",rel:"noreferrer"},{default:e(()=>[i("indexing - Wrong number of fields with openssl - Stack Overflow")]),_:1}),i(),f])])])])])}const P=d(c,[["render",v]]);export{w as __pageData,P as default};
