import{_ as k,c as o,I as a,j as s,a as i,w as l,au as n,D as t,o as r}from"./chunks/framework.RMxno62p.js";const S=JSON.parse('{"title":"WireGuard æœåŠ¡ç«¯é…ç½®","description":"","frontmatter":{"tags":["è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux/å‘½ä»¤è¡Œ","æ“ä½œç³»ç»Ÿ/Linux","è®¡ç®—æœº/ç½‘ç»œ/WireGuard","è®¡ç®—æœº/ç½‘ç»œ/VPN","è®¡ç®—æœº/ç½‘ç»œ/VPN/WireGuard","æ“ä½œç³»ç»Ÿ/macOS","å‘½ä»¤è¡Œ/vim","å‘½ä»¤è¡Œ/mkdir","å‘½ä»¤è¡Œ/ip","å‘½ä»¤è¡Œ/sysctl","è¿ç»´/å†…æ ¸","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux/å†…æ ¸","è¿ç»´/ç½‘ç»œ","è¿ç»´","è®¡ç®—æœº/ç½‘ç»œ/ç»„ç½‘","å‘½ä»¤è¡Œ/chmod","è®¡ç®—æœº/ç½‘ç»œ/åè®®/UDP"]},"headers":[],"relativePath":"ç¬”è®°/ğŸ› ï¸ å¼€å‘/ğŸ•¸ ç½‘ç»œ/WireGuard VPN/WireGuard æœåŠ¡ç«¯é…ç½®.md","filePath":"ç¬”è®°/ğŸ› ï¸ å¼€å‘/ğŸ•¸ ç½‘ç»œ/WireGuard VPN/WireGuard æœåŠ¡ç«¯é…ç½®.md"}'),c={name:"ç¬”è®°/ğŸ› ï¸ å¼€å‘/ğŸ•¸ ç½‘ç»œ/WireGuard VPN/WireGuard æœåŠ¡ç«¯é…ç½®.md"},g=s("h1",{id:"wireguard-æœåŠ¡ç«¯é…ç½®",tabindex:"-1"},[i("WireGuard æœåŠ¡ç«¯é…ç½® "),s("a",{class:"header-anchor",href:"#wireguard-æœåŠ¡ç«¯é…ç½®","aria-label":'Permalink to "WireGuard æœåŠ¡ç«¯é…ç½®"'},"â€‹")],-1),u=n(`<h2 id="å…ˆå†³æ¡ä»¶" tabindex="-1">å…ˆå†³æ¡ä»¶ <a class="header-anchor" href="#å…ˆå†³æ¡ä»¶" aria-label="Permalink to &quot;å…ˆå†³æ¡ä»¶&quot;">â€‹</a></h2><h3 id="é…ç½®-ipv4-è½¬å‘" tabindex="-1">é…ç½® IPv4 è½¬å‘ <a class="header-anchor" href="#é…ç½®-ipv4-è½¬å‘" aria-label="Permalink to &quot;é…ç½® IPv4 è½¬å‘&quot;">â€‹</a></h3><p>è¦ä½¿ NAT æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å¯ç”¨ IP è½¬å‘ï¼š è¯¥å‘½ä»¤é…ç½®ç³»ç»Ÿé€‰é¡¹ <code>net.ipv4.ip_forward</code> å€¼ä¸º <code>1</code>ï¼Œè¡¨ç¤ºå¼€å¯ IPv4 åè®®ä¸‹ IP è½¬å‘</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-f1VOu" id="tab-7FDLCAL" checked><label for="tab-7FDLCAL">ä»¥é root ç”¨æˆ·æ‰§è¡Œ</label><input type="radio" name="group-f1VOu" id="tab-6yCFr15"><label for="tab-6yCFr15">ä»¥ root ç”¨æˆ·æ‰§è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> net.ipv4.ip_forward=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> net.ipv4.ip_forward=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span></span></code></pre></div></div></div><h3 id="åˆ›å»ºå¿…è¦çš„é…ç½®ç›®å½•" tabindex="-1">åˆ›å»ºå¿…è¦çš„é…ç½®ç›®å½• <a class="header-anchor" href="#åˆ›å»ºå¿…è¦çš„é…ç½®ç›®å½•" aria-label="Permalink to &quot;åˆ›å»ºå¿…è¦çš„é…ç½®ç›®å½•&quot;">â€‹</a></h3><p>WireGuard çš„é…ç½®ç›®å½•ä¸€èˆ¬åœ¨ <code>/etc/wireguard</code>ï¼Œä½†æ˜¯ä¸åŒçš„ç³»ç»Ÿä¹Ÿä¼šæœ‰ä¸åŒçš„è·¯å¾„ï¼š</p><h4 id="linux" tabindex="-1">Linux <a class="header-anchor" href="#linux" aria-label="Permalink to &quot;Linux&quot;">â€‹</a></h4><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-5VB8z" id="tab-oqUOHxT" checked><label for="tab-oqUOHxT">ä»¥é root ç”¨æˆ·æ‰§è¡Œ</label><input type="radio" name="group-5VB8z" id="tab-4JKZ_dw"><label for="tab-4JKZ_dw">ä»¥ root ç”¨æˆ·æ‰§è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard</span></span></code></pre></div></div></div><h4 id="macos" tabindex="-1">macOS <a class="header-anchor" href="#macos" aria-label="Permalink to &quot;macOS&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/local/etc/wireguard</span></span></code></pre></div><h4 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">â€‹</a></h4><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>âš ï¸ è¯¥æ–‡æ¡£å°šæœªå®Œæˆï¼Œä»åœ¨ç¼–å†™ä¸­...</p></div><h2 id="é…ç½®" tabindex="-1">é…ç½® <a class="header-anchor" href="#é…ç½®" aria-label="Permalink to &quot;é…ç½®&quot;">â€‹</a></h2><h3 id="åˆ›å»ºå…¬ç§å¯†é’¥å¯¹" tabindex="-1">åˆ›å»ºå…¬ç§å¯†é’¥å¯¹ <a class="header-anchor" href="#åˆ›å»ºå…¬ç§å¯†é’¥å¯¹" aria-label="Permalink to &quot;åˆ›å»ºå…¬ç§å¯†é’¥å¯¹&quot;">â€‹</a></h3><h4 id="linux-1" tabindex="-1">Linux <a class="header-anchor" href="#linux-1" aria-label="Permalink to &quot;Linux&quot;">â€‹</a></h4><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-l77P9" id="tab-lmutStT" checked><label for="tab-lmutStT">ä»¥é root ç”¨æˆ·æ‰§è¡Œ</label><input type="radio" name="group-l77P9" id="tab-Zh5sQ8Z"><label for="tab-Zh5sQ8Z">ä»¥ root ç”¨æˆ·æ‰§è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> genkey</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard/privatekey</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> wg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pubkey</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard/publickey</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> genkey</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard/privatekey</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> wg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pubkey</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard/publickey</span></span></code></pre></div></div></div><h4 id="macos-1" tabindex="-1">macOS <a class="header-anchor" href="#macos-1" aria-label="Permalink to &quot;macOS&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> genkey</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/local/etc/wireguard/privatekey</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> wg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pubkey</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/local/etc/wireguard/publickey</span></span></code></pre></div><h4 id="windows-1" tabindex="-1">Windows <a class="header-anchor" href="#windows-1" aria-label="Permalink to &quot;Windows&quot;">â€‹</a></h4><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>âš ï¸ è¯¥æ–‡æ¡£å°šæœªå®Œæˆï¼Œä»åœ¨ç¼–å†™ä¸­...</p></div><h3 id="åˆ›å»ºä¸€ä¸ªæ–°çš„-wireguard-ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶" tabindex="-1">åˆ›å»ºä¸€ä¸ªæ–°çš„ WireGuard ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªæ–°çš„-wireguard-ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;åˆ›å»ºä¸€ä¸ªæ–°çš„ WireGuard ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><h4 id="åˆ›å»ºé…ç½®æ–‡ä»¶" tabindex="-1">åˆ›å»ºé…ç½®æ–‡ä»¶ <a class="header-anchor" href="#åˆ›å»ºé…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;åˆ›å»ºé…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p>WireGuard çš„ VPN ç½‘ç»œéƒ½æ˜¯é€šè¿‡è‡ªè¡Œé…ç½®ç½‘ç»œæ¥å£å¹¶è‡ªåŠ¨è¿æ¥å®ç°çš„ï¼Œç½‘ç»œæ¥å£ä¸­è®¾å®šäº†è¯¸å¦‚æˆ‘ä»¬çš„ IPã€DNSã€ç›‘å¬ç«¯å£ç­‰ç­‰çš„å‚æ•°ï¼Œè¿™äº›å­—æ®µå’Œå¸¸è§„çš„ç½‘ç»œæ¥å£é…ç½®å‡ ä¹æ˜¯ä¸€è‡´çš„ã€‚ ä¸€èˆ¬æˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ª WireGuard ç½‘ç»œæ¥å£ç§°ä¹‹ä¸º <code>wg0</code>ï¼Œæ¥è‡ª WireGuard çš„ç¼©å†™ <code>wg</code> å’Œæ•°å­— <code>0</code>ï¼Œè¡¨ç¤ºï¼šç¬¬ 0 ä½ WireGuard ç½‘ç»œè®¾å¤‡ã€‚ ä½¿ç”¨ Vim ç¼–è¾‘å™¨åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ WireGuard ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶ <code>wg0.conf</code> åˆ° <code>/etc/wireguard</code>ç›®å½•ä¸‹ï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-2NrcW" id="tab-GPvxmME" checked><label for="tab-GPvxmME">ä»¥é root ç”¨æˆ·æ‰§è¡Œ</label><input type="radio" name="group-2NrcW" id="tab-ql68tIy"><label for="tab-ql68tIy">ä»¥ root ç”¨æˆ·æ‰§è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard/wg0.conf</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard/wg0.conf</span></span></code></pre></div></div></div><h4 id="å¡«å†™é…ç½®æ–‡ä»¶" tabindex="-1">å¡«å†™é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#å¡«å†™é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;å¡«å†™é…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p>å†™å…¥æ¥å£é…ç½®ä¿¡æ¯ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[Interface]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Address</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10.0.0.1/24</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">SaveConfig</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ListenPort</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 51820</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">PrivateKey</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> SERVER_PRIVATE_KEY</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># å¦‚æœæ²¡æœ‰å¯ç”¨ firewalld é˜²ç«å¢™æœåŠ¡ï¼Œå¯ä»¥çœç•¥ä¸‹é¢ä¸¤è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">PostUp</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --add-port</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 51820/udp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --add-masquerade</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">PostDown</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --remove-port</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 51820/udp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --remove-masquerade</span></span></code></pre></div><p>è¯¥æ¥å£å¯ä»¥å‘½åä¸ºä»»æ„åç§°ï¼Œä½†å»ºè®®ä½¿ç”¨è¯¸å¦‚include <code>wg0</code>æˆ–<code>wgvpn0</code>ä¹‹ç±»çš„åç§°ã€‚ ç½‘ç»œæ¥å£ <strong><code>[Interface]</code></strong> éƒ¨åˆ†ä¸­çš„è®¾ç½®å…·æœ‰ä»¥ä¸‹å«ä¹‰ï¼š</p>`,28),y=s("strong",null,"Address",-1),F=s("code",null,"wg0",-1),b=s("li",null,[s("strong",null,"ListenPort"),i(": åœ¨å…¶ä¸Šä½¿ç”¨çš„ç«¯å£ WireGuard å°†æ¥å—ä¼ å…¥çš„è¿æ¥ã€‚")],-1),C=s("strong",null,"PrivateKey",-1),v=s("code",null,"wg genkey",-1),m=s("code",null,"sudo cat /etc/wireguard/privatekey",-1),A=n("<li><strong>SaveConfig</strong>: è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œå…³é—­æ¥å£æ—¶çš„å½“å‰çŠ¶æ€ä¿å­˜åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚</li><li><strong>ï¼ˆå¯é€‰ï¼‰PostUp</strong>: ï¼ˆå¯é€‰ï¼Œå°¤å…¶æ˜¯åœ¨é˜²ç«å¢™æœåŠ¡ä¸å¯åŠ¨çš„æ—¶å€™ï¼‰åœ¨å¯åŠ¨ç½‘ç»œæ¥å£ <strong><code>[Interface]</code></strong> ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>firewall-cmd</code> æ‰“å¼€ WireGuard ç«¯å£å¹¶å¯ç”¨ä¼ªè£…ã€‚</li><li><strong>ï¼ˆå¯é€‰ï¼‰PostDown</strong>: ï¼ˆå¯é€‰ï¼Œå°¤å…¶æ˜¯åœ¨é˜²ç«å¢™æœåŠ¡ä¸å¯åŠ¨çš„æ—¶å€™ï¼‰åœ¨å…³é—­æ¥å£ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬ï¼Œè¿™å°†å…è®¸æµé‡ç¦»å¼€æœåŠ¡å™¨ï¼Œä»è€Œä½¿VPNå®¢æˆ·ç«¯å¯ä»¥è®¿é—®äº’è”ç½‘ã€‚ç½‘ç»œæ¥å£ <strong><code>[Interface]</code></strong> å…³é—­åï¼Œé˜²ç«å¢™è§„åˆ™å°†è¢«åˆ é™¤ã€‚</li>",3),w=s("h4",{id:"è°ƒæ•´é…ç½®æ–‡ä»¶æƒé™",tabindex:"-1"},[i("è°ƒæ•´é…ç½®æ–‡ä»¶æƒé™ "),s("a",{class:"header-anchor",href:"#è°ƒæ•´é…ç½®æ–‡ä»¶æƒé™","aria-label":'Permalink to "è°ƒæ•´é…ç½®æ–‡ä»¶æƒé™"'},"â€‹")],-1),f=s("code",null,"wg0.conf",-1),_=s("code",null,"privatekey",-1),P=s("code",null,"chmod",-1),E=s("code",null,"600",-1),x=n(`<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-hyw1Y" id="tab-1eyHWfv" checked><label for="tab-1eyHWfv">ä»¥é root ç”¨æˆ·æ‰§è¡Œ</label><input type="radio" name="group-hyw1Y" id="tab-t1Db7c-"><label for="tab-t1Db7c-">ä»¥ root ç”¨æˆ·æ‰§è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 600</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard/{privatekey,wg0.conf}</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 600</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/wireguard/{privatekey,wg0.conf}</span></span></code></pre></div></div></div><h3 id="æµ‹è¯•é…ç½®" tabindex="-1">æµ‹è¯•é…ç½® <a class="header-anchor" href="#æµ‹è¯•é…ç½®" aria-label="Permalink to &quot;æµ‹è¯•é…ç½®&quot;">â€‹</a></h3><p>ä½¿ç”¨ <code>wg-quick</code> å‘½ä»¤å¿«é€Ÿå°†æˆ‘ä»¬åˆšåˆšé…ç½®å¥½çš„ <code>wg0</code> æ¥å£è®¾å®šä¸ºã€Œå¯ç”¨ã€ï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-ePOYl" id="tab-Wup7gob" checked><label for="tab-Wup7gob">ä»¥é root ç”¨æˆ·æ‰§è¡Œ</label><input type="radio" name="group-ePOYl" id="tab-HCxHhw5"><label for="tab-HCxHhw5">ä»¥ root ç”¨æˆ·æ‰§è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg-quick</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wg-quick</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0</span></span></code></pre></div></div></div><p>è¯¥å‘½ä»¤å°†è¾“å‡ºä»¥ä¸‹å†…å®¹ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg-quick</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[#] ip link add wg0 type wireguard</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[#] wg setconf wg0 /dev/fd/63</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[#] ip -4 address add 10.0.0.1/24 dev wg0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[#] ip link set mtu 1420 up dev wg0</span></span></code></pre></div><p>è¦æŸ¥çœ‹æ¥å£çŠ¶æ€å’Œé…ç½®ï¼Œè¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-oIIEV" id="tab-8N3UhpK" checked><label for="tab-8N3UhpK">ä»¥é root ç”¨æˆ·æ‰§è¡Œ</label><input type="radio" name="group-oIIEV" id="tab-BVjTYUC"><label for="tab-BVjTYUC">ä»¥ root ç”¨æˆ·æ‰§è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0</span></span></code></pre></div></div></div><p>æ‰§è¡Œæ•ˆæœï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">interface:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  public</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> key:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> My3uqg8LL9S3XZBo8alclOjiNkp+T6GfxS+Xhn5a40I=</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  private</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> key:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (hidden)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  listening</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> port:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 51820</span></span></code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>ip</code> å‘½ä»¤æ¥éªŒè¯æ¥å£çŠ¶æ€ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ip</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">4:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0:</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">POINTOPOINT,NOARP,UP,LOWER_U</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">P</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mtu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1420</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> qdisc</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> noqueue</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> UNKNOWN</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> group</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> qlen</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    link/none</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    inet</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10.0.0.1/24</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       valid_lft</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> forever</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> preferred_lft</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> forever</span></span></code></pre></div><h3 id="æ¿€æ´»å¼€æœºè‡ªå¯" tabindex="-1">æ¿€æ´»å¼€æœºè‡ªå¯ <a class="header-anchor" href="#æ¿€æ´»å¼€æœºè‡ªå¯" aria-label="Permalink to &quot;æ¿€æ´»å¼€æœºè‡ªå¯&quot;">â€‹</a></h3><p>è¦åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å¯ç”¨ <code>wg0</code> ç½‘ç»œæ¥å£ <strong><code>[Interface]</code></strong>ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-HOAZD" id="tab-dYCFbVq" checked><label for="tab-dYCFbVq">ä»¥é root ç”¨æˆ·æ‰§è¡Œ</label><input type="radio" name="group-HOAZD" id="tab-D6z1k_O"><label for="tab-D6z1k_O">ä»¥ root ç”¨æˆ·æ‰§è¡Œ</label></div><div class="blocks"><div class="language-shell vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg-quick@wg0</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wg-quick@wg0</span></span></code></pre></div></div></div><h2 id="é”™è¯¯æ’æŸ¥" tabindex="-1">é”™è¯¯æ’æŸ¥ <a class="header-anchor" href="#é”™è¯¯æ’æŸ¥" aria-label="Permalink to &quot;é”™è¯¯æ’æŸ¥&quot;">â€‹</a></h2><h3 id="usr-bin-wg-quick-line-32-resolvconf-command-not-found" tabindex="-1"><code>/usr/bin/wg-quick: line 32: resolvconf: command not found</code> <a class="header-anchor" href="#usr-bin-wg-quick-line-32-resolvconf-command-not-found" aria-label="Permalink to &quot;\`/usr/bin/wg-quick: line 32: resolvconf: command not found\`&quot;">â€‹</a></h3><p>Debian 11 å¦‚æœåœ¨ä½¿ç”¨ <code>wg-quick up &lt;interface&gt;</code> çš„æ—¶å€™é­é‡ä»¥ä¸‹é”™è¯¯ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/usr/bin/wg-quick:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> line</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 32:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> resolvconf:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> found</span></span></code></pre></div><p>å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ä¿®å¤ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> openresolv</span></span></code></pre></div><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h2>`,22),B=s("code",null,"/usr/bin/wg-quick: line 31: resolvconf: command not found",-1);function q(D,I,N,W,G,V){const h=t("NolebasePageProperties"),e=t("VPNolebaseInlineLinkPreview"),p=t("NolebaseGitContributors"),d=t("NolebaseGitChangelog");return r(),o("div",null,[g,a(h),u,s("ol",null,[s("li",null,[y,i(": "),F,i("æ¥å£çš„ IPv4 æˆ– IPv6 åœ°å€çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚ä½¿ç”¨ä¿ç•™ç»™ä¸“ç”¨ç½‘ç»œçš„èŒƒå›´å†…çš„ IPï¼ˆ10.0.0.0/8ï¼ˆåŒ…å« 10.0.0.0 åˆ° 10.255.255.255ï¼‰ã€172.16.0.0/12ï¼ˆåŒ…å« 172.16.0.0 åˆ° 172.15.255.255ï¼‰æˆ– 192.168.0.0/16ï¼ˆåŒ…å« 192.168.0.0 åˆ° 192.168.255.255ï¼‰è¿™æ ·çš„ IP æ ¼å¼æ˜¯ä»€ä¹ˆæ ·çš„å«ä¹‰å¯ä»¥å‚è€ƒ "),a(e,{href:"./../IP åé¢çš„æ–œæ æ˜¯ä»€ä¹ˆï¼Ÿ.html"},{default:l(()=>[i("IP åé¢çš„æ–œæ æ˜¯ä»€ä¹ˆï¼Ÿ")]),_:1}),i("ï¼‰")]),b,s("li",null,[C,i(": ç”±"),v,i("å‘½ä»¤ç”Ÿæˆçš„ç§é’¥ã€‚ ï¼ˆä½¿ç”¨ "),a(e,{href:"./../../../ğŸ“Ÿ ç»ˆç«¯/Linux å‘½ä»¤/æ–‡æ¡£è¯»å†™/cat è¾“å‡ºæ–‡ä»¶.html"},{default:l(()=>[i("cat è¾“å‡ºæ–‡ä»¶")]),_:1}),i(" å‘½ä»¤è·å–ç§é’¥æ–‡ä»¶çš„å†…å®¹ï¼š"),m,i("ï¼‰")]),A]),w,s("p",null,[f,i("å’Œ"),_,i("æ–‡ä»¶å¯¹æ™®é€šç”¨æˆ·ä¸å¯è¯»ã€‚ ä½¿ç”¨ "),P,i(" ï¼ˆå‚è€ƒ "),a(e,{href:"./../../../ğŸ“Ÿ ç»ˆç«¯/Linux å‘½ä»¤/æƒé™ç®¡ç†/chmod å˜æ›´æƒé™.html"},{default:l(()=>[i("chmod å˜æ›´æƒé™")]),_:1}),i("ï¼‰å°†æƒé™è®¾ç½®ä¸º"),E,i("ï¼š")]),x,s("ul",null,[s("li",null,[a(e,{href:"https://superuser.com/a/1546280",target:"_blank",rel:"noreferrer"},{default:l(()=>[B,i(" [WireGuard | Debian] - Super User")]),_:1})]),s("li",null,[a(e,{href:"https://github.com/StreisandEffect/streisand/issues/1434#issuecomment-417792239",target:"_blank",rel:"noreferrer"},{default:l(()=>[i("Issue connecting to Wireguard Linux ubuntu 18.04 Â· Issue #1434 Â· StreisandEffect/streisand")]),_:1})])]),a(p),a(d)])}const O=k(c,[["render",q]]);export{S as __pageData,O as default};
