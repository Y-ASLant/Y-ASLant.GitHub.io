import{_ as p,c as d,I as s,j as a,a as h,w as r,au as t,D as i,o as g}from"./chunks/framework.RMxno62p.js";const v=JSON.parse('{"title":"OpenSSL é€šè¿‡æŒ‡å®šçš„è¯ä¹¦åŠé”€åˆ—è¡¨æ‰‹åŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§","description":"","frontmatter":{"tags":["å‘½ä»¤è¡Œ/openssl","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/TLS","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/TLS/SSL","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/è¯ä¹¦æœºæ„/CA","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/è¯ä¹¦åŠé”€åˆ—è¡¨","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/è¯ä¹¦åŠé”€åˆ—è¡¨/CRL"]},"headers":[],"relativePath":"ç¬”è®°/ğŸ”’ PKI å…¬é’¥åŸºç¡€è®¾æ–½/TLS ä¼ è¾“å±‚å®‰å…¨/OpenSSL é€šè¿‡æŒ‡å®šçš„è¯ä¹¦åŠé”€åˆ—è¡¨æ‰‹åŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§.md","filePath":"ç¬”è®°/ğŸ”’ PKI å…¬é’¥åŸºç¡€è®¾æ–½/TLS ä¼ è¾“å±‚å®‰å…¨/OpenSSL é€šè¿‡æŒ‡å®šçš„è¯ä¹¦åŠé”€åˆ—è¡¨æ‰‹åŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§.md"}'),o={name:"ç¬”è®°/ğŸ”’ PKI å…¬é’¥åŸºç¡€è®¾æ–½/TLS ä¼ è¾“å±‚å®‰å…¨/OpenSSL é€šè¿‡æŒ‡å®šçš„è¯ä¹¦åŠé”€åˆ—è¡¨æ‰‹åŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§.md"},C=a("h1",{id:"openssl-é€šè¿‡æŒ‡å®šçš„è¯ä¹¦åŠé”€åˆ—è¡¨æ‰‹åŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§",tabindex:"-1"},[h("OpenSSL é€šè¿‡æŒ‡å®šçš„è¯ä¹¦åŠé”€åˆ—è¡¨æ‰‹åŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§ "),a("a",{class:"header-anchor",href:"#openssl-é€šè¿‡æŒ‡å®šçš„è¯ä¹¦åŠé”€åˆ—è¡¨æ‰‹åŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§","aria-label":'Permalink to "OpenSSL é€šè¿‡æŒ‡å®šçš„è¯ä¹¦åŠé”€åˆ—è¡¨æ‰‹åŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§"'},"â€‹")],-1),c=t('<h5 id="æ–‡æ¡£ç‰ˆæœ¬" tabindex="-1">æ–‡æ¡£ç‰ˆæœ¬ <a class="header-anchor" href="#æ–‡æ¡£ç‰ˆæœ¬" aria-label="Permalink to &quot;æ–‡æ¡£ç‰ˆæœ¬&quot;">â€‹</a></h5><table tabindex="0"><thead><tr><th>ç¼–è¾‘è€…</th><th>ç‰ˆæœ¬</th><th>å˜æ›´æ—¥æœŸ</th><th>å˜æ›´è¯´æ˜</th></tr></thead><tbody><tr><td>Neko</td><td>v1.0.0</td><td>2021-12-02</td><td></td></tr></tbody></table><h3 id="æ–‡æ¡£å…¼å®¹æ€§" tabindex="-1">æ–‡æ¡£å…¼å®¹æ€§ <a class="header-anchor" href="#æ–‡æ¡£å…¼å®¹æ€§" aria-label="Permalink to &quot;æ–‡æ¡£å…¼å®¹æ€§&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>ä¸»ä½“</th><th>ç‰ˆæœ¬å·</th><th>æ–‡æ¡£åœ°å€ï¼ˆå¦‚æœæœ‰ï¼‰</th></tr></thead><tbody><tr><td>OpenSSL</td><td>LibreSSL 2.8.3</td><td>æ— </td></tr></tbody></table>',4),y=t(`<h2 id="éªŒè¯æ­¥éª¤" tabindex="-1">éªŒè¯æ­¥éª¤ <a class="header-anchor" href="#éªŒè¯æ­¥éª¤" aria-label="Permalink to &quot;éªŒè¯æ­¥éª¤&quot;">â€‹</a></h2><h3 id="è·å–ç½‘ç«™çš„-https-ssl-è¯ä¹¦" tabindex="-1">è·å–ç½‘ç«™çš„ HTTPS SSL è¯ä¹¦ <a class="header-anchor" href="#è·å–ç½‘ç«™çš„-https-ssl-è¯ä¹¦" aria-label="Permalink to &quot;è·å–ç½‘ç«™çš„ HTTPS SSL è¯ä¹¦&quot;">â€‹</a></h3><p>è¯¥æ­¥éª¤é€šè¿‡ <code>openssl</code> å‘½ä»¤å’Œ <code>wikipedia.org:443</code> åˆ›å»ºäº†ä¸€ä¸ªè¿æ¥ï¼Œå¹¶ä¸”æŠŠè¯ä¹¦æ–‡ä»¶è¾“å‡ºåˆ°åä¸º <code>wikipedia.pem</code> çš„æ–‡ä»¶ä¸­</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> s_client</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -connect</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wikipedia.org:443</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /dev/null</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;/-----BEGIN/,/-----END/p&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wikipedia.pem</span></span></code></pre></div><h3 id="è·å–ä¸Šä¸€æ­¥è·å–è¯ä¹¦æ‰€å…³è”çš„-crl-æ–‡ä»¶çš„-url" tabindex="-1">è·å–ä¸Šä¸€æ­¥è·å–è¯ä¹¦æ‰€å…³è”çš„ CRL æ–‡ä»¶çš„ URL <a class="header-anchor" href="#è·å–ä¸Šä¸€æ­¥è·å–è¯ä¹¦æ‰€å…³è”çš„-crl-æ–‡ä»¶çš„-url" aria-label="Permalink to &quot;è·å–ä¸Šä¸€æ­¥è·å–è¯ä¹¦æ‰€å…³è”çš„ CRL æ–‡ä»¶çš„ URL&quot;">â€‹</a></h3><p>è¯¥æ­¥éª¤é€šè¿‡ <code>openssl</code> å‘½ä»¤è¯»å–ä¸Šä¸€æ­¥ä¸­è·å–çš„ <code>wikipedia.pem</code> æ–‡ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨ <code>grep</code> å‘½ä»¤æŸ¥æ‰¾äº† <code>X509v3 CRL Distribution Points</code> å­—æ®µï¼Œæ‰“å°å®ƒæ‰€ç›¸å…³çš„ 4 è¡Œå†…çš„å€¼</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -noout</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -text</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wikipedia.pem</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;X509v3 CRL Distribution Points&#39;</span></span></code></pre></div><p>ç¤ºä¾‹è¾“å‡º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">X509v3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CRL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Distribution</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Points:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    Full</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      URI:http://crl.globalsign.com/gs/gsorganizationvalsha2g2.crl</span></span></code></pre></div><h3 id="é€šè¿‡-crl-æ–‡ä»¶çš„-url-è·å–-crl-æ–‡ä»¶" tabindex="-1">é€šè¿‡ CRL æ–‡ä»¶çš„ URL è·å– CRL æ–‡ä»¶ <a class="header-anchor" href="#é€šè¿‡-crl-æ–‡ä»¶çš„-url-è·å–-crl-æ–‡ä»¶" aria-label="Permalink to &quot;é€šè¿‡ CRL æ–‡ä»¶çš„ URL è·å– CRL æ–‡ä»¶&quot;">â€‹</a></h3><p>è¯¥æ­¥éª¤é€šè¿‡ <code>wget</code> å‘½ä»¤é€šè¿‡ä¸Šä¸€æ­¥è·å–çš„ URL ä¸‹è½½äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”ä¿å­˜ä¸º <code>crl.der</code>ï¼ˆ<code>.der</code> æ‹“å±•åè¡¨ç¤ºè¯¥æ–‡ä»¶ä½¿ç”¨ DER ç¼–ç ï¼‰</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl.der</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> http://crl.globalsign.com/gs/gsorganizationvalsha2g2.crl</span></span></code></pre></div><h3 id="è½¬æ¢ä¸‹è½½çš„-crl-æ–‡ä»¶ç¼–ç æ ¼å¼ä¸º-pem" tabindex="-1">è½¬æ¢ä¸‹è½½çš„ CRL æ–‡ä»¶ç¼–ç æ ¼å¼ä¸º PEM <a class="header-anchor" href="#è½¬æ¢ä¸‹è½½çš„-crl-æ–‡ä»¶ç¼–ç æ ¼å¼ä¸º-pem" aria-label="Permalink to &quot;è½¬æ¢ä¸‹è½½çš„ CRL æ–‡ä»¶ç¼–ç æ ¼å¼ä¸º PEM&quot;">â€‹</a></h3><p>æ‰‹åŠ¨ä¸‹è½½çš„ CRL è¯ä¹¦åŠé”€åˆ—è¡¨æ–‡ä»¶ä½¿ç”¨ DER ç¼–ç ï¼Œéœ€è¦é¢„å…ˆè½¬æ¢ä¸ºç»Ÿä¸€çš„ PEM æ ¼å¼ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -inform</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DER</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">CRL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> æ–‡ä»¶è·¯</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">å¾„</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">è½¬æ¢åçš„</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CRL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> æ–‡ä»¶è·¯å¾„ï¼ˆä½¿ç”¨</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pem</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ä½œä¸ºæ‹“å±•å</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">ï¼‰</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -outform</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> PEM</span></span></code></pre></div><p>æ­¤å¤„å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æŠŠä¸Šä¸€æ­¥çš„ CRL æ–‡ä»¶è½¬æ¢ä¸º PEM ç¼–ç ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -inform</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DER</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl.der</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -outform</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> PEM</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl.pem</span></span></code></pre></div><h3 id="è·å–ç½‘ç«™-https-ssl-çš„è¯ä¹¦é“¾" tabindex="-1">è·å–ç½‘ç«™ HTTPS SSL çš„è¯ä¹¦é“¾ <a class="header-anchor" href="#è·å–ç½‘ç«™-https-ssl-çš„è¯ä¹¦é“¾" aria-label="Permalink to &quot;è·å–ç½‘ç«™ HTTPS SSL çš„è¯ä¹¦é“¾&quot;">â€‹</a></h3><p>HTTPS ä½¿ç”¨çš„ SSL è¯ä¹¦é€šå¸¸ç”±è¯ä¹¦é¢å‘æœºæ„é¢å‘ï¼Œæœ‰çš„è¯ä¹¦åŸºç¡€è®¾æ–½å¯èƒ½è¿˜ä¼šä½¿ç”¨ã€ä¸­é—´è¯ä¹¦é¢å‘æœºæ„ã€æ¥è¾…åŠ©ç®¡ç†è¯ä¹¦çš„é¢å‘å’ŒåŠé”€è¿‡ç¨‹ï¼Œæ­¤å¤„æˆ‘ä»¬éœ€è¦äº†è§£ç½‘ç«™çš„ HTTPS SSL è¯ä¹¦éƒ½åŒ…å«äº†å“ªäº›è¯ä¹¦é“¾ï¼ˆå³å¯èƒ½çš„ä¸Šæ¸¸è¯ä¹¦é¢å‘æœºæ„ï¼Œå¯èƒ½æœ‰ä¸€ä¸ªæˆ–æ˜¯æ›´å¤šä¸ªï¼‰</p><p>è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥è·å¾—è¯ä¹¦é“¾çš„æ–‡ä»¶ <code>chain.pem</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">OLDIFS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$IFS</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">IFS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> certificates</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> s_client</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -connect</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ç½‘ç«™åŸŸ</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">å</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">HTTPS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> æœåŠ¡æ‰€åœ¨çš„ç«¯</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">å£</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -showcerts</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -tlsextdebug</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -tls1</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/dev/null</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;/-----BEGIN/,/-----END/ {/-----BEGIN/ s/^/:/; p}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> certificate</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">certificates</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">#:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">do</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $certificate</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> tee</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> chain.pem</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">done</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">IFS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$OLDIFS</span></span></code></pre></div><p>æ­¤å¤„å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è·å¾—è¯ä¹¦é“¾çš„æ–‡ä»¶ <code>chain.pem</code>ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">OLDIFS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$IFS</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">IFS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> certificates</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> s_client</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -connect</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wikipedia.org:443</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -showcerts</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -tlsextdebug</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -tls1</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/dev/null</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;/-----BEGIN/,/-----END/ {/-----BEGIN/ s/^/:/; p}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> certificate</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">certificates</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">#:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">do</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $certificate</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> tee</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> chain.pem</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">done</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">IFS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$OLDIFS</span></span></code></pre></div><p>åœ¨è¯¥è¯ä¹¦ä¸­ï¼Œä¼šåŒ…å«ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ä¸Šæ¸¸çš„è¯ä¹¦é¢å‘æœºæ„çš„è¯ä¹¦ä¿¡æ¯ï¼Œä»¥åŠè¿™äº›è¯ä¹¦çš„å…¬é’¥æ–‡ä»¶ã€‚</p><h3 id="æŠŠ-pem-ç¼–ç çš„è¯ä¹¦é“¾æ–‡ä»¶å’Œ-pem-ç¼–ç çš„-crl-è¯ä¹¦åŠé”€åˆ—è¡¨-æ–‡ä»¶æ‹¼æ¥åˆ°ä¸€èµ·" tabindex="-1">æŠŠ PEM ç¼–ç çš„è¯ä¹¦é“¾æ–‡ä»¶å’Œ PEM ç¼–ç çš„ CRLï¼ˆè¯ä¹¦åŠé”€åˆ—è¡¨ï¼‰æ–‡ä»¶æ‹¼æ¥åˆ°ä¸€èµ· <a class="header-anchor" href="#æŠŠ-pem-ç¼–ç çš„è¯ä¹¦é“¾æ–‡ä»¶å’Œ-pem-ç¼–ç çš„-crl-è¯ä¹¦åŠé”€åˆ—è¡¨-æ–‡ä»¶æ‹¼æ¥åˆ°ä¸€èµ·" aria-label="Permalink to &quot;æŠŠ PEM ç¼–ç çš„è¯ä¹¦é“¾æ–‡ä»¶å’Œ PEM ç¼–ç çš„ CRLï¼ˆè¯ä¹¦åŠé”€åˆ—è¡¨ï¼‰æ–‡ä»¶æ‹¼æ¥åˆ°ä¸€èµ·&quot;">â€‹</a></h3><p>Openssl å‘½ä»¤éœ€è¦å°† PEM æ ¼å¼çš„è¯ä¹¦é“¾å’Œ CRL è¿æ¥åœ¨ä¸€èµ·ä»¥è¿›è¡ŒéªŒè¯ã€‚æ£€æŸ¥è¯ä¹¦æ˜¯å¦æœ‰æ•ˆçš„æ—¶å€™å¯ä»¥çœç•¥ CRL æ–‡ä»¶ï¼Œä½†æ˜¯ CRL æ£€æŸ¥å°†ä¸èµ·ä½œç”¨ï¼Œå®ƒåªä¼šæ ¹æ®è¯ä¹¦é“¾éªŒè¯è¯ä¹¦ï¼ˆæ¯”å¦‚éªŒè¯è¯¥è¯ä¹¦æ˜¯å¦æ˜¯é¢å‘æœºæ„é¢å‘çš„ï¼Œæˆ–æ˜¯æ˜¯å¦è¿˜åœ¨æœ‰æ•ˆæœŸã€æ˜¯å¦è¢«ç¯¡æ”¹ç­‰ï¼‰ã€‚</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> chain.pem</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl.pem</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl_chain.pem</span></span></code></pre></div><h3 id="éªŒè¯" tabindex="-1">éªŒè¯ <a class="header-anchor" href="#éªŒè¯" aria-label="Permalink to &quot;éªŒè¯&quot;">â€‹</a></h3><h4 id="éªŒè¯æœªè¢«åŠé”€çš„è¯ä¹¦" tabindex="-1">éªŒè¯æœªè¢«åŠé”€çš„è¯ä¹¦ <a class="header-anchor" href="#éªŒè¯æœªè¢«åŠé”€çš„è¯ä¹¦" aria-label="Permalink to &quot;éªŒè¯æœªè¢«åŠé”€çš„è¯ä¹¦&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> verify</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -crl_check</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CAfile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl_chain.pem</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wikipedia.pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wikipedia.pem:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> OK</span></span></code></pre></div><p>ä»¥ä¸Šå°±æ˜¯é€šè¿‡çš„æƒ…å†µï¼Œä¼šæ˜¾ç¤º <code>OK</code></p><h4 id="éªŒè¯è¢«åŠé”€çš„è¯ä¹¦" tabindex="-1">éªŒè¯è¢«åŠé”€çš„è¯ä¹¦ <a class="header-anchor" href="#éªŒè¯è¢«åŠé”€çš„è¯ä¹¦" aria-label="Permalink to &quot;éªŒè¯è¢«åŠé”€çš„è¯ä¹¦&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> verify</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -crl_check</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CAfile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl_chain.pem</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> revoked-test.pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">revoked-test.pem:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> OU</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Domain</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Control</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Validated,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> OU</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> PositiveSSL,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CN</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> xs4all.nl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 23</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> at</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> depth</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lookup:certificate</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> revoked</span></span></code></pre></div><p>ä»¥ä¸Šå°±æ˜¯æœªé€šè¿‡çš„æƒ…å†µï¼Œæ˜¾ç¤º <code>certificate revoked</code>ï¼ˆè¯ä¹¦å·²è¢«åŠé”€ï¼‰</p><h2 id="ç‰¹æ®Šæƒ…å†µ" tabindex="-1">ç‰¹æ®Šæƒ…å†µ <a class="header-anchor" href="#ç‰¹æ®Šæƒ…å†µ" aria-label="Permalink to &quot;ç‰¹æ®Šæƒ…å†µ&quot;">â€‹</a></h2><p>æ‰‹åŠ¨ä¸‹è½½çš„ CRL è¯ä¹¦åŠé”€åˆ—è¡¨æ–‡ä»¶ä½¿ç”¨ DER ç¼–ç ï¼Œéœ€è¦é¢„å…ˆè½¬æ¢ä¸ºç»Ÿä¸€çš„ PEM æ ¼å¼ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -inform</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DER</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">CRL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> æ–‡ä»¶è·¯</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">å¾„</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">è½¬æ¢åçš„</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CRL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> æ–‡ä»¶è·¯å¾„ï¼ˆä½¿ç”¨</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pem</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ä½œä¸ºæ‹“å±•å</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">ï¼‰</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -outform</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> PEM</span></span></code></pre></div><p>æ‰‹åŠ¨ä¸‹è½½çš„ CERã€CRT è¯ä¹¦æ–‡ä»¶ä½¿ç”¨ DER ç¼–ç ï¼Œéœ€è¦é¢„å…ˆè½¬æ¢ä¸ºç»Ÿä¸€çš„ PEM æ ¼å¼æ–¹ä¾¿æ“ä½œï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">CER/CRT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> æ–‡ä»¶è·¯</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">å¾„</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -inform</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DER</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">è½¬æ¢åçš„</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CER/CRT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> æ–‡ä»¶è·¯</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">å¾„</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -outform</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> PEM</span></span></code></pre></div>`,39);function F(B,A,D,E,u,b){const l=i("NolebasePageProperties"),e=i("VPNolebaseInlineLinkPreview"),n=i("NolebaseGitContributors"),k=i("NolebaseGitChangelog");return g(),d("div",null,[C,s(l),c,a("p",null,[h("åŸæ–‡ï¼š"),s(e,{href:"https://raymii.org/s/articles/OpenSSL_manually_verify_a_certificate_against_a_CRL.html",target:"_blank",rel:"noreferrer"},{default:r(()=>[h("OpenSSL: é€šè¿‡æŒ‡å®šçš„ CRLï¼ˆè¯ä¹¦åŠé”€åˆ—è¡¨ï¼‰æ‰‹åŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§ - Raymii.org - è‹±æ–‡")]),_:1})]),y,s(n),s(k)])}const _=p(o,[["render",F]]);export{v as __pageData,_ as default};
