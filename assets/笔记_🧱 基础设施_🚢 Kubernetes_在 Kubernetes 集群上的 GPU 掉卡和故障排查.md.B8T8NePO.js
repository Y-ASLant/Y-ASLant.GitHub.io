import{_ as r,c as d,I as a,j as i,a as s,w as h,au as t,D as l,o as g}from"./chunks/framework.RMxno62p.js";const _s=JSON.parse('{"title":"在 Kubernetes 集群上的 GPU 掉卡和故障排查","description":"","frontmatter":{"tags":["AI/硬件/GPU","AI/硬件/GPU/NVIDIA","AI/硬件/GPU/NVIDIA/GPU","运维/云原生/Kubernetes","开发/云原生/Kubernetes","命令行/kubectl","命令行/lshw","命令行/lspci","命令行/dmesg","命令行/dcgmi","命令行/nvidia-smi","AI","基础设施/GPU","基础设施/GPU/DCGM","软件/开源/DCGM","开发/云原生/Kubernetes/GPU-Operator"]},"headers":[],"relativePath":"笔记/🧱 基础设施/🚢 Kubernetes/在 Kubernetes 集群上的 GPU 掉卡和故障排查.md","filePath":"笔记/🧱 基础设施/🚢 Kubernetes/在 Kubernetes 集群上的 GPU 掉卡和故障排查.md"}'),o={name:"笔记/🧱 基础设施/🚢 Kubernetes/在 Kubernetes 集群上的 GPU 掉卡和故障排查.md"},F=i("h1",{id:"在-kubernetes-集群上的-gpu-掉卡和故障排查",tabindex:"-1"},[s("在 Kubernetes 集群上的 GPU 掉卡和故障排查 "),i("a",{class:"header-anchor",href:"#在-kubernetes-集群上的-gpu-掉卡和故障排查","aria-label":'Permalink to "在 Kubernetes 集群上的 GPU 掉卡和故障排查"'},"​")],-1),y=t(`<h2 id="通过-linux-原生的命令进行基础排查" tabindex="-1">通过 Linux 原生的命令进行基础排查 <a class="header-anchor" href="#通过-linux-原生的命令进行基础排查" aria-label="Permalink to &quot;通过 Linux 原生的命令进行基础排查&quot;">​</a></h2><h3 id="检查显示设备列表" tabindex="-1">检查显示设备列表 <a class="header-anchor" href="#检查显示设备列表" aria-label="Permalink to &quot;检查显示设备列表&quot;">​</a></h3><p>首先检查显示类型的硬件设备列表，查看是否有 NVIDIA 相关的显示控制器。</p><p>运行下面的命令就可以打印相关的设备列表：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lshw</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> display</span></span></code></pre></div><details class="details custom-block"><summary>可供参考的返回结果</summary><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  *-display</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       description:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 3D</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> controller</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       product:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       vendor:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       physical</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> id:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       bus</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> info:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pci@0000:18:00.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       version:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       width:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 64</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bits</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       clock:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 33MHz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       capabilities:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msi</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pciexpress</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msix</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bus_master</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cap_list</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       configuration:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> driver=nvidia</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> latency=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       resources:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iomemory:5e00-5dff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iomemory:5a00-59ff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iomemory:5e00-5dff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> irq:16</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:5e042000000-5e042ffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:5a000000000-5bfffffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:5e040000000-5e041ffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:9ed00000-9f4fffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:5c000000000-5dfffffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:5e000000000-5e03fffffff</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  *-display</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       description:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 3D</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> controller</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       product:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       vendor:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       physical</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> id:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       bus</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> info:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pci@0000:2a:00.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       version:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       width:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 64</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bits</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       clock:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 33MHz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       capabilities:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msi</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pciexpress</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msix</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bus_master</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cap_list</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       configuration:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> driver=nvidia</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> latency=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       resources:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iomemory:6e00-6dff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iomemory:6a00-69ff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iomemory:6e00-6dff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> irq:17</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:6e042000000-6e042ffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:6a000000000-6bfffffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:6e040000000-6e041ffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:a8900000-a90fffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:6c000000000-6dfffffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:6e000000000-6e03fffffff</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  *-display</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       description:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 3D</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> controller</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       product:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       vendor:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       physical</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> id:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       bus</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> info:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pci@0000:3a:00.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       version:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       width:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 64</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bits</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       clock:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 33MHz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       capabilities:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msi</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pciexpress</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msix</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bus_master</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cap_list</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       configuration:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> driver=nvidia</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> latency=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       resources:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iomemory:7e00-7dff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iomemory:7a00-79ff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iomemory:7e00-7dff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> irq:16</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:7e042000000-7e042ffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:7a000000000-7bfffffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:7e040000000-7e041ffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:b2500000-b2cfffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:7c000000000-7dfffffffff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> memory:7e000000000-7e03fffffff</span></span></code></pre></div></details><h3 id="检查-pcie-设备列表" tabindex="-1">检查 PCIe 设备列表 <a class="header-anchor" href="#检查-pcie-设备列表" aria-label="Permalink to &quot;检查 PCIe 设备列表&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lspci</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span></span></code></pre></div><details class="details custom-block"><summary>可供参考的返回结果</summary><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">05:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Bridge:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22a3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">a1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">06:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Bridge:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22a3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">a1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">07:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Bridge:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22a3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">a1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">08:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Bridge:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22a3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">a1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">18:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 3D</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2330</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">a1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">2a:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 3D</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2330</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">a1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">3a:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 3D</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2330</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">a1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">5d:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 3D</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Corporation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2330</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (rev </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">a1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div></details><h3 id="检查系统日志" tabindex="-1">检查系统日志 <a class="header-anchor" href="#检查系统日志" aria-label="Permalink to &quot;检查系统日志&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /var/log/syslog</span></span></code></pre></div><p>比较标志性的是这样的错误：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:44</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17256.647980] nvidia-nvswitch: Probing device 0000:08:00.0, Vendor Id = 0x10de, Device Id = 0x22a3, Class = 0x68000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:44</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.307535] nvidia-nvswitch3: using MSI</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.355375] NVRM: The NVIDIA GPU 0000:5d:00.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.355375] NVRM: (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">PCI</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ID:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10de:2330</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) installed in this system has</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.355375] NVRM: fallen off the bus and is not responding to commands.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.355551] nvidia: probe of 0000:5d:00.0 failed with error -1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.418931] NVRM: The NVIDIA probe routine failed </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> device(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.418954] NVRM: loading NVIDIA UNIX x86_64 Kernel Module  525.125.06  Tue May 30 05:11:37 UTC 2023</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.657927] nvidia_uvm: module uses symbols from proprietary module nvidia, inheriting taint.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.701298] nvidia-uvm: Loaded the UVM driver, major device number 502.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.727257] nvidia-modeset: Loading NVIDIA Kernel Mode Setting Driver </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> UNIX platforms  </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">525.125.06</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  Tue May </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 04:58:48 UTC </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2023</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:45</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17257.737241] nvidia 0000:18:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:39:49</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [17261.605632] nvidia 0000:2a:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span></code></pre></div><h3 id="检查-dmesg" tabindex="-1">检查 <code>dmesg</code> <a class="header-anchor" href="#检查-dmesg" aria-label="Permalink to &quot;检查 \`dmesg\`&quot;">​</a></h3><p>可以通过 <code>dmesg</code> 查阅系统日志，看到的日志和 <code>/var/log/syslog</code> 其实是差不多的。</p><p>其中我发现的与 GPU 设备异常的日志有这些：</p><h4 id="gsp-tu10x-bin-failed-with-error-2-错误" tabindex="-1"><code>gsp_tu10x.bin failed with error -2</code> 错误 <a class="header-anchor" href="#gsp-tu10x-bin-failed-with-error-2-错误" aria-label="Permalink to &quot;\`gsp_tu10x.bin failed with error -2\` 错误&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  198.424621] NVRM: loading NVIDIA UNIX x86_64 Kernel Module  525.125.06  Tue May 30 05:11:37 UTC 2023</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  198.661922] nvidia_uvm: module uses symbols from proprietary module nvidia, inheriting taint.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  198.675466] nvidia-uvm: Loaded the UVM driver, major device number 502.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  198.706214] nvidia-modeset: Loading NVIDIA Kernel Mode Setting Driver </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> UNIX platforms  </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">525.125.06</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  Tue May </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 04:58:48 UTC </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2023</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  198.720826] nvidia 0000:18:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  201.873383] nvidia 0000:2a:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  205.250596] nvidia 0000:3a:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  207.914792] nvidia 0000:5d:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  210.474933] nvidia 0000:9a:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  213.527228] nvidia 0000:ab:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  216.375317] nvidia 0000:ba:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[  219.944650] nvidia 0000:db:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span></code></pre></div><h4 id="gpu-has-fallen-off-the-bus-掉卡错误" tabindex="-1"><code>GPU has fallen off the bus.</code> 掉卡错误 <a class="header-anchor" href="#gpu-has-fallen-off-the-bus-掉卡错误" aria-label="Permalink to &quot;\`GPU has fallen off the bus.\` 掉卡错误&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[ 4254.197816] NVRM: GPU at PCI:0000:5d:00: GPU-f1906b9b-557a-e961-045c-9fe4be3ce012</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[ 4254.197854] NVRM: GPU Board Serial Number: 1653923026510</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[ 4254.197860] NVRM: Xid (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">PCI:0000:5d:00</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">): 79, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;&lt;unknown&gt;&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">unknown</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> fallen</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> off</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bus.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[ 4254.197871] NVRM: GPU 0000:5d:00.0: GPU has fallen off the bus.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[ 4254.197878] NVRM: GPU 0000:5d:00.0: GPU serial number is 1653923026510.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[ 4254.197913] NVRM: A GPU crash dump has been created. If possible, please run</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">               NVRM:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-bug-report.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> collect</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> data</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> before</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">               NVRM:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> unloaded.</span></span></code></pre></div><h4 id="fallen-off-the-bus-and-is-not-responding-to-commands-掉卡错误" tabindex="-1"><code>fallen off the bus and is not responding to commands.</code> 掉卡错误 <a class="header-anchor" href="#fallen-off-the-bus-and-is-not-responding-to-commands-掉卡错误" aria-label="Permalink to &quot;\`fallen off the bus and is not responding to commands.\` 掉卡错误&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14387.209961] NVRM: The NVIDIA GPU 0000:5d:00.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">               NVRM:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (PCI </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ID:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10de:2330</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) installed in this system has</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">               NVRM:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> fallen</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> off</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bus</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> responding</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> commands.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14387.210134] nvidia: probe of 0000:5d:00.0 failed with error -1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14387.274303] NVRM: The NVIDIA probe routine failed </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> device(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14387.274366] NVRM: loading NVIDIA UNIX x86_64 Kernel Module  525.125.06  Tue May 30 05:11:37 UTC 2023</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14387.511008] nvidia_uvm: module uses symbols from proprietary module nvidia, inheriting taint.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14387.548839] nvidia-uvm: Loaded the UVM driver, major device number 502.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14387.573380] nvidia-modeset: Loading NVIDIA Kernel Mode Setting Driver </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> UNIX platforms  </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">525.125.06</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  Tue May </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 04:58:48 UTC </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2023</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14387.588055] nvidia 0000:18:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14391.500465] nvidia 0000:2a:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14394.112769] nvidia 0000:3a:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14396.627715] nvidia 0000:9a:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14399.481332] nvidia 0000:ab:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14402.500487] nvidia 0000:ba:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[14405.257198] nvidia 0000:db:00.0: Direct firmware load </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> nvidia/525.125.06/gsp_tu10x.bin failed with error </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-2</span></span></code></pre></div><h2 id="通过-nvidia-的基础设施进行排查" tabindex="-1">通过 NVIDIA 的基础设施进行排查 <a class="header-anchor" href="#通过-nvidia-的基础设施进行排查" aria-label="Permalink to &quot;通过 NVIDIA 的基础设施进行排查&quot;">​</a></h2><h3 id="通过-nvidia-官方脚本收集系统信息并创建报告" tabindex="-1">通过 NVIDIA 官方脚本收集系统信息并创建报告 <a class="header-anchor" href="#通过-nvidia-官方脚本收集系统信息并创建报告" aria-label="Permalink to &quot;通过 NVIDIA 官方脚本收集系统信息并创建报告&quot;">​</a></h3>`,24),C=i("strong",null,[s("在 GPU Operator 安装了的 Kubernetes 集群的场景下，建议运维工程师和 Kubernetes 开发者在任意的安装有 NVIDIA 驱动的节点上运行 "),i("code",null,"/run/nvidia/driver/usr/bin/nvidia-bug-report.sh"),s(" 来实现和执行 "),i("code",null,"nvidia-bug-report.sh"),s(" 脚本来收集系统报告。")],-1),c=i("code",null,"nvidia-bug-report.sh",-1),A=t('<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/run/nvidia/driver/usr/bin/nvidia-bug-report.sh</span></span></code></pre></div>',1),B={class:"info custom-block"},u=i("p",{class:"custom-block-title"},"INFO",-1),D=t(`<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /run/nvidia/driver/usr/bin/nvidia-bug-report.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">nvidia-bug-report.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> now</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> collect</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> information</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> about</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> your</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">system</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;nvidia-bug-report.log.gz&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> current</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">directory.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  It</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> may</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> take</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> several</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> seconds</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  In</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> some</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cases,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> it</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> may</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> hang</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> trying</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> capture</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> data</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> generated</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dynamically</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">by</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> and/or</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> module.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  While</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bug</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> report</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> log</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> incomplete</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> if</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> happens,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> it</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">may</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> still</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> contain</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enough</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> data</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> diagnose</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> problem.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">If</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-bug-report.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> hangs,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> consider</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> running</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --safe-mode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">and</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --extra-system-data</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> line</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> arguments.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Please</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> include</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;nvidia-bug-report.log.gz&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> log</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> when</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reporting</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">your</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bug</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> via</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> forum</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (see </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">forums.developer.nvidia.com</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">or</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sending</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> email</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;linux-bugs@nvidia.com&#39;.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">By</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> delivering</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;nvidia-bug-report.log.gz&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> acknowledge</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">and</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> agree</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> that</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> personal</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> information</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> may</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> inadvertently</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> included</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> in</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> output.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Notwithstanding</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> foregoing,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">output</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> only</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> purpose</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> investigating</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reported</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> issue.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Running</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-bug-report.sh...</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> complete.</span></span></code></pre></div><p>创建之后的系统报告会放在运行的时候的目录下面，可以通过 <code>scp</code> 和 <code>rsync</code> 将系统日志 dump 到可以提交信息的设备上：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -la</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">-rw-r--r--</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   root</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   1333398</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 07:40</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-bug-report.log.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">-rw-r--r--</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   root</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    400236</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10:01</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-bug-report.log.old.gz</span></span></code></pre></div><h3 id="检查-gpu-operator-相关的-pod-是否正常" tabindex="-1">检查 GPU Operator 相关的 Pod 是否正常 <a class="header-anchor" href="#检查-gpu-operator-相关的-pod-是否正常" aria-label="Permalink to &quot;检查 GPU Operator 相关的 Pod 是否正常&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">❯</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pods</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                                                          READY</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      RESTARTS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">nvidia-container-toolkit-daemonset-qv5mk</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                      1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          90m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">nvidia-cuda-validator-d84n9</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                                   0/1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     Completed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          88m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">nvidia-dcgm-exporter-5fr8d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                                    1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          90m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">nvidia-device-plugin-daemonset-dzw2d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                          1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          90m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">nvidia-driver-daemonset-5.15.0-78-generic-ubuntu22.04-hjffw</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          90m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">nvidia-operator-validator-ctx5l</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                               1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          90m</span></span></code></pre></div><h3 id="使用-nvidia-smi-检查是否能读取到设备列表" tabindex="-1">使用 <code>nvidia-smi</code> 检查是否能读取到设备列表 <a class="header-anchor" href="#使用-nvidia-smi-检查是否能读取到设备列表" aria-label="Permalink to &quot;使用 \`nvidia-smi\` 检查是否能读取到设备列表&quot;">​</a></h3><p>对于已经安装了 GPU Operator 的集群，可以通过 GPU Operator 下属的 <code>dcgm-exporter</code> Pod 资源内置的 <code>nvidia-smi</code> 来尝试列出所有的 GPU 信息。</p>`,7),b={class:"tip custom-block"},m=t('<p class="custom-block-title">如何进入 DCGM Pod？</p><p>运行下面的命令就可以进入到正在运行的 Pod 了：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">DCGM</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Pod</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 的</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div><p>以上面 <code>kubectl get pods</code> 的返回结果为例，可以这样运行</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter-5fr8d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div>',5),f=i("code",null,"kubectl",-1),_=i("code",null,"docker",-1),v=t(`<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">root@nvidia-dcgm-exporter-4f599:/#</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-smi</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Thu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 02:14:12</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2024</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+---------------------------------------------------------------------------------------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> NVIDIA-SMI</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 530.30.02</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">              Driver</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Version:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 530.30.02</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    CUDA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Version:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 12.2</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">     |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">-----------------------------------------+----------------------+----------------------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                  Persistence-M</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Bus-Id</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        Disp.A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Volatile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Uncorr.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ECC</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Fan</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Temp</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Perf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            Pwr:Usage/Cap</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">         Memory-Usage</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> GPU-Util</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Compute</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> M.</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                         |</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">               MIG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> M.</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">=========================================+======================+======================</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> GeForce</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> RTX</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3090</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">         On</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 00000000:1B:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Off</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  N/A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 33%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   29C</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    P8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               22W</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 350W</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      1MiB</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 24576MiB</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      0%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      Default</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                         |</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  N/A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+-----------------------------------------+----------------------+----------------------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> GeForce</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> RTX</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3090</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">         On</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 00000000:1C:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Off</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  N/A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 33%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   27C</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    P8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               23W</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 350W</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      1MiB</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 24576MiB</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      0%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      Default</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                         |</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  N/A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+-----------------------------------------+----------------------+----------------------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> GeForce</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> RTX</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3090</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">         On</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 00000000:1D:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Off</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  N/A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 33%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   28C</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    P8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               21W</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 350W</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      1MiB</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 24576MiB</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      0%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      Default</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                         |</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  N/A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+-----------------------------------------+----------------------+----------------------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> GeForce</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> RTX</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3090</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">         On</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 00000000:1E:00.0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Off</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  N/A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 33%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   29C</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    P8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               25W</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 350W</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      1MiB</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 24576MiB</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      0%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      Default</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                         |</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  N/A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+-----------------------------------------+----------------------+----------------------+</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+---------------------------------------------------------------------------------------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Processes:</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                                                            |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   GI</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   CI</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        PID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   Type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   Process</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                            GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        ID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   ID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                                                             Usage</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">      |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">=======================================================================================</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+---------------------------------------------------------------------------------------+</span></span></code></pre></div><h3 id="通过直接访问-dcgm-exporter-的-prometheus-指标接口获取-gpu-指标" tabindex="-1">通过直接访问 <code>dcgm-exporter</code> 的 Prometheus 指标接口获取 GPU 指标 <a class="header-anchor" href="#通过直接访问-dcgm-exporter-的-prometheus-指标接口获取-gpu-指标" aria-label="Permalink to &quot;通过直接访问 \`dcgm-exporter\` 的 Prometheus 指标接口获取 GPU 指标&quot;">​</a></h3><p>对于已经安装了 GPU Operator 的集群，可以通过 GPU Operator 下属的 <code>dcgm-exporter</code> Pod 资源内置的 <code>nvidia-smi</code> 来尝试列出所有的 GPU 信息。</p><p>在容器内部可以执行 <code>curl localhost:9400/metrics</code> 获得 GPU的 metrics 数据。</p>`,4),E={class:"tip custom-block"},I=t('<p class="custom-block-title">如何进入 DCGM Pod？</p><p>运行下面的命令就可以进入到正在运行的 Pod 了：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">DCGM</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Pod</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 的</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div><p>以上面 <code>kubectl get pods</code> 的返回结果为例，可以这样运行</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter-5fr8d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div>',5),P=i("code",null,"kubectl",-1),x=i("code",null,"docker",-1),T=i("h3",{id:"通过-dcgmi-discovery-检查是否能探测到-gpu-设备",tabindex:"-1"},[s("通过 "),i("code",null,"dcgmi discovery"),s(" 检查是否能探测到 GPU 设备 "),i("a",{class:"header-anchor",href:"#通过-dcgmi-discovery-检查是否能探测到-gpu-设备","aria-label":'Permalink to "通过 `dcgmi discovery` 检查是否能探测到 GPU 设备"'},"​")],-1),G=i("p",null,[s("对于已经安装了 GPU Operator 的集群，可以通过 GPU Operator 下属的 "),i("code",null,"dcgm-exporter"),s(" Pod 资源内置的 "),i("code",null,"dcgmi"),s("（对 DCGM API 的本地封装的 CLI 版本）的命令对 GPU 进行故障排查。")],-1),V={class:"tip custom-block"},N=t('<p class="custom-block-title">如何进入 DCGM Pod？</p><p>运行下面的命令就可以进入到正在运行的 Pod 了：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">DCGM</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Pod</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 的</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div><p>以上面 <code>kubectl get pods</code> 的返回结果为例，可以这样运行</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter-5fr8d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div>',5),U=i("code",null,"kubectl",-1),M=i("code",null,"docker",-1),w=i("code",null,"dcgmi discovery",-1),S=i("code",null,"nv-hostengine",-1),R=i("code",null,"nv-hostengine",-1),q=t('<p>启动和配置完成之后，就可以通过</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dcgmi</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> discovery</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -l</span></span></code></pre></div><p>尝试通过 DCGM 嗅探和列出 GPU 设备信息列表了。</p>',3),L={class:"info custom-block"},K=t(`<p class="custom-block-title">运行的时候遭遇了 <code>unable to establish a connection to the specified host: localhost</code> 和 <code>Unable to connect to host engine. Host engine connection invalid/disconnected.</code> 错误？</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">root@nvidia-dcgm-exporter-pkcrb:/$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dcgmi</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> discovery</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -l</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> unable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> establish</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> connection</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> specified</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Unable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> connect</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> engine.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Host</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> engine</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> connection</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> invalid/disconnected.</span></span></code></pre></div>`,2),O=i("h3",{id:"通过-dcgmi-health-查看-gpu-设备健康状况",tabindex:"-1"},[s("通过 "),i("code",null,"dcgmi health"),s(" 查看 GPU 设备健康状况 "),i("a",{class:"header-anchor",href:"#通过-dcgmi-health-查看-gpu-设备健康状况","aria-label":'Permalink to "通过 `dcgmi health` 查看 GPU 设备健康状况"'},"​")],-1),Y=i("p",null,[s("对于已经安装了 GPU Operator 的集群，可以通过 GPU Operator 下属的 "),i("code",null,"dcgm-exporter"),s(" Pod 资源内置的 "),i("code",null,"dcgmi"),s("（对 DCGM API 的本地封装的 CLI 版本）的命令对 GPU 进行故障排查。")],-1),z={class:"tip custom-block"},J=t('<p class="custom-block-title">如何进入 DCGM Pod？</p><p>运行下面的命令就可以进入到正在运行的 Pod 了：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">DCGM</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Pod</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 的</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div><p>以上面 <code>kubectl get pods</code> 的返回结果为例，可以这样运行</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter-5fr8d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div>',5),W=i("code",null,"kubectl",-1),X=i("code",null,"docker",-1),H=t('<p>除去 <code>diag</code> 子命令，如果开启了 <code>nv-hostengine</code>，也可以通过下面的命令检查健康状况：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dcgmi</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> health</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -c</span></span></code></pre></div><h3 id="通过-dcgmi-diag-来检查-kubernetes-中的-gpu" tabindex="-1">通过 <code>dcgmi diag</code> 来检查 Kubernetes 中的 GPU <a class="header-anchor" href="#通过-dcgmi-diag-来检查-kubernetes-中的-gpu" aria-label="Permalink to &quot;通过 `dcgmi diag` 来检查 Kubernetes 中的 GPU&quot;">​</a></h3><p>对于已经安装了 GPU Operator 的集群，可以通过 GPU Operator 下属的 <code>dcgm-exporter</code> Pod 资源内置的 <code>dcgmi</code>（对 DCGM API 的本地封装的 CLI 版本）的命令对 GPU 进行故障排查。</p>',4),j={class:"tip custom-block"},$=t('<p class="custom-block-title">如何进入 DCGM Pod？</p><p>运行下面的命令就可以进入到正在运行的 Pod 了：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">DCGM</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Pod</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 的</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div><p>以上面 <code>kubectl get pods</code> 的返回结果为例，可以这样运行</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter-5fr8d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div>',5),Q=i("code",null,"kubectl",-1),Z=i("code",null,"docker",-1),ss=t('<p>其中一个在文档中提及的比较多的是 <code>diag</code> 子命令：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dcgmi</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> diag</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span></span></code></pre></div><p><code>-r</code> 参数是用于指定诊断时候的「等级」用的，</p>',3),is={class:"info custom-block"},as=i("p",{class:"custom-block-title"},[i("code",null,"dcgmi diag"),s(" 的 "),i("code",null,"-r"),s(" 参数有什么用")],-1),ns=t('<blockquote><p>The runtime is dependent on the value of &quot;Level&quot; parameter.</p></blockquote><table tabindex="0"><thead><tr><th>Level value</th><th>Runtime</th></tr></thead><tbody><tr><td>4</td><td>1-2 hour</td></tr><tr><td>3</td><td>30 min</td></tr><tr><td>2</td><td>2 min</td></tr><tr><td>1</td><td>few seconds</td></tr></tbody></table>',2),hs=i("code",null,"-r",-1),ts=t('<table tabindex="0"><thead><tr><th>Plugin</th><th>Test name</th><th>r1 (Short)<br><br>Seconds</th><th>r2 (Medium)<br><br>&lt; 2 mins</th><th>r3 (Long)<br><br>&lt; 30 mins</th><th>r4 (Extra Long)<br><br>1-2 hours</th></tr></thead><tbody><tr><td>Software</td><td><code>software</code></td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>PCIe + NVLink</td><td><code>pcie</code></td><td></td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>GPU Memory</td><td><code>memory</code></td><td></td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>Memory Bandwidth</td><td><code>memory_bandwidth</code></td><td></td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>Diagnostics</td><td><code>diagnostic</code></td><td></td><td></td><td>Yes</td><td>Yes</td></tr><tr><td>Targeted Stress</td><td><code>targeted_stress</code></td><td></td><td></td><td>Yes</td><td>Yes</td></tr><tr><td>Targeted Power</td><td><code>targeted_power</code></td><td></td><td></td><td>Yes</td><td>Yes</td></tr><tr><td>Memory Stress</td><td><code>memtest</code></td><td></td><td></td><td></td><td>Yes</td></tr><tr><td>Input EDPp</td><td><code>pulse</code></td><td></td><td></td><td></td><td>Yes</td></tr></tbody></table>',1),ls=t(`<p>使用的时候效果是这样的：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">root@nvidia-dcgm-exporter-4f599:/$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dcgmi</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> diag</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ran</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> diagnostic</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> group.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+---------------------------+------------------------------------------------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Diagnostic</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Result</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                         |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">===========================+================================================+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Metadata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  ----------+------------------------------------------------</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> DCGM</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Version</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">              |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 3.3.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                          |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Driver</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Version</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Detected</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 530.30.02</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                      |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> IDs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Detected</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 2204,2204,2204,2204,2204,2204,2204,2204</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">        |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Deployment</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  --------+------------------------------------------------</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Denylist</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Pass</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                           |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> NVML</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Library</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">              |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Pass</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                           |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> CUDA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Main</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Library</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">         |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Pass</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                           |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Permissions</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> OS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Blocks</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Pass</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                           |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Persistence</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">          |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Pass</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                           |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Environment</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">     |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Pass</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                           |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Page</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Retirement/Row</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Remap</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Pass</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                           |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Graphics</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Processes</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Pass</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                           |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Inforom</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Pass</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                           |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+-----</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Integration</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  -------+------------------------------------------------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> PCIe</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Fail</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> All</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                     |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Warning</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> GPU</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Error</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> using</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CUDA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cudaDeviceGetByPCI</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">  |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                           |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> BusId</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Check</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DCGM</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> system</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> errors.</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">   |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                           |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Reset</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> GPU.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DCGM.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Rerun</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> diagnostics.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;  |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">|                           | system has unsupported display driver / cuda   |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">|                           | driver combination&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 0,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bus</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00000</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">  |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                           |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 000:1B:00.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                    |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+-----</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Hardware</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  ----------+------------------------------------------------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Skip</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> All</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                     |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+-----</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Stress</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  ------------+------------------------------------------------+</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+---------------------------+------------------------------------------------+</span></span></code></pre></div><p>可以通过观察表格的不同部分来了解 GPU 的状况，上文的 Fail 就是其中的一个例子。</p><h3 id="通过-dcgmproftester12-对-gpu-进行压力和-profiling-测试" tabindex="-1">通过 <code>dcgmproftester12</code> 对 GPU 进行压力和 Profiling 测试 <a class="header-anchor" href="#通过-dcgmproftester12-对-gpu-进行压力和-profiling-测试" aria-label="Permalink to &quot;通过 \`dcgmproftester12\` 对 GPU 进行压力和 Profiling 测试&quot;">​</a></h3><p>对于已经安装了 GPU Operator 的集群，可以通过 GPU Operator 下属的 <code>dcgm-exporter</code> Pod 资源内置的 <code>dcgmproftester12</code>（如果驱动安装的是 CUDA 11，那请使用 <code>dcgmproftester11</code> 命令）命令对 GPU 进行压力测试和 Profiling 测试来观察效果</p>`,5),ks={class:"tip custom-block"},es=t('<p class="custom-block-title">如何进入 DCGM Pod？</p><p>运行下面的命令就可以进入到正在运行的 Pod 了：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">DCGM</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Pod</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 的</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div><p>以上面 <code>kubectl get pods</code> 的返回结果为例，可以这样运行</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter-5fr8d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dcgm-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span></code></pre></div>',5),ps=i("code",null,"kubectl",-1),rs=i("code",null,"docker",-1),ds=t('<p>命令是这样的：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dcgmproftester12</span></span></code></pre></div>',2),gs={class:"info custom-block"},os=t(`<p class="custom-block-title">使用了不兼容的版本？报错提示 <code>Wrong version of dcgmproftester is used.</code> ？</p><p>在 <code>dcgmproftester12</code> 之外，还会有 <code>dcgmproftester11</code> 命令可以使用，而尾缀中的 <code>11</code> 和 <code>12</code> 代表的是 CUDA 的版本号，如果在调用 <code>dcgmproftester</code> 的时候使用了错误的版本，将会提示错误 <code>Wrong version of dcgmproftester is used.</code>：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">root@nvidia-dcgm-exporter-4f599:/$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dcgmproftester11</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --no-dcgm-validation</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1004</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 30</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Wrong</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dcgmproftester</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> used.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Expected</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Cuda</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 11.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Installed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Cuda</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 12.</span></span></code></pre></div>`,3),Fs=t(`<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;*nvidia*&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Desired</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Unknown/Install/Remove/Purge/Hold</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> Status</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Err?=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">none</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/Reinst-required</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (Status,Err: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">uppercase=bad</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                                                  Version</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                         Architecture</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                    Description</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">+++-</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">=====================================================-===============================-===============================-================================================================================================================</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">un</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  libgldispatch0-nvidia</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                 &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                          &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                          (no </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">description</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> available</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">un</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  libnvidia-container-tools</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                             &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                          &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                          (no </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">description</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> available</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">un</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  nvidia-304</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                            &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                          &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                          (no </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">description</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> available</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">un</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  nvidia-340</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                            &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                          &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                          (no </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">description</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> available</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">un</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  nvidia-384</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                                            &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                          &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                          (no </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">description</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> available</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">un</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  nvidia-container-runtime</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                              &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                          &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                          (no </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">description</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> available</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">un</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  nvidia-container-runtime-hook</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                         &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">                          &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                          (no </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">description</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> available</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rc</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  nvidia-container-toolkit</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                              1.13.2-1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                        amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                           NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> toolkit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rc</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  nvidia-container-toolkit-base</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                         1.13.2-1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                        amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                           NVIDIA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Toolkit</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Base</span></span></code></pre></div><p>作为参考的话，撰写这篇文档的时候，使用的 <code>dcgm-exporter</code> 的镜像版本是这个：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">nvcr.io/nvidia/k8s/dcgm-exporter:3.3.0-3.2.0-ubuntu22.04</span></span></code></pre></div><p>使用的 <code>gpu-operator-validator</code> 的版本是这个：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">nvcr.io/nvidia/cloud-native/gpu-operator-validator:v23.9.1</span></span></code></pre></div>`,5),ys=i("h2",{id:"参考资料",tabindex:"-1"},[s("参考资料 "),i("a",{class:"header-anchor",href:"#参考资料","aria-label":'Permalink to "参考资料"'},"​")],-1),Cs=i("code",null,"dcgmi",-1);function cs(As,Bs,us,Ds,bs,ms){const k=l("NolebasePageProperties"),n=l("VPNolebaseInlineLinkPreview"),e=l("NolebaseGitContributors"),p=l("NolebaseGitChangelog");return g(),d("div",null,[F,a(k),i("p",null,[s("NVIDIA 有个 GPU 排查指南："),a(n,{href:"https://docs.nvidia.com/deploy/gpu-debug-guidelines/index.html",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("NVIDIA GPU Debug Guidelines - GPU Deployment and Management Documentation")]),_:1})]),y,i("p",null,[s("在 NVIDIA 支持社区有一个建议先阅读的发帖 "),a(n,{href:"https://forums.developer.nvidia.com/t/if-you-have-a-problem-please-read-this-first/27131",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("If you have a problem, PLEASE read this first")]),_:1}),s(" 中，以及在 NVIDIA 工程师于 "),a(n,{href:"https://github.com/NVIDIA/gpu-operator/issues/222",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("DCGM initialization error · Issue #222 · NVIDIA/gpu-operator")]),_:1}),s(" 中都建议到的，"),C]),i("p",null,[s("因此，可以通过执行下面的命令来执行通常情况下在 NVIDIA 官方文档 "),a(n,{href:"https://docs.nvidia.com/deploy/gpu-debug-guidelines/index.html",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("NVIDIA GPU Debug Guidelines")]),_:1}),s(" 和社区的建议中提及的 "),c]),A,i("div",B,[u,i("p",null,[s("如果你实在找不到，可以在 "),a(n,{href:"https://github.com/Pardus-Linux/Packages/blob/594b76c80a1ec2c82359602c6318bc1fde867b76/hardware/graphics/nvidia-xconfig/files/nvidia-bug-report.sh",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Packages/hardware/graphics/nvidia-xconfig/files/nvidia-bug-report.sh")]),_:1}),s(" 下载和查阅到这个脚本的具体内容和执行的逻辑信息。")])]),D,i("div",b,[m,i("p",null,[s("如果你不熟悉 "),f,s(" 和 "),_,s(" CLI 的用法，可以通过这篇 "),a(n,{href:"https://kubernetes.io/docs/tasks/debug/debug-application/get-shell-running-container/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Get a Shell to a Running Container | Kubernetes")]),_:1}),s("文档学习和了解相关的用法。")])]),v,i("div",E,[I,i("p",null,[s("如果你不熟悉 "),P,s(" 和 "),x,s(" CLI 的用法，可以通过这篇 "),a(n,{href:"https://kubernetes.io/docs/tasks/debug/debug-application/get-shell-running-container/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Get a Shell to a Running Container | Kubernetes")]),_:1}),s("文档学习和了解相关的用法。")])]),T,G,i("div",V,[N,i("p",null,[s("如果你不熟悉 "),U,s(" 和 "),M,s(" CLI 的用法，可以通过这篇 "),a(n,{href:"https://kubernetes.io/docs/tasks/debug/debug-application/get-shell-running-container/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Get a Shell to a Running Container | Kubernetes")]),_:1}),s("文档学习和了解相关的用法。")])]),i("p",null,[s("想要运行 "),w,s("，你必须确保自己开启了 "),S,s(" 或者为 DCGM 配置了 embedding engine（参考 "),a(n,{href:"https://github.com/triton-inference-server/model_analyzer/issues/16",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Error starting embedded DCGM engine · Issue #16 · triton-inference-server/model_analyzer")]),_:1}),s(" 给出的说明），想要了解 "),R,s("，请参考这篇文档："),a(n,{href:"/笔记/🧱 基础设施/nv-hostengine 的启动和补充知识.html"},{default:h(()=>[s("nv-hostengine 的启动和补充知识")]),_:1})]),q,i("div",L,[K,i("p",null,[s("请参考 "),a(n,{href:"/笔记/🧱 基础设施/nv-hostengine 的启动和补充知识.html"},{default:h(()=>[s("nv-hostengine 的启动和补充知识")]),_:1}),s(" 的指南启动或者配置 DCGM 的 embedding engine 激活 nv-hostengine 之后再次尝试。")])]),O,Y,i("div",z,[J,i("p",null,[s("如果你不熟悉 "),W,s(" 和 "),X,s(" CLI 的用法，可以通过这篇 "),a(n,{href:"https://kubernetes.io/docs/tasks/debug/debug-application/get-shell-running-container/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Get a Shell to a Running Container | Kubernetes")]),_:1}),s("文档学习和了解相关的用法。")])]),H,i("div",j,[$,i("p",null,[s("如果你不熟悉 "),Q,s(" 和 "),Z,s(" CLI 的用法，可以通过这篇 "),a(n,{href:"https://kubernetes.io/docs/tasks/debug/debug-application/get-shell-running-container/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Get a Shell to a Running Container | Kubernetes")]),_:1}),s("文档学习和了解相关的用法。")])]),ss,i("div",is,[as,i("p",null,[s("根据 "),a(n,{href:"https://microsoft.github.io/VirtualClient/docs/workloads/dcgmi/dcgmi-profiles/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("DCGMI Workload Profiles | Virtual Client Platform")]),_:1}),s(" 文档叙述：")]),ns,i("p",null,[s("不同的 "),hs,s(" 参数的数值代表了不同的 Level，Level 就是所谓的「等级」，这样的等级会在背后运行不同的设备测试以方便工程师定位问题，对于不同的 Level 所附加的不同测试，可以参见 "),a(n,{href:"https://docs.nvidia.com/datacenter/dcgm/latest/user-guide/dcgm-diagnostics.html#run-levels-and-tests",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("DCGM Diagnostics — NVIDIA DCGM Documentation latest documentation")]),_:1}),s(" 文档中给出的下表：")]),ts]),ls,i("div",ks,[es,i("p",null,[s("如果你不熟悉 "),ps,s(" 和 "),rs,s(" CLI 的用法，可以通过这篇 "),a(n,{href:"https://kubernetes.io/docs/tasks/debug/debug-application/get-shell-running-container/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Get a Shell to a Running Container | Kubernetes")]),_:1}),s("文档学习和了解相关的用法。")])]),ds,i("div",gs,[os,i("p",null,[s("这个时候可以根据 "),a(n,{href:"https://github.com/NVIDIA/nvidia-docker/issues/1256",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("system has unsupported display driver / cuda driver combination · Issue #1256 · NVIDIA/nvidia-docker")]),_:1}),s(" 给出的指南，在 Kubernetes 正在运行的节点上检查安装的 NVIDIA 驱动包和 container 必要组件对应的版本号来确认是否正确配置 CUDA 和相关的库：")]),Fs]),ys,i("ul",null,[i("li",null,[a(n,{href:"https://www.cnblogs.com/jisongxie/p/10405302.html",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("nvidia-smi GPU异常消失 程序中断 - Jisongxie - 博客园")]),_:1})]),i("li",null,[a(n,{href:"https://catalog.ngc.nvidia.com/orgs/nvidia/containers/pytorch",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("PyTorch | NVIDIA NGC")]),_:1})]),i("li",null,[a(n,{href:"https://docs.nvidia.com/datacenter/tesla/hgx-software-guide/index.html",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("NVIDIA HGX A100 Software User Guide - NVIDIA Tesla Documentation")]),_:1})]),i("li",null,[a(n,{href:"https://microsoft.github.io/VirtualClient/docs/workloads/dcgmi/dcgmi-profiles/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("DCGMI Workload Profiles | Virtual Client Platform")]),_:1})]),i("li",null,[a(n,{href:"https://zhuanlan.zhihu.com/p/361545761",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("PyTorch的CUDA错误：Error 804: forward compatibility was attempted on non supported HW - 知乎")]),_:1})]),i("li",null,[a(n,{href:"https://docs.nvidia.com/datacenter/dcgm/latest/user-guide/getting-started.html#embedded-mode",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("DCGM 的 嵌入模式 Getting Started — NVIDIA DCGM Documentation latest documentation")]),_:1})]),i("li",null,[a(n,{href:"https://docs.nvidia.com/deploy/nvml-api/nvml-api-reference.html#nvml-api-reference",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("NVML API Reference Guide - GPU Deployment and Management Documentation")]),_:1})]),i("li",null,[a(n,{href:"https://github.com/NVIDIA/gpu-operator/issues/294",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("DCGM exporter connection to server pod times out · Issue #294 · NVIDIA/gpu-operator")]),_:1})]),i("li",null,[a(n,{href:"https://www.cnblogs.com/maxgongzuo/p/12582286.html",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("AI模型运维——GPU性能监控NVML和DCGM - 沄持的学习记录 - 博客园")]),_:1})]),i("li",null,[a(n,{href:"https://developer.nvidia.com/blog/gpu-telemetry-nvidia-dcgm/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Setting Up GPU Telemetry with NVIDIA Data Center GPU Manager | NVIDIA Technical Blog")]),_:1})]),i("li",null,[a(n,{href:"https://cloud-atlas.readthedocs.io/zh-cn/latest/kubernetes/gpu/intergrate_gpu_telemetry_into_k8s.html",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("在Kuternetes集成GPU可观测能力 — Cloud Atlas beta 文档")]),_:1})]),i("li",null,[a(n,{href:"https://cloud-atlas.readthedocs.io/zh-cn/latest/kubernetes/gpu/intergrate_gpu_telemetry_into_k8s.html#dcgm",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("DCGM - 在Kuternetes集成GPU可观测能力 — Cloud Atlas beta 文档 (cloud-atlas.readthedocs.io)")]),_:1})]),i("li",null,[a(n,{href:"https://houmin.cc/posts/b4058e1b/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("【系统监控】GPU 监控 | Houmin")]),_:1})]),i("li",null,[a(n,{href:"https://blog.searce.com/nvidia-a100-migs-gpu-monitoring-using-datadog-7c3d2378184f",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("Nvidia A100 MIGs GPU Monitoring using Datadog | by Aditya Bibave | Searce")]),_:1})]),i("li",null,[a(n,{href:"https://www.jianshu.com/p/f38e58864496",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("dcgm-exporter源码分析 - 简书")]),_:1})]),i("li",null,[a(n,{href:"https://cloud.google.com/stackdriver/docs/managed-prometheus/exporters/nvidia-dcgm?hl=zh-cn",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("NVIDIA 数据中心 GPU 管理器 (DCGM)  |  操作套件  |  Google Cloud")]),_:1})]),i("li",null,[a(n,{href:"https://blog.51cto.com/zaa47/2560477",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("GPU常见故障及排查方法_51CTO博客_GPU常见故障")]),_:1})]),i("li",null,[a(n,{href:"https://docs.nvidia.com/deploy/gpu-debug-guidelines/index.html",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("NVIDIA GPU Debug Guidelines - GPU Deployment and Management Documentation")]),_:1})]),i("li",null,[a(n,{href:"https://www.jimangel.io/posts/nvidia-rtx-gpu-kubernetes-setup/",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("A Practical Guide to Running NVIDIA GPUs on Kubernetes | jimangel.io")]),_:1})])]),i("p",null,[s("学习 "),Cs,s(" 在 Kubernetes 使用的时候发现了一个有意思的 AI 算力平台 "),a(n,{href:"https://openi.pcl.ac.cn/OpenI/Apulis-AI-Platform/commit/da673ab384cb6ea8a5276fad1ffc8695fe1d1d6d.diff",target:"_blank",rel:"noreferrer"},{default:h(()=>[s("openi.pcl.ac.cn/OpenI/Apulis-AI-Platform/commit/da673ab384cb6ea8a5276fad1ffc8695fe1d1d6d.diff")]),_:1})]),a(e),a(p)])}const vs=r(o,[["render",cs]]);export{_s as __pageData,vs as default};
