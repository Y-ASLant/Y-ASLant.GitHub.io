import{_ as o,c as r,I as a,j as s,a as i,w as p,au as t,D as e,o as c}from"./chunks/framework.RMxno62p.js";const g="/assets/during-apt-upgrading-ssh-broken-pipe-and-no-tty-wrapper-what-to-do-screenshot-1.D3UaYczO.png",N=JSON.parse('{"title":"apt upgrade æ‰§è¡Œæ›´æ–°åˆ°ä¸€åŠå‘ç”Ÿäº† SSH æ–­è¿ä½†æ˜¯æ²¡æœ‰ tmux å’Œ screen å¸®åŠ©åˆ›å»ºå®ˆæŠ¤ ttyï¼Œä½†æ˜¯æŠ¥é”™äº†æ— æ³•è·å¾— lock-frontend é”çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ","description":"","frontmatter":{"tags":["è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux","æ“ä½œç³»ç»Ÿ/Linux","æ“ä½œç³»ç»Ÿ/Debian","æ“ä½œç³»ç»Ÿ/Debian/Debian-11","æ“ä½œç³»ç»Ÿ/Unix","å‘½ä»¤è¡Œ/apt","è¿ç»´","å‘½ä»¤è¡Œ/ssh","å‘½ä»¤è¡Œ/ç»ˆç«¯","å¼€å‘/æ•…éšœæ’æŸ¥"]},"headers":[],"relativePath":"ç¬”è®°/ğŸ›ï¸ æ“ä½œç³»ç»Ÿ/ğŸ¥ Debian/apt upgrade æ‰§è¡Œæ›´æ–°åˆ°ä¸€åŠå‘ç”Ÿäº† SSH æ–­è¿ä½†æ˜¯æ²¡æœ‰ tmux å’Œ screen å¸®åŠ©åˆ›å»ºå®ˆæŠ¤ ttyï¼Œä½†æ˜¯æŠ¥é”™äº†æ— æ³•è·å¾— lock-frontend é”çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ.md","filePath":"ç¬”è®°/ğŸ›ï¸ æ“ä½œç³»ç»Ÿ/ğŸ¥ Debian/apt upgrade æ‰§è¡Œæ›´æ–°åˆ°ä¸€åŠå‘ç”Ÿäº† SSH æ–­è¿ä½†æ˜¯æ²¡æœ‰ tmux å’Œ screen å¸®åŠ©åˆ›å»ºå®ˆæŠ¤ ttyï¼Œä½†æ˜¯æŠ¥é”™äº†æ— æ³•è·å¾— lock-frontend é”çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ.md"}'),y={name:"ç¬”è®°/ğŸ›ï¸ æ“ä½œç³»ç»Ÿ/ğŸ¥ Debian/apt upgrade æ‰§è¡Œæ›´æ–°åˆ°ä¸€åŠå‘ç”Ÿäº† SSH æ–­è¿ä½†æ˜¯æ²¡æœ‰ tmux å’Œ screen å¸®åŠ©åˆ›å»ºå®ˆæŠ¤ ttyï¼Œä½†æ˜¯æŠ¥é”™äº†æ— æ³•è·å¾— lock-frontend é”çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ.md"},C=s("h1",{id:"apt-upgrade-æ‰§è¡Œæ›´æ–°åˆ°ä¸€åŠå‘ç”Ÿäº†-ssh-æ–­è¿ä½†æ˜¯æ²¡æœ‰-tmux-å’Œ-screen-å¸®åŠ©åˆ›å»ºå®ˆæŠ¤-tty-ä½†æ˜¯æŠ¥é”™äº†æ— æ³•è·å¾—-lock-frontend-é”çš„æ—¶å€™æ€ä¹ˆåŠ",tabindex:"-1"},[s("code",null,"apt upgrade"),i(" æ‰§è¡Œæ›´æ–°åˆ°ä¸€åŠå‘ç”Ÿäº† SSH æ–­è¿ä½†æ˜¯æ²¡æœ‰ "),s("code",null,"tmux"),i(" å’Œ "),s("code",null,"screen"),i(" å¸®åŠ©åˆ›å»ºå®ˆæŠ¤ "),s("code",null,"tty"),i("ï¼Œä½†æ˜¯æŠ¥é”™äº†æ— æ³•è·å¾— "),s("code",null,"lock-frontend"),i(" é”çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ "),s("a",{class:"header-anchor",href:"#apt-upgrade-æ‰§è¡Œæ›´æ–°åˆ°ä¸€åŠå‘ç”Ÿäº†-ssh-æ–­è¿ä½†æ˜¯æ²¡æœ‰-tmux-å’Œ-screen-å¸®åŠ©åˆ›å»ºå®ˆæŠ¤-tty-ä½†æ˜¯æŠ¥é”™äº†æ— æ³•è·å¾—-lock-frontend-é”çš„æ—¶å€™æ€ä¹ˆåŠ","aria-label":'Permalink to "`apt upgrade` æ‰§è¡Œæ›´æ–°åˆ°ä¸€åŠå‘ç”Ÿäº† SSH æ–­è¿ä½†æ˜¯æ²¡æœ‰ `tmux` å’Œ `screen` å¸®åŠ©åˆ›å»ºå®ˆæŠ¤ `tty`ï¼Œä½†æ˜¯æŠ¥é”™äº†æ— æ³•è·å¾— `lock-frontend` é”çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ"'},"â€‹")],-1),F=t('<h2 id="tl-dr" tabindex="-1">TL;DR <a class="header-anchor" href="#tl-dr" aria-label="Permalink to &quot;TL;DR&quot;">â€‹</a></h2><p>ç¡®è®¤æ˜¯ä¸æ˜¯ <code>apt</code> é€ æˆçš„é”æ–‡ä»¶</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lsof</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /var/lib/dpkg/lock-frontend</span></span></code></pre></div><p>å¦‚æœæ˜¯çš„è¯ï¼Œä¸€èˆ¬è€Œè¨€è¿™ä¸ªæ—¶å€™ <code>apt</code> è¿›ç¨‹å·²ç»ä¸ä¼šå†ç»§ç»­æ‰§è¡Œäº†ï¼Œæœ€å¥½æ‰§è¡Œä¸€æ¬¡ç³»ç»Ÿå¤‡ä»½å’Œå¿«ç…§ã€‚</p><p>ç„¶åé‡å¯</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reboot</span></span></code></pre></div><p>æ‰§è¡Œ</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -a</span></span></code></pre></div><p>æ¥æ¢å¤å’Œç»§ç»­æ›´æ–°ä¼šè¯ã€‚</p><h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">â€‹</a></h2><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼š</p>',11),u=t(`<p>æˆ‘ä¹‹å‰åœ¨æ»šæ›´æ–°çš„æ—¶å€™ç¦»å¼€äº†ç”µè„‘ï¼Œç»“æœæ›´æ–°çš„é€”ä¸­å¼¹çª—æç¤ºå¹¶ä¸” hold ä½äº†æ•´ä¸ªæ›´æ–°ï¼Œç»“æœè·‘ SSH è¿æ¥å»æ›´æ–°çš„è®¾å¤‡å’Œè¿œç«¯æœåŠ¡å™¨çš„è¿æ¥æ•…éšœäº†ï¼Œå‘ç”Ÿäº† Broken Pipeï¼Œè€Œä¸”æˆ‘è¿˜æ²¡æœ‰å¼€ <code>tmux</code> å’Œ <code>screen</code> å»ç»´æŒä½ <code>tty</code>ã€‚</p><p>è¿™ä¸ªæ—¶å€™å¦‚æœä½ é‡æ–°ç™»å½•åˆ° SSH ä¹‹åå°è¯•å†æ¬¡è¿è¡Œ <code>apt upgrade</code> çš„æ—¶å€™å…¶å®ä¼šé‡åˆ°è¿™æ ·çš„äº‹æƒ…</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> upgrade</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">æ­£åœ¨ç­‰å¾…ç¼“å­˜é”ï¼šæ— æ³•è·å¾—é”</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /var/lib/dpkg/lock-frontendã€‚é”æ­£ç”±è¿›ç¨‹</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8168ï¼ˆaptï¼‰æŒæœ‰</span></span></code></pre></div><p>æˆ–è€…åœ¨è‹±æ–‡é‡Œæ˜¯è¿™æ ·çš„</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> upgrade</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Waiting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cache</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lock:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Could</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lock</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /var/lib/dpkg/lock-frontend.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> It</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> held</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> process</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 8168</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (apt)</span></span></code></pre></div>`,5),_=t(`<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --pending</span></span></code></pre></div><p>æ¥é…ç½®æ­£åœ¨è¿‡ç¨‹ä¸­çš„ <code>apt</code> äº‹åŠ¡æ“ä½œï¼Œä½†æ˜¯ä½ å¾ˆå¯èƒ½ä¼šç›´æ¥é‡åˆ°æŠ¥é”™è¯´é‡åˆ°äº†é”ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --pending</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dpkg:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> é”™è¯¯:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> å‰ç«¯é”</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> å·²è¢«å¦ä¸€ä¸ª</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pid</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ä¸º</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 8168</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> çš„è¿›ç¨‹åŠ é”</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">æ³¨æ„ï¼šåˆ é™¤é”æ–‡ä»¶çš„æ“ä½œæ˜¯é”™è¯¯çš„ï¼Œè¿™æ ·æ“ä½œä¼šæŸåä¸Šé”çš„éƒ¨åˆ†ç”šè‡³æŸå</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ä¸ªç³»ç»Ÿã€‚è¯¦æƒ…è¯·è§</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">https://wiki.debian.org/Teams/Dpkg/FA</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">Q</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ã€‚</span></span></code></pre></div><p>æˆ–è€…åœ¨è‹±æ–‡é‡Œæ˜¯è¿™æ ·çš„</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --pending</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dpkg:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> error:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> frontend</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lock</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> locked</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> another</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> process</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pid</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 8168</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Note:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> removing</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lock</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> always</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wrong,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> can</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> end</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> damaging</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">locked</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> area</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> entire</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> system.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> See</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">https://wiki.debian.org/Teams/Dpkg/FA</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">Q</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.</span></span></code></pre></div><p>å¥½çš„ï¼Œé‚£æ€ä¹ˆè§£å†³ï¼Ÿ</p><h2 id="è§£å†³" tabindex="-1">è§£å†³ <a class="header-anchor" href="#è§£å†³" aria-label="Permalink to &quot;è§£å†³&quot;">â€‹</a></h2><p>æˆ‘ä»¬å½“ç„¶ä¸å¯ä»¥ç›´æ¥å»åˆ æ‰ <code>/var/lib/dpkg/lock-frontend</code>ï¼å› ä¸ºå¦‚æœåˆ æ‰äº†ï¼Œå¯èƒ½ä¼šæœ‰åˆ«çš„è„šæœ¬å’Œå‘½ä»¤ä¼šå¼€å§‹æŠ¢å¤ºï¼Œé€ æˆæ„å¤–ä¹‹å¤–çš„æ›´æ–°ï¼Œç”šè‡³ç ´åæ•´ä¸ªç³»ç»Ÿã€‚æ¯”å¦‚å¦‚æœè®¾å®šäº† <code>systemd-timer</code> æ¥è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿï¼Œé‚£è¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šå‡ºç°ç³»ç»Ÿç›´æ¥è¢«è§¦å‘çš„ timer æ›´æ–°çš„æƒ…å†µã€‚</p><p>é¦–å…ˆè¿™ä¸ª pid 8168 å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥è·å¾—ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lsof</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /var/lib/dpkg/lock-frontend</span></span></code></pre></div><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span></span></code></pre></div><p>æ¥æŸ¥æ‰¾åˆ°å¯¹åº”çš„è¿›ç¨‹ä¿¡æ¯ã€‚æ‰¾åˆ°å’Œç¡®è®¤äº†é€ æˆé”çš„åƒµæ­»çš„ <code>apt</code> è¿›ç¨‹ä¹‹åï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code>top</code>ã€<code>btop</code>ã€<code>htop</code> è¿™æ ·çš„å‘½ä»¤æ¥è§‚å¯Ÿè¿™ä¸ªåƒµæ­»çš„ <code>apt</code> çš„èµ„æºæ¶ˆè€—ï¼Œå½“ç„¶ï¼Œå®é™…ä¸Šï¼Œå³ä¾¿æ˜¯å¯¹äºç³»ç»Ÿæ›´æ–°è€Œè¨€ï¼Œä¸€èˆ¬è€Œè¨€è¿™ä¸ªæ—¶å€™ <code>apt</code> è¿›ç¨‹å·²ç»ä¸ä¼šå†ç»§ç»­æ‰§è¡Œäº†<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã€‚</p><p>è¿™æ„å‘³ç€ä½ å®Œå…¨å¯ä»¥åœ¨å…¶ä»–ç³»ç»Ÿä¸Šæ­£åœ¨è¿›è¡Œçš„å·¥ä½œå®Œæˆæ”¶å°¾å’Œå¤‡ä»½å®Œæˆåå…ˆæ‰§è¡Œé‡å¯</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reboot</span></span></code></pre></div><p>ç„¶ååœ¨é‡æ–°ç™»å½•çš„æ—¶å€™å°±å¯ä»¥å…ˆæ‰§è¡Œä¸€æ¬¡</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> upgrade</span></span></code></pre></div><p>æ¥è¯•å›¾é‡æ–°æ›´æ–°ï¼Œå¾ˆæœ‰å¯èƒ½ä½ ä¼šè·å¾—ä¸‹é¢çš„é”™è¯¯å’Œæç¤º</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> upgrade</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[sudo] neko çš„å¯†ç ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">E:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> è¢«ä¸­æ–­ï¼Œæ‚¨å¿…é¡»æ‰‹å·¥è¿è¡Œ</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> â€˜sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -aâ€™</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> è§£å†³æ­¤é—®é¢˜ã€‚</span></span></code></pre></div><p>è€Œè¿™ä¸ª <code>sudo dpkg --configure -a</code> æ°å¥½å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆä¼šéœ€è¦çš„å‘½ä»¤ã€‚</p><p>æ¥ä¸‹æ¥æœ€åæˆ‘ä»¬æ‰§è¡Œ</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -a</span></span></code></pre></div><p>å°±å¯ä»¥ç»§ç»­æˆ‘ä»¬ä¹‹å‰è¢«æ‰“æ–­çš„ <code>apt</code> äº†ã€‚</p>`,23),b=s("hr",{class:"footnotes-sep"},null,-1),v={class:"footnotes"},A={class:"footnotes-list"},f={id:"fn1",class:"footnote-item"},m=s("a",{href:"#fnref1",class:"footnote-backref"},"â†©ï¸",-1);function x(D,E,P,S,B,T){const l=e("NolebasePageProperties"),h=e("NolebaseUnlazyImg"),n=e("VPNolebaseInlineLinkPreview"),k=e("NolebaseGitContributors"),d=e("NolebaseGitChangelog");return c(),r("div",null,[C,a(l),F,s("p",null,[a(h,{src:g,alt:"",thumbhash:"b+cJIYZGSWqmiQh1SXCRAyc=",placeholderSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAFCAYAAAAkG+5xAAACpElEQVR4AQCBAH7/AEeQ0P9JkdH/TJPS/1CW0/9Vl9T/WZnU/1yZ0/9fmdH/Y5nP/2eazv9rm8//cJ3P/3Sg0P93odH/eKHR/3egz/90ns7/cZvM/2+azP9unM//cKHW/3Sp3/95ser/fbn0/36++/96vfz/b7b3/1+q7f9Nmt7/OonP/yt8wv8jdLv/AIEAfv8Amr7Z/5u/2v+fwdz/o8Td/6jG3v+sx97/r8jd/7LI2/+1x9n/uMfY/7zI1//Aydf/w8rX/8TK1v/EydX/wsfS/77Dz/+6wM3/tr/N/7XAz/+2xNX/usve/7/U6f/D2/P/w9/5/77e+v+z1/X/o8rp/5C52v99qcv/bZu+/2WTt/8AgQB+/wDS1M//1NbQ/9nZ0//e3NX/5N/X/+ni2P/t49j/8eTY//Tk1v/45dX/++bV///m1P//59T//+fT///l0f//4s7/+t7L//XbyP/y2cj/8NrK//He0P/15dn/+e7k//317v/9+fT/9/f0/+zv7//b4uP/x9HU/7TAw/+ksrb/nKqv/wCBAH7/AKyqpf+vrKf/tLCr/7u2r//Du7T/ysC3/9HEuv/Xx7v/3cq8/+LMvv/oz7//7NHA//DTwf/y1ML/8tPB//DRv//tz73/6cy7/+bLvP/lzcD/59LH/+za0f/x49z/9Ovm//Tv7P/v7e3/4+Xn/9LY2/++xsv/qrW7/5qmrf+Rnqb/AYEAfv8AZHB8/2hyf/9ueIP/d36J/4CGj/+JjJX/kpOa/5uYnv+jnaH/qqKk/7KmqP+4qqv/vq6u/8GxsP/DsrH/wrGw/8CwsP+9rrD/vK+x/7yytv+/uL7/xMHJ/8rK1f/O0+D/ztfn/8nW6P+9zuL/rMDW/5ivxv+EnbX/dI6o/2uGoP98yQM12Ar4vAAAAABJRU5ErkJggg==",width:"1093",height:"161",autoSizes:"true"})]),u,s("p",null,[i("ä¸€èˆ¬è€Œè¨€å¦‚æœç›´æ¥å‚è€ƒ Debian çš„æ–‡æ¡£ "),a(n,{href:"https://wiki.debian.org/Teams/Dpkg/FAQ#Q:_What_can_be_done_when_the_dpkg_lock_is_held.3F",target:"_blank",rel:"noreferrer"},{default:p(()=>[i("Q: What can be done when the dpkg lock is held?")]),_:1}),i(" çš„è¯ï¼Œä¼šè¦æ±‚æ‰§è¡Œ")]),_,a(k),a(d),b,s("section",v,[s("ol",A,[s("li",f,[s("p",null,[a(n,{href:"https://unix.stackexchange.com/questions/156541/ssh-pipe-broke-while-running-apt-upgrade-what-can-i-do-about-it",target:"_blank",rel:"noreferrer"},{default:p(()=>[i("debian - SSH pipe broke while running apt upgrade. What can I do about it? - Unix & Linux Stack Exchange")]),_:1}),i(),m])])])])])}const H=o(y,[["render",x]]);export{N as __pageData,H as default};
