import{_ as p,c as r,I as a,j as i,w as t,a as s,au as d,D as h,o}from"./chunks/framework.RMxno62p.js";const w=JSON.parse('{"title":"ä¸€ä¸ªå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‡å¯åº”ç”¨æ›´æ–°å¯¼è‡´çš„ Docker æ— æ³•å¯åŠ¨çš„ä¹Œé¾™","description":"","frontmatter":{"tags":["å‘½ä»¤è¡Œ/docker","è½¯ä»¶/äº‘åŸç”Ÿ/docker","è¿ç»´/å†…æ ¸","è¿ç»´/äº‘åŸç”Ÿ/Docker","æ“ä½œç³»ç»Ÿ/Debian","æ“ä½œç³»ç»Ÿ/Debian/Debian-12","å‘½ä»¤è¡Œ/containerd","è½¯ä»¶/äº‘åŸç”Ÿ/containerd","æ“ä½œç³»ç»Ÿ/Unix","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux/å†…æ ¸","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux/å‘½ä»¤è¡Œ","æ“ä½œç³»ç»Ÿ/Linux","å¼€å‘/æ•…éšœæ’æŸ¥","è¿ç»´/äº‘åŸç”Ÿ/Kubernetes"]},"headers":[],"relativePath":"ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ä¸€ä¸ªå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‡å¯åº”ç”¨æ›´æ–°å¯¼è‡´çš„ Docker æ— æ³•å¯åŠ¨çš„ä¹Œé¾™.md","filePath":"ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ä¸€ä¸ªå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‡å¯åº”ç”¨æ›´æ–°å¯¼è‡´çš„ Docker æ— æ³•å¯åŠ¨çš„ä¹Œé¾™.md"}'),g={name:"ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ä¸€ä¸ªå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‡å¯åº”ç”¨æ›´æ–°å¯¼è‡´çš„ Docker æ— æ³•å¯åŠ¨çš„ä¹Œé¾™.md"},F=i("h1",{id:"ä¸€ä¸ªå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‡å¯åº”ç”¨æ›´æ–°å¯¼è‡´çš„-docker-æ— æ³•å¯åŠ¨çš„ä¹Œé¾™",tabindex:"-1"},[s("ä¸€ä¸ªå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‡å¯åº”ç”¨æ›´æ–°å¯¼è‡´çš„ Docker æ— æ³•å¯åŠ¨çš„ä¹Œé¾™ "),i("a",{class:"header-anchor",href:"#ä¸€ä¸ªå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‡å¯åº”ç”¨æ›´æ–°å¯¼è‡´çš„-docker-æ— æ³•å¯åŠ¨çš„ä¹Œé¾™","aria-label":'Permalink to "ä¸€ä¸ªå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‡å¯åº”ç”¨æ›´æ–°å¯¼è‡´çš„ Docker æ— æ³•å¯åŠ¨çš„ä¹Œé¾™"'},"â€‹")],-1),y=d(`<h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">â€‹</a></h2><p>ä»Šå¤©æœ‰ä¸ªä¼™ä¼´é—® Docker çš„ç½‘ç»œæ•…éšœçš„é—®é¢˜ï¼Œå°±æƒ³ç€æ­£å¥½æœ€è¿‘å¤©å¤©çœ‹ Docker å’Œ containerd çš„ä»£ç å’Œç¤¾åŒºï¼Œæ¥å¸®å¿™ debug çœ‹çœ‹å¥½äº†...</p><p>é¦–å…ˆç³»ç»Ÿæ˜¯è¿™æ ·çš„</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">6.1.0-10-amd64</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -a</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Linux</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 6.1.0-10-amd64</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> #1 SMP PREEMPT_DYNAMIC Debian 6.1.38-1 (2023-07-14) x86_64 GNU/Linux</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lsb_release</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -a</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">No</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LSB</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> modules</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> are</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> available.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Distributor</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ID:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">	Debian</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Description:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">	Debian</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> GNU/Linux</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (bookworm)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Release:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">	12</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Codename:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">	bookworm</span></span></code></pre></div><p>åœ¨é‡å¯äº† Docker çš„ Systemd æœåŠ¡</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span></span></code></pre></div><p>ä¹‹åå‘ç°æŠ¥é”™äº†ï¼ŒæŠ¥é”™çš„æ—¥å¿—è¾“å‡ºæ˜¯è¿™æ ·çš„</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> journalctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -xeu</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker.service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 09:22:20</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dockerd[352906]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> daemon:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Error</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> initializing</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> controller:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Error</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> creating</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;bridge&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> network:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Failed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Setup</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tables:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Unable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NAT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rule:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  (iptables </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">failed:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --wait</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nat</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -I</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> POSTROUTING</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 172.17.0.0/16</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> !</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> MASQUERADE:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Extension</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> MASQUERADE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> revision</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> supported,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> missing</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> module?</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 09:22:20</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dockerd[352906]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v1.8.9</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (nf_tables):  CHAIN_ADD failed (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">No</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> such</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> directory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">): chain POSTROUTING</span></span></code></pre></div><p>å•æ‹å‡ºæ¥è¿™æ®µ <code>iptables</code> çš„å‘½ä»¤å¯ä»¥çœ‹åˆ°è¿™ä¸ªæŠ¥é”™ç¡®å®æ˜¯è¿™æ ·çš„</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --wait</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nat</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -I</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> POSTROUTING</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 172.17.0.0/16</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> !</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> MASQUERADE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v1.8.9</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (nf_tables):  CHAIN_ADD failed (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">No</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> such</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> directory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">): chain POSTROUTING</span></span></code></pre></div><h2 id="è°ƒæŸ¥" tabindex="-1">è°ƒæŸ¥ <a class="header-anchor" href="#è°ƒæŸ¥" aria-label="Permalink to &quot;è°ƒæŸ¥&quot;">â€‹</a></h2><p>é‚£ä¹ˆï¼Œ<code>containerd</code> åœ¨æ­£å¸¸è¿è¡Œå—</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">â—</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd.service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> runtime</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     Loaded:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (/lib/systemd/system/containerd.service; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">preset:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     Active:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> active</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (running) since Wed 2023-12-13 08:36:21 UTC; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">19min</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ago</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       Docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://containerd.io</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   Main</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> PID:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 350077</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (containerd)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      Tasks:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 6</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     Memory:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 20.8M</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        CPU:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 3.222s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     CGroup:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /system.slice/containerd.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">             â””â”€350077</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/bin/containerd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd[350077]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T08:36:21.662772162Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=serving...</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> address=/run/containerd/containerd.sock.ttrpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd[350077]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T08:36:21.662831919Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=serving...</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> address=/run/containerd/containerd.sock</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd[350077]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T08:36:21.668808237Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;Start subscribing containerd event&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd[350077]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T08:36:21.668851196Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;Start recovering state&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd[350077]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T08:36:21.668938818Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;Start event monitor&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd[350077]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T08:36:21.668970047Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;Start snapshots syncer&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd[350077]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T08:36:21.668996641Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;Start cni network conf syncer for default&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd[350077]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T08:36:21.669006911Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;Start streaming server&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemd[1]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Started</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd.service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> runtime.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:36:21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd[350077]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T08:36:21.688811231Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;containerd successfully booted in 0.069185s&quot;</span></span></code></pre></div><p>æ®è¯´è¿™ä¸ªå’Œ <code>debian</code> ç”¨çš„ <code>iptables</code> çš„ <code>nftables</code> æ›¿ä»£æœ‰å…³<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œå¦‚æœç”¨</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update-alternatives</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span></span></code></pre></div><p>å°±å¯ä»¥è§‚å¯Ÿåˆ°ç°åœ¨çš„ <code>iptables</code> æ¨¡å—èƒŒåçš„é€‰æ‹©</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update-alternatives</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">There</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> are</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> choices</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alternative</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (providing </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/usr/sbin/iptables</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  Selection</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    Path</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                       Priority</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   Status</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            /usr/sbin/iptables-nft</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        auto</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            /usr/sbin/iptables-legacy</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   10</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        manual</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mode</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 2            /usr/sbin/iptables-nft      20        manual mode</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Press</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ente</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> keep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> current</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> choice[</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">],</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> selection</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> number:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">update-alternatives:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> using</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/sbin/iptables-legacy</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> provide</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/sbin/iptables</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (iptables) in manual mode</span></span></code></pre></div><p>å†æ¬¡æ‰§è¡Œçœ‹çœ‹æœ‰æ²¡æœ‰åº”ç”¨ç”Ÿæ•ˆäº†</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update-alternatives</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">There</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> are</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> choices</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alternative</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (providing </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/usr/sbin/iptables</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  Selection</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    Path</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                       Priority</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   Status</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            /usr/sbin/iptables-nft</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        auto</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mode</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 1            /usr/sbin/iptables-legacy   10        manual mode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            /usr/sbin/iptables-nft</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        manual</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mode</span></span></code></pre></div><p>ç„¶åå†æ‰§è¡Œä¸€æ¬¡çœ‹çœ‹ç»“æœï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --wait</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nat</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -I</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> POSTROUTING</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 172.170.0/16</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> !</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> MASQUERADE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Extension</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> MASQUERADE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> revision</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> supported,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> missing</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> module?</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v1.8.9</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (legacy): can</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;t initialize iptables table \`nat&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: Table does not exist (do you need to insmod</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Perhaps</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> needs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> upgraded.</span></span></code></pre></div><p>çœ‹èµ·æ¥å·²ç»æ˜¯ <code>iptables</code> <code>legacy</code> äº†ï¼Œä½†æ˜¯å‡ºç°äº†æ–°çš„æŠ¥é”™</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v1.8.9</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (legacy): can</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;t initialize iptables table \`nat&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: Table does not exist (do you need to insmod</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>é‚£è¿™ä¸ªæ—¶å€™ï¼Œå†…æ ¸æ¨¡å—æ­£å¸¸å—ï¼Ÿæˆ‘ä¹‹å‰ç¡®å®æ²¡æœ‰æ£€æŸ¥è¿‡ã€‚</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> modprobe</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ip_tables</span></span></code></pre></div><p>æ²¡æœ‰è¾“å‡ºã€‚</p><p>ä¸è¿‡æ—¢ç„¶æ˜¯ NAT æŠ¥é”™ï¼Œé‚£ä¼šæ˜¯æ²¡æœ‰é…ç½®ç›¸å…³çš„è½¬å‘æ¨¡å—å—ï¼Ÿ</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /boot/config-</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CONFIG_IP_NF_NAT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">CONFIG_IP_NF_NAT</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">m</span></span></code></pre></div><div class="tip custom-block github-alert"><p class="custom-block-title">æŸ¥çœ‹å•ç‹¬çš„å†…æ ¸æ¨¡å—ä¿¡æ¯</p><p></p><p>çœ‹äº†çœ‹ <code>modinfo</code> çš„è¾“å‡ºï¼Œçœ‹èµ·æ¥åŸºæœ¬çš„æ¨¡å—æ˜¯åœ¨çš„ï¼Œèƒ½è¿”å›</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">modinfo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nf_nat_ipv4</span></span></code></pre></div></div><div class="tip custom-block github-alert"><p class="custom-block-title">æŸ¥çœ‹å®Œæ•´çš„å†…æ ¸æ¨¡å—</p><p></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /lib/modules/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/kernel/net/netfilter/</span></span></code></pre></div><p>æŸ¥çœ‹ IPv4 ç›¸å…³çš„æ¨¡å—</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /lib/modules/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/kernel/net/ipv4/netfilter/</span></span></code></pre></div></div><p>ç„¶ååœ¨çœ‹åˆ«äººçš„å¸–å­çš„æ—¶å€™çœ‹åˆ°è¯´è¿™ä¸ªå’Œ <code>nf_nat_ipv4</code> æœ‰å…³ï¼Œè¿™ä¸ªæ—¶å€™ç”¨ <code>modprobe</code> è§‚å¯Ÿå°±å¯ä»¥å‘ç° <code>nf_nat_ipv4</code> ç¼ºå¤±äº†ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> modprobe</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nf_nat_ipv4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">modprobe:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> FATAL:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Module</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nf_nat_ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> found</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> directory</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /lib/modules/6.1.0-10-amd64</span></span></code></pre></div><h2 id="ä¿®å¤" tabindex="-1">ä¿®å¤ <a class="header-anchor" href="#ä¿®å¤" aria-label="Permalink to &quot;ä¿®å¤&quot;">â€‹</a></h2><p>è¿™ä¸‹æˆ‘æ‘¸ä¸ç€å¤´è„‘äº†ï¼Œç›´åˆ°æˆ‘çœ‹åˆ°ä¸€ç¯‡ä¸Šå¤çš„åœ¨ 2016 å¹´çš„å¸–å­ç»™äº†æˆ‘é†é†çŒé¡¶çš„ä¸€å‡»ï¼š</p><blockquote><p>Another possible problem with the same symptoms is stale kernel running - after upgrade and before reboot. This is the one I encountered just now.<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p></blockquote><p>ç„¶åæˆ‘å°±æç„¶å¤§æ‚Ÿäº†ã€‚å¯¹å•Šï¼å†…æ ¸æ›´æ–°çš„æ—¶å€™å¯èƒ½ä¼šå‘ç”Ÿé…ç½®é€‰é¡¹å’Œè·¯å¾„å˜æ›´ï¼Œè¿™ä¸ªæ—¶å€™å¯èƒ½è·‘åœ¨ä¸€ä¸ªè¿‡æ—¶çš„å†…æ ¸ä¸Šï¼Œè¿™ä¸ªæ—¶å€™ Docker å’Œ <code>iptables</code> å¼‚å¸¸éƒ½æ˜¯éå¸¸æ­£å¸¸çš„äº‹æƒ…ï¼Œè¿˜æœ‰å¯èƒ½å‘ç”Ÿåˆ«çš„æ›´å¤æ‚çš„æƒ…å†µã€‚</p><p>ä¸ºäº†éªŒè¯è¿™ä¸ªæƒ…å†µï¼Œé€šè¿‡</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reboot</span></span></code></pre></div><p>é‡å¯ä¹‹åå‘ç° Docker å·²ç»æ¢å¤æ­£å¸¸äº†ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">â—</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Application</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Container</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Engine</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     Loaded:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (/lib/systemd/system/docker.service; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">preset:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     Active:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> active</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (running) since Wed 2023-12-13 09:47:09 UTC; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">6s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ago</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">TriggeredBy:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> â—</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker.socket</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       Docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://docs.docker.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   Main</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> PID:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1025</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (dockerd)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      Tasks:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     Memory:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 27.7M</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        CPU:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 237ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     CGroup:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /system.slice/docker.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">             â””â”€1025</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/sbin/dockerd</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> fd://</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --containerd=/run/containerd/containerd.sock</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 09:47:09</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dockerd[1025]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T09:47:09.285808913Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;[core] Subchannel Connectivity change to READY&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> module=grpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 09:47:09</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dockerd[1025]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T09:47:09.285894457Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;[core] Channel Connectivity change to READY&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> module=grpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 09:47:09</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dockerd[1025]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T09:47:09.300511903Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;[graphdriver] using prior storage driver: overlay2&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 09:47:09</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dockerd[1025]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T09:47:09.303744784Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;Loading containers: start.&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 09:47:09</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dockerd[1025]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> time=&quot;2023-12-13T09:47:09.489257121Z&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> msg=&quot;Default bridge (docker0) is assigned with an IP address 172.17.0.0/16. Daemon option --bip can be&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Dec 13 09:47:09 localhost dockerd[1025]: time=&quot;2023-12-13T09:47:09.536110748Z&quot; level=info msg=&quot;Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containers:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> done.&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Dec 13 09:47:09 localhost dockerd[1025]: time=&quot;2023-12-13T09:47:09.553699433Z&quot; level=info msg=&quot;Docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> daemon&quot; commit=5d6db84 graphdriver(s)=overlay2 version=20.10.24+dfsg1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Dec 13 09:47:09 localhost dockerd[1025]: time=&quot;2023-12-13T09:47:09.553920794Z&quot; level=info msg=&quot;Daemon</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> completed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> initialization&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Dec 13 09:47:09 localhost systemd[1]: Started docker.service - Docker Application Container Engine.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Dec 13 09:47:09 localhost dockerd[1025]: time=&quot;2023-12-13T09:47:09.592818728Z&quot; level=info msg=&quot;API</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> listen</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /run/docker.sock&quot;</span></span></code></pre></div><p>ä¸ºäº†ç¡®ä¿ä¸ä¼šå¼„é”™ï¼Œæˆ‘åˆå»ä¿®æ”¹äº†ä¸€ä¸‹ <code>iptables</code> çš„ç³»ç»Ÿè½¯ä»¶æ›¿æ¢é€‰é¡¹ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update-alternatives</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">There</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> are</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> choices</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alternative</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (providing </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/usr/sbin/iptables</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  Selection</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    Path</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                       Priority</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   Status</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            /usr/sbin/iptables-nft</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        auto</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mode</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 1            /usr/sbin/iptables-legacy   10        manual mode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            /usr/sbin/iptables-nft</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        manual</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mode</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Press</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ente</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> keep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> current</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> choice[</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">],</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> selection</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> number:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">update-alternatives:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> using</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/sbin/iptables-nft</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> provide</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/sbin/iptables</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (iptables) in manual mode</span></span></code></pre></div><p>ç„¶åæ‰§è¡Œ</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span></span></code></pre></div><p>å‘ç° Docker ä¾ç„¶æ˜¯æ­£å¸¸çš„ï¼Œè¿™æ„å‘³ç€ä¹‹å‰çš„æ¢ç´¢è·¯çº¿åº”è¯¥æ˜¯é”™è¯¯äº†ã€‚</p><p>è€ƒè™‘åˆ°å¯èƒ½å®¹å™¨è¿è¡Œæ—¶æˆ–è€… Docker API æœ‰é—®é¢˜ï¼Œæˆ‘è·‘äº†ä¸€ä¸ªå¾ˆå¸¸è§çš„ busybox çš„å®¹å™¨å¹¶ä¸”è¿›è¡Œäº†ç®€å•çš„ç½‘ç»œæµ‹è¯•ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --rm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> busybox</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Unable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> image</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;busybox:latest&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> locally</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">latest:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Pulling</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> library/busybox</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">6672f60b6ba8:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Pull</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> complete</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Digest:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sha256:1ceb872bcc68a8fcd34c97952658b58086affdcb604c90c1dee2735bde5edc2f</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Status:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Downloaded</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> newer</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> image</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> busybox:latest</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> #</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> #</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> # nslookup google.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Server:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">		108.61.10.10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Address:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">	108.61.10.10:53</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Non-authoritative</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> answer:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Name:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">	google.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Address:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 142.250.72.238</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Non-authoritative</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> answer:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Name:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">	google.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Address:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 2607:f8b0:4007:816::200e</span></span></code></pre></div><p>å‘ç°éƒ½æ˜¯æ­£å¸¸çš„äº†ã€‚</p><h2 id="ç»“è®º" tabindex="-1">ç»“è®º <a class="header-anchor" href="#ç»“è®º" aria-label="Permalink to &quot;ç»“è®º&quot;">â€‹</a></h2><p>çœ‹èµ·æ¥å°±æ˜¯ä¸€ä¸ªæ›´æ–°ç³»ç»Ÿä¹‹åæ²¡æœ‰é‡å¯çš„ä¹Œé¾™ ğŸ˜‚ã€‚</p><p>è¿™ä¸ªæ•…äº‹å‘Šè¯«æˆ‘ä»¬è¦åœ¨é‡è¦ç³»ç»Ÿæ›´æ–°ä¹‹åé‡å¯ç³»ç»Ÿï¼Œå¦‚æœæ˜¯äº‘æœåŠ¡å•†è‡ªåŠ¨æ›´æ–°çš„ï¼Œä¹Ÿè¦è®°å¾—é€šçŸ¥å®¢æˆ·ç„¶åé‡å¯ç³»ç»Ÿï¼Œé¿å…è¿™æ ·çš„å°´å°¬å±€é¢ ğŸ˜‚ã€‚</p><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h2>`,54),C=i("hr",{class:"footnotes-sep"},null,-1),c={class:"footnotes"},u={class:"footnotes-list"},b={id:"fn1",class:"footnote-item"},A=i("code",null,"nftables",-1),m=i("code",null,"nftables",-1),v=i("code",null,"nftables",-1),E=i("a",{href:"#fnref1",class:"footnote-backref"},"â†©ï¸",-1),f={id:"fn2",class:"footnote-item"},D=i("a",{href:"#fnref2",class:"footnote-backref"},"â†©ï¸",-1);function B(_,q,x,T,P,N){const l=h("NolebasePageProperties"),n=h("VPNolebaseInlineLinkPreview"),k=h("NolebaseGitContributors"),e=h("NolebaseGitChangelog");return o(),r("div",null,[F,a(l),y,i("ul",null,[i("li",null,[a(n,{href:"https://stackoverflow.com/questions/21983554/iptables-v1-4-14-cant-initialize-iptables-table-nat-table-does-not-exist-d",target:"_blank",rel:"noreferrer"},{default:t(()=>[s("linux kernel - Iptables v1.4.14: can't initialize iptables table `nat': Table does not exist (do you need to insmod?) - Stack Overflow")]),_:1})])]),a(k),a(e),C,i("section",c,[i("ol",u,[i("li",b,[i("p",null,[s("åœ¨ "),a(n,{href:"https://github.com/firewalld/firewalld/issues/1184",target:"_blank",rel:"noreferrer"},{default:t(()=>[s("Fails on completely new Debian 12 server Â· Issue #1184 Â· firewalld/firewalld")]),_:1}),s("ï¼Œ"),a(n,{href:"https://serverfault.com/questions/1140935/firewalld-fails-on-completely-new-debian-12-server",target:"_blank",rel:"noreferrer"},{default:t(()=>[s("Firewalld fails on completely new Debian 12 server - Server Fault")]),_:1}),s("ï¼ˆå…¶å®æ˜¯åŒä¸€ä¸ªäººå‘çš„å¸–å­ï¼‰ï¼Œ"),a(n,{href:"https://fishros.org.cn/forum/topic/1147/docker-arm64-error-creating-default-bridge-network-iptables-v1-8-7-nf_tables-chain_add-failed-no-such-file-or-directory-chain-postrouting",target:"_blank",rel:"noreferrer"},{default:t(()=>[s('docker arm64 Error creating default "bridge" network iptables v1.8.7 (nf_tables): CHAIN_ADD failed (No such file or directory): chain POSTROUTING | é±¼é¦™ROS')]),_:1}),s(" å’Œ "),a(n,{href:"https://blog.csdn.net/choumin/article/details/111935589",target:"_blank",rel:"noreferrer"},{default:t(()=>[s("Chain â€˜MASQUERADEâ€˜ does not exist æŠ¥é”™è§£å†³_chain 'masquerade' does not exist-CSDNåšå®¢")]),_:1}),s(" è¿™å‡ ç¯‡å¸–å­ä¸­éƒ½æåŠäº† "),A,s(" ä¸ Docker ä¸å…¼å®¹çš„é—®é¢˜ã€‚è€ƒè™‘åˆ°æˆ‘è¿˜çœŸçš„ä¸ç†Ÿæ‚‰ "),m,s("ï¼Œåˆå»æŸ¥äº†ç‚¹èµ„æ–™ï¼Œå‘ç° Docker ä»¥å‰çš„ä¸Šæ¸¸ Moby æ˜¯ä¸æ”¯æŒçš„ï¼Œå‚è§ "),a(n,{href:"https://github.com/moby/moby/issues/26824",target:"_blank",rel:"noreferrer"},{default:t(()=>[s("[feature request] nftables support Â· Issue #26824 Â· moby/moby")]),_:1}),s("ï¼Œå› æ­¤æˆ‘åˆå»æ‰¾äº† "),v,s(" å’Œ Docker ä¸€èµ·å¼ºè¡Œä½¿ç”¨çš„æ•™å­¦æ–‡æ¡£ï¼Œç¡®å®æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ "),a(n,{href:"https://max.sodawa.com/blog/nftables-and-docker/",target:"_blank",rel:"noreferrer"},{default:t(()=>[s("debian, docker and nftables")]),_:1}),s(" å’Œ "),a(n,{href:"https://gist.github.com/goll/bdd6b43c2023f82d15729e9b0067de60",target:"_blank",rel:"noreferrer"},{default:t(()=>[s("Docker nftables configuration for Debian 10")]),_:1}),s("ï¼Œ"),a(n,{href:"https://github.com/alexandre-khoury/blog/tree/main/posts/docker-nftables",target:"_blank",rel:"noreferrer"},{default:t(()=>[s("blog/posts/docker-nftables")]),_:1}),s(" éƒ½æœ‰æ¯”è¾ƒè¯¦å°½çš„ä»‹ç» "),E])]),i("li",f,[i("p",null,[s("åœ¨ "),a(n,{href:"https://bbs.archlinux.org/viewtopic.php?id=182400",target:"_blank",rel:"noreferrer"},{default:t(()=>[s("[SOLVED] iptables table NAT: Table does not exist (do ... to insmod?) / Newbie Corner / Arch Linux Forums")]),_:1}),s(" å¸–å­é‡Œé¢çš„è¯„è®º "),D])])])])])}const I=p(g,[["render",B]]);export{w as __pageData,I as default};
