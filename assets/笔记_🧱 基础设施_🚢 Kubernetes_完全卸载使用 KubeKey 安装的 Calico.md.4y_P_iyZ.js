import{_ as p,c as d,I as i,j as s,w as l,a as e,au as r,D as a,o}from"./chunks/framework.RMxno62p.js";const T=JSON.parse('{"title":"完全卸载使用 KubeKey 安装的 Calico","description":"","frontmatter":{"tags":["计算机/网络/Calico","运维/Calico","软件/云原生/Calico","运维/云原生/Kubernetes","运维/云原生/Kubernetes/K8s","开发/云原生/Kubernetes","开发/云原生/Kubernetes/K8s","计算机/操作系统/Linux","计算机/操作系统/Linux/命令行","操作系统/Linux","操作系统/Debian","操作系统/Debian/Debian-11","计算机/网络"]},"headers":[],"relativePath":"笔记/🧱 基础设施/🚢 Kubernetes/完全卸载使用 KubeKey 安装的 Calico.md","filePath":"笔记/🧱 基础设施/🚢 Kubernetes/完全卸载使用 KubeKey 安装的 Calico.md"}'),c={name:"笔记/🧱 基础设施/🚢 Kubernetes/完全卸载使用 KubeKey 安装的 Calico.md"},g=s("h1",{id:"完全卸载使用-kubekey-安装的-calico",tabindex:"-1"},[e("完全卸载使用 KubeKey 安装的 Calico "),s("a",{class:"header-anchor",href:"#完全卸载使用-kubekey-安装的-calico","aria-label":'Permalink to "完全卸载使用 KubeKey 安装的 Calico"'},"​")],-1),C=s("h3",{id:"文档兼容性",tabindex:"-1"},[e("文档兼容性 "),s("a",{class:"header-anchor",href:"#文档兼容性","aria-label":'Permalink to "文档兼容性"'},"​")],-1),u={tabindex:"0"},y=s("thead",null,[s("tr",null,[s("th",null,"主体"),s("th",null,"版本号"),s("th",null,"文档地址（如果有）")])],-1),F=s("tr",null,[s("td",null,"Debian"),s("td",null,"11"),s("td")],-1),b=s("td",null,"Kubernetes",-1),_=s("td",null,"1.22.12",-1),m=s("td",null,"Docker",-1),A=s("td",null,"24.0.2",-1),v=s("tr",null,[s("td",null,"containerd"),s("td",null,"1.7.6"),s("td")],-1),D=s("tr",null,[s("td",null,"Linux kernel"),s("td",null,"5.10.0"),s("td")],-1),f=s("tr",null,[s("td",null,"Calico"),s("td"),s("td")],-1),x=r(`<h2 id="删除相关资源" tabindex="-1">删除相关资源 <a class="header-anchor" href="#删除相关资源" aria-label="Permalink to &quot;删除相关资源&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ds</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> calico-node</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> deploy</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> calico-kube-controllers</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sa</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> calico-node</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sa</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> calico-kube-controllers</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> calico-config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-system</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> calico-config</span></span></code></pre></div><h2 id="移除-calico-的-cni-配置" tabindex="-1">移除 Calico 的 CNI 配置 <a class="header-anchor" href="#移除-calico-的-cni-配置" aria-label="Permalink to &quot;移除 Calico 的 CNI 配置&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/cni/net.d/calico-kubeconfig</span></span></code></pre></div><h2 id="移除相关-crd" tabindex="-1">移除相关 CRD <a class="header-anchor" href="#移除相关-crd" aria-label="Permalink to &quot;移除相关 CRD&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crd</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> calico</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;{print $1}&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> xargs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crd</span></span></code></pre></div><h2 id="移除网卡" tabindex="-1">移除网卡 <a class="header-anchor" href="#移除网卡" aria-label="Permalink to &quot;移除网卡&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ifconfig</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunl0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> down</span></span></code></pre></div><h2 id="检查是否还有遗漏资源" tabindex="-1">检查是否还有遗漏资源 <a class="header-anchor" href="#检查是否还有遗漏资源" aria-label="Permalink to &quot;检查是否还有遗漏资源&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --all-namespaces</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> egrep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;calico|tigera&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> api-resources</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --verbs=list</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --namespaced</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> egrep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;calico|tigera&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> api-resources</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --verbs=list</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> egrep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;calico|tigera&quot;</span></span></code></pre></div><h2 id="重启节点" tabindex="-1">重启节点 <a class="header-anchor" href="#重启节点" aria-label="Permalink to &quot;重启节点&quot;">​</a></h2><p>执行完之后请务必重启节点。</p>`,12);function K(B,E,P,q,N,V){const n=a("NolebasePageProperties"),t=a("VPNolebaseInlineLinkPreview"),h=a("NolebaseGitContributors"),k=a("NolebaseGitChangelog");return o(),d("div",null,[g,i(n),C,s("table",u,[y,s("tbody",null,[F,s("tr",null,[b,_,s("td",null,[i(t,{href:"https://v1-22.docs.kubernetes.io/",target:"_blank",rel:"noreferrer"},{default:l(()=>[e("https://v1-22.docs.kubernetes.io/")]),_:1})])]),s("tr",null,[m,A,s("td",null,[i(t,{href:"https://docs.docker.com/",target:"_blank",rel:"noreferrer"},{default:l(()=>[e("https://docs.docker.com/")]),_:1})])]),v,D,f])]),x,i(h),i(k)])}const w=p(c,[["render",K]]);export{T as __pageData,w as default};
