import{_ as k,c as p,I as s,j as t,a,w as d,au as r,D as i,o}from"./chunks/framework.RMxno62p.js";const E=JSON.parse('{"title":"通过 apt 升级和更新 1.29.0 版本的 kubelet 和 kubectl","description":"","frontmatter":{"tags":["计算机/操作系统/Linux","操作系统/Debian","操作系统/Unix","运维/云原生/Kubernetes/K8s","运维/云原生/Kubernetes","命令行/kubectl","软件/云原生/kubectl","命令行/kubeadm","软件/云原生/kubeadm","软件/云原生/kubelet","命令行/apt","计算机/网络/Cilium","运维/Cilium","命令行/cilium","软件/云原生/Cilium","操作系统/Debian/Debian-12"]},"headers":[],"relativePath":"笔记/🧱 基础设施/🚢 Kubernetes/Kubernetes 集群的日常升级和更新/通过 apt 升级和更新 1.29.0 版本的 kubelet 和 kubectl.md","filePath":"笔记/🧱 基础设施/🚢 Kubernetes/Kubernetes 集群的日常升级和更新/通过 apt 升级和更新 1.29.0 版本的 kubelet 和 kubectl.md"}'),g={name:"笔记/🧱 基础设施/🚢 Kubernetes/Kubernetes 集群的日常升级和更新/通过 apt 升级和更新 1.29.0 版本的 kubelet 和 kubectl.md"},C=t("h1",{id:"通过-apt-升级和更新-1-29-0-版本的-kubelet-和-kubectl",tabindex:"-1"},[a("通过 apt 升级和更新 1.29.0 版本的 kubelet 和 kubectl "),t("a",{class:"header-anchor",href:"#通过-apt-升级和更新-1-29-0-版本的-kubelet-和-kubectl","aria-label":'Permalink to "通过 apt 升级和更新 1.29.0 版本的 kubelet 和 kubectl"'},"​")],-1),F=r(`<h2 id="检查依赖状态" tabindex="-1">检查依赖状态 <a class="header-anchor" href="#检查依赖状态" aria-label="Permalink to &quot;检查依赖状态&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span></span></code></pre></div><p>一般而言，1.28 的集群对应的 <code>apt</code> Repository 应该都是</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>https://pkgs.k8s.io/core:/stable:/v1.28/deb</span></span></code></pre></div><p>如果确定 <code>apt</code> 的 Repository 是预期内的结果，比如下面这样：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro has-highlighted vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Package:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Version:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 1.28.4-1.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Priority:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> optional</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Section:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> admin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Maintainer:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Kubernetes</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Authors</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">dev@kubernetes.i</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">o</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Installed-Size:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 49.9</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> MB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Homepage:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://kubernetes.io</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Download-Size:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 10.3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> MB</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">APT-Sources:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://pkgs.k8s.io/core:/stable:/v1.28/deb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Packages</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Description:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Command-line</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> utility</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> interacting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Kubernetes</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cluster</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Command-line</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> utility</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> interacting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Kubernetes</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cluster.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">N:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 有</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 条附加记录。请加上</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ‘-a’</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 参数来查看它们</span></span></code></pre></div><p>那么我们再继续。</p><h2 id="解除-debian-apt-依赖锚定-hold" tabindex="-1">解除 Debian <code>apt</code> 依赖锚定（hold） <a class="header-anchor" href="#解除-debian-apt-依赖锚定-hold" aria-label="Permalink to &quot;解除 Debian \`apt\` 依赖锚定（hold）&quot;">​</a></h2><p>可以先看看 <code>apt-mark</code> 里面是否记录了 <code>kubelet</code> 的锚定（hold）：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> showhold</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> more</span></span></code></pre></div><p>或者</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --get-selections</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;hold$&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> more</span></span></code></pre></div><p>如果返回值像是这样：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> showhold</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> more</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubeadm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubelet</span></span></code></pre></div><p>可以先解除锚定。通过下面的命令就可以解除锚定，我们一个一个来：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> unhold</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> unhold</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span></span></code></pre></div><h2 id="明确目标版本并升级" tabindex="-1">明确目标版本并升级 <a class="header-anchor" href="#明确目标版本并升级" aria-label="Permalink to &quot;明确目标版本并升级&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-cache</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> madison</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   kubelet</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 1.29.0-1.1</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> https://pkgs.k8s.io/core:/stable:/v1.29/deb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Packages</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-cache</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> madison</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   kubectl</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 1.29.0-1.1</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> https://pkgs.k8s.io/core:/stable:/v1.29/deb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Packages</span></span></code></pre></div><p>接下来定向升级：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet=&#39;1.29.0-*&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl=&#39;1.29.0-*&#39;</span></span></code></pre></div><p>升级完成之后确保 <code>kubelet --version</code> 的输出符合预期</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Kubernetes</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v1.29.0</span></span></code></pre></div><p>以及 <code>kubectl version</code> 的输出符合预期</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro has-highlighted vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> version</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Client</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Version:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v1.29.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Kustomize</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Version:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> v5.0.4-0.20230601165947-6ce0bf390ce3</span></span></code></pre></div><h2 id="还原-debian-apt-依赖锚定-hold" tabindex="-1">还原 Debian <code>apt</code> 依赖锚定（hold） <a class="header-anchor" href="#还原-debian-apt-依赖锚定-hold" aria-label="Permalink to &quot;还原 Debian \`apt\` 依赖锚定（hold）&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> hold</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> hold</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span></span></code></pre></div><p>锚定之后检查一下：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-mark</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> showhold</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> more</span></span></code></pre></div><h2 id="刷新-systemd-并重启-kubelet-守护进程" tabindex="-1">刷新 Systemd 并重启 <code>kubelet</code> 守护进程 <a class="header-anchor" href="#刷新-systemd-并重启-kubelet-守护进程" aria-label="Permalink to &quot;刷新 Systemd 并重启 \`kubelet\` 守护进程&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span></span></code></pre></div><p>检查一下 <code>kubelet</code> 服务</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">●</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet.service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Kubernetes</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Node</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Agent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     Loaded:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (/lib/systemd/system/kubelet.service; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">preset:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    Drop-In:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/lib/systemd/system/kubelet.service.d</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">             └─10-kubeadm.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     Active:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> active</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (running) since Thu 2023-12-21 22:18:27 CST; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10min</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ago</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">       Docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://kubernetes.io/docs/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   Main</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> PID:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 20669</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (kubelet)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      Tasks:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 14</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (limit: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">9830</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     Memory:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 43.1M</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        CPU:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 19.633s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     CGroup:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /system.slice/kubelet.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">             └─20669</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/bin/kubelet</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --kubeconfig=/etc/kubernetes/kubelet.conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config=/var/lib/kubelet/config.yaml</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --container-</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">12月</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[20669]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I1221</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29.179906</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   20669</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reconciler_common.go:258]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;operationExecutor.VerifyControllerAttachedVolume started for volume </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">cni-path</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> (UniqueName: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">12月 21 22:18:29 node3 kubelet[20669]: I1221 22:18:29.180071   20669 reconciler_common.go:258] &quot;operationExecutor.VerifyControllerAttachedVolume</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> started</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">host-proc-sys-net</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (Uniqu&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">12月</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[20669]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I1221</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29.180169</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   20669</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reconciler_common.go:258]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;operationExecutor.VerifyControllerAttachedVolume started for volume </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">host-proc-sys-kernel</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> (Un&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">12月 21 22:18:29 node3 kubelet[20669]: I1221 22:18:29.180432   20669 reconciler_common.go:258] &quot;operationExecutor.VerifyControllerAttachedVolume</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> started</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">cilium-run</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (UniqueName: </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">12月</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[20669]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I1221</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29.180526</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   20669</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reconciler_common.go:258]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;operationExecutor.VerifyControllerAttachedVolume started for volume </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">etc-cni-netd</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> (UniqueName&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">12月 21 22:18:29 node3 kubelet[20669]: I1221 22:18:29.180979   20669 reconciler_common.go:258] &quot;operationExecutor.VerifyControllerAttachedVolume</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> started</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">lib-modules</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (UniqueName:&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">12月</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[20669]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I1221</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29.181125</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   20669</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reconciler_common.go:258]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;operationExecutor.VerifyControllerAttachedVolume started for volume </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">hostproc</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> (UniqueName: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">12月 21 22:18:29 node3 kubelet[20669]: I1221 22:18:29.181219   20669 reconciler_common.go:258] &quot;operationExecutor.VerifyControllerAttachedVolume</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> started</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">xtables-lock</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (UniqueName&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">12月</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[20669]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I1221</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 22:18:29.181452</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   20669</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reconciler_common.go:258]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;operationExecutor.VerifyControllerAttachedVolume started for volume </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">bpf-maps</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> (UniqueName: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">12月 21 22:18:58 node3 kubelet[20669]: I1221 22:18:58.403647   20669 prober_manager.go:312] &quot;Failed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> trigger</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> manual</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run&quot; probe=&quot;Readiness&quot;</span></span></code></pre></div><p>不慌，<code>kubelet</code> 能正常起来就行。</p>`,36);function y(c,u,b,m,A,v){const e=i("NolebasePageProperties"),n=i("VPNolebaseInlineLinkPreview"),l=i("NolebaseGitContributors"),h=i("NolebaseGitChangelog");return o(),p("div",null,[C,s(e),F,t("p",null,[a("接下来返回 "),s(n,{href:"/笔记/🧱 基础设施/🚢 Kubernetes/Kubernetes 集群的日常升级和更新/1.28.4 升级和更新到 1.29.0 的操作步骤.html"},{default:d(()=>[a("1.28.4 升级和更新到 1.29.0 的操作步骤")]),_:1}),a(" 继续操作吧。")]),s(l),s(h)])}const _=k(g,[["render",y]]);export{E as __pageData,_ as default};
